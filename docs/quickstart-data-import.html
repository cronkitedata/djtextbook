<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Data Reporting - 11&nbsp; Getting and saving data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./quickstart-verbs.html" rel="next">
<link href="./quickstart-quarto.html" rel="prev">
<link href="./assets/images/favicon.ico" rel="icon">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-contrib/kbd/kbd.js"></script>
<link href="site_libs/quarto-contrib/kbd/kbd.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./quickstart.html">Programming quick start</a></li><li class="breadcrumb-item"><a href="./quickstart-data-import.html"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Getting and saving data</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./assets/images/favicon.ico" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Data Reporting</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/cronkitedata/djtextbook" rel="" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./start.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Reporting with data</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./start-story.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Learn a new way to read</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./start-math.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Newsroom math</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./start-data-def.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Defining “Data”</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./start-data-document.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Documenting your work</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./start-hunt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Finding the right data for your story</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./start-build-own.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Build your own database</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./quickstart.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Programming quick start</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quickstart-install.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Installing R and RStudio</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quickstart-program.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">A gentle intro to programming</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quickstart-startup.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Getting started with R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quickstart-quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Using Quarto</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quickstart-data-import.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Getting and saving data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quickstart-verbs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">A quick tour of verbs</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./rdepth.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Verbs of the tidyverse</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-tidy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Tidy data principles</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-filter-sort-story.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Sorting and filtering to find stories</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-verb-filter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Verbs in depth: Select, arrange, filter</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-verb-mutate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Verbs in depth: New from old data with Mutate</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-groupby-story.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Summarizing detail into totals</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-verb-groupby.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Verbs in depth: Aggregating with groups</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-verb-join.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Verbs in depth: Matchmaking with joins</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-math.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Newsroom numbers cheat sheet</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-filetypes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">File types in the wild</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-ppp.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Documentation for PPP data chapters</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">In this chapter:</h2>
   
  <ul>
  <li><a href="#billboard-hot-100" id="toc-billboard-hot-100" class="nav-link active" data-scroll-target="#billboard-hot-100"><span class="header-section-number">11.1</span> Billboard Hot 100</a>
  <ul class="collapse">
  <li><a href="#the-data-dictionary" id="toc-the-data-dictionary" class="nav-link" data-scroll-target="#the-data-dictionary">The data dictionary</a></li>
  </ul></li>
  <li><a href="#set-up-your-quarto-program" id="toc-set-up-your-quarto-program" class="nav-link" data-scroll-target="#set-up-your-quarto-program"><span class="header-section-number">11.2</span> Set up your Quarto program</a></li>
  <li><a href="#import-the-hot-100-data-file" id="toc-import-the-hot-100-data-file" class="nav-link" data-scroll-target="#import-the-hot-100-data-file"><span class="header-section-number">11.3</span> Import the Hot 100 data file</a></li>
  <li><a href="#look-at-the-data-you-imported" id="toc-look-at-the-data-you-imported" class="nav-link" data-scroll-target="#look-at-the-data-you-imported"><span class="header-section-number">11.4</span> Look at the data you imported</a>
  <ul class="collapse">
  <li><a href="#check-it-in-the-environment-tab" id="toc-check-it-in-the-environment-tab" class="nav-link" data-scroll-target="#check-it-in-the-environment-tab">Check it in the environment tab</a></li>
  <li><a href="#click-on-it-to-scroll-filter-and-sort" id="toc-click-on-it-to-scroll-filter-and-sort" class="nav-link" data-scroll-target="#click-on-it-to-scroll-filter-and-sort">Click on it to scroll, filter and sort</a></li>
  <li><a href="#use-functions-to-examine-the-rows-and-columns" id="toc-use-functions-to-examine-the-rows-and-columns" class="nav-link" data-scroll-target="#use-functions-to-examine-the-rows-and-columns">Use functions to examine the rows and columns</a></li>
  </ul></li>
  <li><a href="#introducing-the-pipe" id="toc-introducing-the-pipe" class="nav-link" data-scroll-target="#introducing-the-pipe"><span class="header-section-number">11.5</span> Introducing the pipe</a></li>
  <li><a href="#cleaning-up-and-save-for-later" id="toc-cleaning-up-and-save-for-later" class="nav-link" data-scroll-target="#cleaning-up-and-save-for-later"><span class="header-section-number">11.6</span> Cleaning up and save for later</a></li>
  <li><a href="#check-your-work-and-save" id="toc-check-your-work-and-save" class="nav-link" data-scroll-target="#check-your-work-and-save"><span class="header-section-number">11.7</span> Check your work and save</a></li>
  <li><a href="#what-we-did" id="toc-what-we-did" class="nav-link" data-scroll-target="#what-we-did"><span class="header-section-number">11.8</span> What we did</a>
  <ul class="collapse">
  <li><a href="#what-you-should-do-next" id="toc-what-you-should-do-next" class="nav-link" data-scroll-target="#what-you-should-do-next">What you should do next</a></li>
  </ul></li>
  <li><a href="#and-breathe" id="toc-and-breathe" class="nav-link" data-scroll-target="#and-breathe">And breathe</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="quickstart-data-import" class="quarto-section-identifier"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Getting and saving data</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Before you start trying to program, remember that you’re not alone when you encounter errors. Here, an accomplished data scientist, illustrates her own frustration. Watch the clock on this cartoon and on your own work: If you’re getting nowhere after about 20 minutes, take a break. If you’re still not getting anywhere, get an extra set of eyes. It’s often as simple as a spelling or punctuation error.</p>
<p><img src="assets/images/r-dataframe-take-a-break.jpg" class="img-fluid" style="width:80.0%"></p>
<section id="billboard-hot-100" class="level2" data-number="11.1">
<h2 data-number="11.1" class="anchored" data-anchor-id="billboard-hot-100"><span class="header-section-number">11.1</span> Billboard Hot 100</h2>
<p>Christian McDonald, a data journalism professor at the University of Texas, has compiled a list of Billboard’s Hot 100 hits back to the 1950s, and made it available in his Github account. We’ll be using the data on McDonald’s Github repository at <a href="https://raw.githubusercontent.com/utdata/rwd-billboard-data/main/data-out/hot100_assignment.csv" class="uri">https://raw.githubusercontent.com/utdata/rwd-billboard-data/main/data-out/hot100_assignment.csv</a></p>
<p>Here is how he has described it:</p>
<blockquote class="blockquote">
<p>The Billboard <a href="https://www.billboard.com/charts/hot-100/">Hot 100</a> singles chart has been the music industry’s standard record chart since its inception on 8/2/1958. The rankings, published by Billboard Media, are currently based on sales (physical and digital), radio play, and online streaming. The methods and policies of the chart have changed over time.</p>
</blockquote>
<blockquote class="blockquote">
<p>The data we will use here is a combination of data collected by Kaggle user <a href="https://www.kaggle.com/dhruvildave/billboard-the-hot-100-songs">Dhruvil Dave</a>, along with some scraping and merging by Prof.&nbsp;McDonald. It is stored on the code sharing website Github for safe keeping.</p>
</blockquote>
<section id="the-data-dictionary" class="level3">
<h3 class="anchored" data-anchor-id="the-data-dictionary">The data dictionary</h3>
<p>As of December 2023, this version of runs from its inception in August 1958 through mid-June 2023, before most of Taylor Swift’s Eras tour sent her Hot 100 numbers even higher.</p>
<p>Here is a <em>data dictionary</em> , sometimes called a <em>record layout</em> to go along with the data.</p>
<table class="table">
<colgroup>
<col style="width: 23%">
<col style="width: 23%">
<col style="width: 52%">
</colgroup>
<thead>
<tr class="header">
<th>variable name</th>
<th>type</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>CHART WEEK</td>
<td>date</td>
<td>The release date of the chart in the form “m/d/yyyy”</td>
</tr>
<tr class="even">
<td>THIS WEEK</td>
<td>number</td>
<td>The rank (1 through 100) of the song that week</td>
</tr>
<tr class="odd">
<td>TITLE</td>
<td>character</td>
<td>Song title</td>
</tr>
<tr class="even">
<td>PERFORMER</td>
<td>character</td>
<td>Performer, as published in the chart. There could be different spellings over time.</td>
</tr>
<tr class="odd">
<td>LAST WEEK</td>
<td>number</td>
<td>Last week’s ranking</td>
</tr>
<tr class="even">
<td>PEAK POS.</td>
<td>number</td>
<td>Highest ranking ever on the Top 100 chart</td>
</tr>
<tr class="odd">
<td>WKS ON CHART</td>
<td>number</td>
<td>Number of weeks it has appeared on the chart, not necessarily consecutive.</td>
</tr>
</tbody>
</table>
<p>Here are some things to note about it:</p>
<ul>
<li>The names of columns are in upper case and contain spaces and punctuation. That makes our life a little more complicated, and we’ll want to fix it.</li>
<li>It provides the type of data – number, date or text – that should be contained in each column.</li>
<li>Dates are shown in a way we normally read them in the U.S., such as “12/3/2023”</li>
<li>Each row represents a song in the designated week. This means that there will be lots of rows for each week, and a row for each song every time it was on the hot 100.</li>
</ul>
</section>
</section>
<section id="set-up-your-quarto-program" class="level2 page-columns page-full" data-number="11.2">
<h2 data-number="11.2" class="anchored" data-anchor-id="set-up-your-quarto-program"><span class="header-section-number">11.2</span> Set up your Quarto program</h2>
<p>You’ll do this every time you start a new document or project in R.</p>
<div class="callout-dothis">
<ol type="1">
<li><p>Create an R project in your <code>maij-working</code> folder called <code>hot-100</code> .</p></li>
<li><p>Create a new Quarto document and delete everything.</p></li>
<li><p>If you’re not already there, switch to the Source view.</p></li>
<li><p><a href="./quickstart-quarto.html#frontmatter">Copy and paste the top section from the Quarto lesson</a> delete everything else. Try rendering it to check for errors before you go any further – this part is really picky.</p></li>
<li><p>Copy and paste the code chunk below into your document and press the “Play” button to run the code.</p></li>
</ol>
</div>
<p><span class="small">This assumes you have installed the packages from the <a href="./quickstart-startup.html#installing-packages-for-this-course">Starting R</a> chapter. Go back and do that now if you skipped it. That step has to be done only once on each computer you use.</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: setup</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)              </span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)                </span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)   </span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This is a common first code chunk. The first option at the top names it “setup”, which tells it to run this code chunk before it does anything else. The second option suppresses some very annoying messages.</p>
<p>This code chunk activates three packages using the <code>library()</code> function. You have to invoke packages you want to use in each document, even though you only have to install them on your computer once.</p>
<p>Here’s what your page might look like after playing the first code chunk (visual mode):</p>
<div class="column-page-right">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="assets/images/r-import-firstchunkrun.png" class="img-fluid figure-img" style="width:90.0%"></p>
<figcaption class="figure-caption">after running first chunk</figcaption>
</figure>
</div>
</div>
<p>Don’t worry about any messages that came out after you ran the first chunk – they simply show you some information about what is in the libraries you just loaded. They might even be <span style="color: red;">red</span>!</p>
</section>
<section id="import-the-hot-100-data-file" class="level2" data-number="11.3">
<h2 data-number="11.3" class="anchored" data-anchor-id="import-the-hot-100-data-file"><span class="header-section-number">11.3</span> Import the Hot 100 data file</h2>
<p>To “import” data means to pour outside data into an R data frame, which is an R object that contains columns and rows, just like a spreadsheet.</p>
<p>Some people call this “reading” or “loading” data. This file is a CSV file, which stands for “comma-separated values”. Some other forms are shown in <a href="./appendix-filetypes.html">Appendix C: File Types in the Wild</a></p>
<p>When you import the file, R will guess what each column is – text (“chr”), numbers (“num” “), and date or date/time (”date” or “POSIX” in R).</p>
<p>(From now on, you’ll just see the R code that goes inside a code chunk you create, not the part with the backticks and brackets.)</p>
<div class="callout-dothis">
<ol type="1">
<li><p>Create a new code chunk using the Insert Chunk button <img src="assets/images/r-start-insert-chunk-button.png" class="img-fluid"> at the top right of your document, or using the keyboard shortcut <kbd data-mac="command-option-I" data-windows="Control-Alt-I"></kbd>.</p></li>
<li><p>Use the clipboard icon below to copy the code and paste into your code chunk. You might not be able to see the full name of the web address, but it’s there.</p></li>
<li><p>Press the Play button or use the keyboard shortcut <kbd>control-shift-Return</kbd> to run the code chunk.</p></li>
</ol>
</div>
<p>Click on the numbers underneath the code chunk to highlight each row with an explanation of what it does:</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-2"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-2-1" class="code-annotation-target"><a href="#annotated-cell-2-1" aria-hidden="true" tabindex="-1"></a>top100 <span class="ot">&lt;-</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-2-2" class="code-annotation-target"><a href="#annotated-cell-2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-2-3" class="code-annotation-target"><a href="#annotated-cell-2-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://raw.githubusercontent.com/utdata/rwd-billboard-data/main/data-out/hot100_assignment.csv"</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="4" onclick="event.preventDefault();">4</a><span id="annotated-cell-2-4" class="code-annotation-target"><a href="#annotated-cell-2-4" aria-hidden="true" tabindex="-1"></a>    )</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-2" data-target-annotation="1">1</dt>
<dd>
<span data-code-lines="1" data-code-cell="annotated-cell-2" data-code-annotation="1">Create a new object in R called <code>top100</code> using the assignment operator <code>&lt;-</code></span>
</dd>
<dt data-target-cell="annotated-cell-2" data-target-annotation="2">2</dt>
<dd>
<span data-code-lines="2" data-code-cell="annotated-cell-2" data-code-annotation="2">Start the function <code>read_csv()</code>…</span>
</dd>
<dt data-target-cell="annotated-cell-2" data-target-annotation="3">3</dt>
<dd>
<span data-code-lines="3" data-code-cell="annotated-cell-2" data-code-annotation="3">to access a comma-separated data file stored in Prof.McDonald’s Github site. Use just the name of the file, in quotes, if it’s already saved in your projects folder.</span>
</dd>
<dt data-target-cell="annotated-cell-2" data-target-annotation="4">4</dt>
<dd>
<span data-code-lines="4" data-code-cell="annotated-cell-2" data-code-annotation="4">Don’t forget to close your parentheses.</span>
</dd>
</dl>
</div>
</div>
<p>After running the code chunk, you should see something like this:</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 341300 Columns: 7
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (3): CHART WEEK, TITLE, PERFORMER
dbl (4): THIS WEEK, LAST WEEK, PEAK POS., WKS ON CHART

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<p>So R found:</p>
<ul>
<li>341,100 rows (or records, or observations).</li>
<li>7 columns ,</li>
<li>3 of which it thinks are character types, and 4 that it thinks should be numbers.</li>
<li>It named the columns using the first row of the file.</li>
</ul>
<p>This method of reading a file accepts the default options for importing. You may need to override some of them at times, especially when R guesses your data types incorrectly.</p>
<div class="standout">
<p>Stop a minute and think about what you just did in one second – you imported a dataset with MORE THAN a quarter of a MILLION rows without any complaint!</p>
</div>
<p>There is now a new object in your Enviornment tab, under “Data”, called <code>top100</code>, with “341,100 obs. of 7 variables”.</p>
<section id="import-tips" class="level3 unlisted">
<h3 class="unlisted anchored" data-anchor-id="import-tips">Import tips</h3>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Posit cheat sheets
</div>
</div>
<div class="callout-body-container callout-body">
<p>The <a href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/data-import.pdf">“Data import with the Tidyverse” cheat sheet</a> goes through the details of importing data. You may need some help deciphering it until you get used reading reference instructions.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Spreadsheets
</div>
</div>
<div class="callout-body-container callout-body">
<p>You have to use different functions to import spreadsheet files.</p>
<p>For Excel, you would use the <code>readxl</code> library, which you have to activate at the top of the program.</p>
<p>For Google Sheets, you’d use the <code>googlesheets4</code> library, which is a little harder to use because of Google Drive permissions. For the time being, consider downloading your Google Sheet to a csv in your project folder.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Default to character columns
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you’re not sure about the data types of each column, use an option to import them all as text, or <code>character</code>, columns. Then you can fix them one by one. Text will (almost) never be a problem. The option looks like this:</p>
<p><code>read_csv( "your file name or URL", col_types=c(.default="c") )</code></p>
</div>
</div>
</section>
</section>
<section id="look-at-the-data-you-imported" class="level2 page-columns page-full" data-number="11.4">
<h2 data-number="11.4" class="anchored" data-anchor-id="look-at-the-data-you-imported"><span class="header-section-number">11.4</span> Look at the data you imported</h2>
<p>There are several ways to examine the data you just imported.</p>
<section id="check-it-in-the-environment-tab" class="level3">
<h3 class="anchored" data-anchor-id="check-it-in-the-environment-tab">Check it in the environment tab</h3>
<p>There’s now an object listed in your Environment tab with a blue arrow. Expand it, and you’ll see the column names and what types it found.</p>
<p><img src="assets/images/r-import-envtab.png" class="img-fluid"></p>
</section>
<section id="click-on-it-to-scroll-filter-and-sort" class="level3">
<h3 class="anchored" data-anchor-id="click-on-it-to-scroll-filter-and-sort">Click on it to scroll, filter and sort</h3>
<p>To browse the data, click on its name in the environment panel.</p>
<p>Any filters or sorts that you do here won’t last – they’re just on while you’re glancing at the data. But this is useful just to get a little preview of what columns look like and to search for things you know should be there. This search is NOT case-sensitive, which is helpful when you want to get a handle on what’s in your data.</p>
<p><img src="https://cronkitedata.s3.amazonaws.com/images/r-import-scrolldata.gif" class="img-fluid"></p>
</section>
<section id="use-functions-to-examine-the-rows-and-columns" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="use-functions-to-examine-the-rows-and-columns">Use functions to examine the rows and columns</h3>
<p>But these methods are no better (and really a little worse) than just viewing your data and clicking around in Excel or Google sheets. To share your view of the data and describe it to others, you must use R code.</p>
<p>There are a few standard ways to get a quick view of what’s in your data using functions. First, you can look at the top and bottom of it using the <code>head()</code> and <code>tail()</code> functions. Try to guess what these mean:</p>
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="annotated-cell-3"><pre class="sourceCode r code-annotation-code code-with-copy"><code class="sourceCode r"><span id="annotated-cell-3-1"><a href="#annotated-cell-3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(top100)</span>
<span id="annotated-cell-3-2"><a href="#annotated-cell-3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-3-3"><a href="#annotated-cell-3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(top100, <span class="at">n=</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display column-body-outset-right">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["CHART WEEK"],"name":[1],"type":["chr"],"align":["left"]},{"label":["THIS WEEK"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["TITLE"],"name":[3],"type":["chr"],"align":["left"]},{"label":["PERFORMER"],"name":[4],"type":["chr"],"align":["left"]},{"label":["LAST WEEK"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["PEAK POS."],"name":[6],"type":["dbl"],"align":["right"]},{"label":["WKS ON CHART"],"name":[7],"type":["dbl"],"align":["right"]}],"data":[{"1":"1/1/2022","2":"1","3":"All I Want For Christmas Is You","4":"Mariah Carey","5":"1","6":"1","7":"50"},{"1":"1/1/2022","2":"2","3":"Rockin' Around The Christmas Tree","4":"Brenda Lee","5":"2","6":"2","7":"44"},{"1":"1/1/2022","2":"3","3":"Jingle Bell Rock","4":"Bobby Helms","5":"4","6":"3","7":"41"},{"1":"1/1/2022","2":"4","3":"A Holly Jolly Christmas","4":"Burl Ives","5":"5","6":"4","7":"25"},{"1":"1/1/2022","2":"5","3":"Easy On Me","4":"Adele","5":"3","6":"1","7":"11"},{"1":"1/1/2022","2":"6","3":"It's The Most Wonderful Time Of The Year","4":"Andy Williams","5":"7","6":"5","7":"26"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["CHART WEEK"],"name":[1],"type":["chr"],"align":["left"]},{"label":["THIS WEEK"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["TITLE"],"name":[3],"type":["chr"],"align":["left"]},{"label":["PERFORMER"],"name":[4],"type":["chr"],"align":["left"]},{"label":["LAST WEEK"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["PEAK POS."],"name":[6],"type":["dbl"],"align":["right"]},{"label":["WKS ON CHART"],"name":[7],"type":["dbl"],"align":["right"]}],"data":[{"1":"11/13/2021","2":"91","3":"Ya Superame (En Vivo Desde Culiacan, Sinaloa)","4":"Grupo Firme","5":"92","6":"91","7":"3"},{"1":"11/13/2021","2":"92","3":"Who's In Your Head","4":"Jonas Brothers","5":"93","6":"92","7":"4"},{"1":"11/13/2021","2":"93","3":"Money","4":"Lisa","5":"90","6":"90","7":"2"},{"1":"11/13/2021","2":"94","3":"Come Through","4":"H.E.R. Featuring Chris Brown","5":"99","6":"64","7":"17"},{"1":"11/13/2021","2":"95","3":"WFM","4":"RealestK","5":"78","6":"67","7":"4"},{"1":"11/13/2021","2":"96","3":"Lets Go Brandon","4":"Loza Alexander","5":"38","6":"38","7":"3"},{"1":"11/13/2021","2":"97","3":"Just About Over You","4":"Priscilla Block","5":"95","6":"95","7":"4"},{"1":"11/13/2021","2":"98","3":"To Be Loved By You","4":"Parker McCollum","5":"96","6":"96","7":"2"},{"1":"11/13/2021","2":"99","3":"Let's Go Brandon","4":"Bryson Gray Featuring Tyson James & Chandler Crump","5":"28","6":"28","7":"2"},{"1":"11/13/2021","2":"100","3":"Ghost Town","4":"Benson Boone","5":"NA","6":"100","7":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Use the little arrow at the top right of the listing to look at columns that don’t fit on the page.</p>
<p>This list isn’t in chronological order– it’s just showing happened to be on the top and bottom of the original file.</p>
<p>Or, you can look at a list of columns along with their types and a few examples from the top of the file using the <code>glimpse()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(top100)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 341,300
Columns: 7
$ `CHART WEEK`   &lt;chr&gt; "1/1/2022", "1/1/2022", "1/1/2022", "1/1/2022", "1/1/20…
$ `THIS WEEK`    &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, …
$ TITLE          &lt;chr&gt; "All I Want For Christmas Is You", "Rockin' Around The …
$ PERFORMER      &lt;chr&gt; "Mariah Carey", "Brenda Lee", "Bobby Helms", "Burl Ives…
$ `LAST WEEK`    &lt;dbl&gt; 1, 2, 4, 5, 3, 7, 9, 11, 6, 13, 15, 17, 18, 0, 8, 25, 1…
$ `PEAK POS.`    &lt;dbl&gt; 1, 2, 3, 4, 1, 5, 7, 6, 1, 10, 11, 8, 12, 14, 7, 16, 12…
$ `WKS ON CHART` &lt;dbl&gt; 50, 44, 41, 25, 11, 26, 24, 19, 24, 15, 31, 18, 14, 1, …</code></pre>
</div>
</div>
<p>Here, you might notice that the names of some of the columns have back-ticks around them. That’s because they don’t follow our rules for column names – they should be lower case, with no spaces or special characters.</p>
</section>
</section>
<section id="introducing-the-pipe" class="level2" data-number="11.5">
<h2 data-number="11.5" class="anchored" data-anchor-id="introducing-the-pipe"><span class="header-section-number">11.5</span> Introducing the pipe</h2>
<p>You’ll often use code in this format:</p>
<pre><code>  data_set_name |&gt;
     verb (  ) |&gt;
     verb (  ) |&gt;
     etc...</code></pre>
<p>That little symbol, <code>|&gt;</code> is called the “pipe”. It means “Take what is on this line, and use it to do the next thing” You can use the shortcut keys <kbd>Command-Shift-M</kbd> instead of typing it out.</p>
<div class="border border-primary">
<p><img src="assets/images/r-firstprog-pipenewbies.png" class="img-fluid" style="width:60.0%"> <img src="assets/images/r-firstprog-rladies.png" class="img-fluid" style="width:80.0%"></p>
</div>
<p><span class="small">(The pipe character changed a little in recent years; <code>%&gt;%</code> is largely the same as <code>|&gt;</code> )</span></p>
<p>Using a pipe can help make your code easier to read and write by separating each step into its own command.</p>
<p>For example, <code>glimpse(top100)</code> does the same thing as <code>top100 |&gt; glimpse()</code>. The second version tells R, “Start with the top100 data frame <strong>and then</strong> glimpse it. I try to separate as much as is reasonable into steps because I can then troubleshoot problems one line at a time.</p>
<div class="callout-dothis">
<ol type="1">
<li>Add a code chunk that you’ll edit to clean the column names and fix the dates the data.</li>
<li>Copy and paste the code below</li>
</ol>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-6"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-6" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-6-1" class="code-annotation-target"><a href="#annotated-cell-6-1" aria-hidden="true" tabindex="-1"></a>top100 <span class="sc">|&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-6" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-6-2" class="code-annotation-target"><a href="#annotated-cell-6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>()  <span class="sc">|&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-6" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-6-3" class="code-annotation-target"><a href="#annotated-cell-6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-6" data-target-annotation="1">1</dt>
<dd>
<span data-code-lines="1" data-code-cell="annotated-cell-6" data-code-annotation="1">Start with the <code>top100</code> data frame that we saved earlier, and then</span>
</dd>
<dt data-target-cell="annotated-cell-6" data-target-annotation="2">2</dt>
<dd>
<span data-code-lines="2" data-code-cell="annotated-cell-6" data-code-annotation="2">Use a function called <code>clean_names()</code> to convert them to computer-friendly names that won’t require special handling, and then</span>
</dd>
<dt data-target-cell="annotated-cell-6" data-target-annotation="3">3</dt>
<dd>
<span data-code-lines="3" data-code-cell="annotated-cell-6" data-code-annotation="3">Take a look at it!</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 341,300
Columns: 7
$ chart_week   &lt;chr&gt; "1/1/2022", "1/1/2022", "1/1/2022", "1/1/2022", "1/1/2022…
$ this_week    &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17…
$ title        &lt;chr&gt; "All I Want For Christmas Is You", "Rockin' Around The Ch…
$ performer    &lt;chr&gt; "Mariah Carey", "Brenda Lee", "Bobby Helms", "Burl Ives",…
$ last_week    &lt;dbl&gt; 1, 2, 4, 5, 3, 7, 9, 11, 6, 13, 15, 17, 18, 0, 8, 25, 19,…
$ peak_pos     &lt;dbl&gt; 1, 2, 3, 4, 1, 5, 7, 6, 1, 10, 11, 8, 12, 14, 7, 16, 12, …
$ wks_on_chart &lt;dbl&gt; 50, 44, 41, 25, 11, 26, 24, 19, 24, 15, 31, 18, 14, 1, 49…</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<code>|&gt;</code> not <code>&lt;-</code>
</div>
</div>
<div class="callout-body-container callout-body">
<p>Don’t confuse the pipe (<code>|&gt;</code>) with the assignment operator (<code>&lt;-</code>). The pipe says, “keep going”. The assignment operator says, “save this for later” .</p>
</div>
</div>
</section>
<section id="cleaning-up-and-save-for-later" class="level2" data-number="11.6">
<h2 data-number="11.6" class="anchored" data-anchor-id="cleaning-up-and-save-for-later"><span class="header-section-number">11.6</span> Cleaning up and save for later</h2>
<p>This section gives you a little taste of the key verbs you’ll be using throughout this class:</p>
<ul>
<li><code>select</code>, which picks and rearranges columns<br>
</li>
<li><code>mutate</code>, which lets you create new columns out of old ones.</li>
</ul>
<p>The code chunk also uses function called <code>mdy()</code>, which stands for “month-day-year”, which in turn tells R that the character <code>chart_week</code> column starts out in that format, as opposed to year-month-day or something else.</p>
<div class="callout-dothis">
<p>Try typing this code chunk into your document instead of copying and pasting. You won’t see anything come out of this when you run it. Instead, it’s saved as new object in your Environment tab.</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-7"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-7" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-7-1" class="code-annotation-target"><a href="#annotated-cell-7-1" aria-hidden="true" tabindex="-1"></a>top100_clean <span class="ot">&lt;-</span></span>
<span id="annotated-cell-7-2"><a href="#annotated-cell-7-2" aria-hidden="true" tabindex="-1"></a>  top100 <span class="sc">|&gt;</span></span>
<span id="annotated-cell-7-3"><a href="#annotated-cell-7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span> () <span class="sc">|&gt;</span>  </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-7" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-7-4" class="code-annotation-target"><a href="#annotated-cell-7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span> ( <span class="at">chart_date =</span> <span class="fu">mdy</span>(chart_week)) <span class="sc">|&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-7" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-7-5" class="code-annotation-target"><a href="#annotated-cell-7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span> ( chart_date, title, performer, this_week, last_week,</span>
<span id="annotated-cell-7-6"><a href="#annotated-cell-7-6" aria-hidden="true" tabindex="-1"></a>           wks_on_chart, peak_pos)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-7" data-target-annotation="1">1</dt>
<dd>
<span data-code-lines="1" data-code-cell="annotated-cell-7" data-code-annotation="1">Create a new data frame using the assignment operator out of what follows. Leave off this row until you know the rest works.</span>
</dd>
<dt data-target-cell="annotated-cell-7" data-target-annotation="2">2</dt>
<dd>
<span data-code-lines="4" data-code-cell="annotated-cell-7" data-code-annotation="2">Use the function <code>mdy</code>, which converts text in the form of month-day-year into true dates, to transform the chart week into a date variable called <code>chart_date</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-7" data-target-annotation="3">3</dt>
<dd>
<span data-code-lines="5,6" data-code-cell="annotated-cell-7" data-code-annotation="3">Pick out the columns to save in the order you want to see them.</span>
</dd>
</dl>
</div>
</div>
</section>
<section id="check-your-work-and-save" class="level2" data-number="11.7">
<h2 data-number="11.7" class="anchored" data-anchor-id="check-your-work-and-save"><span class="header-section-number">11.7</span> Check your work and save</h2>
<div class="callout-dothis">
<ol type="1">
<li>Check your data by “glimpsing” it:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>top100_clean <span class="sc">|&gt;</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 341,300
Columns: 7
$ chart_date   &lt;date&gt; 2022-01-01, 2022-01-01, 2022-01-01, 2022-01-01, 2022-01-…
$ title        &lt;chr&gt; "All I Want For Christmas Is You", "Rockin' Around The Ch…
$ performer    &lt;chr&gt; "Mariah Carey", "Brenda Lee", "Bobby Helms", "Burl Ives",…
$ this_week    &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17…
$ last_week    &lt;dbl&gt; 1, 2, 4, 5, 3, 7, 9, 11, 6, 13, 15, 17, 18, 0, 8, 25, 19,…
$ wks_on_chart &lt;dbl&gt; 50, 44, 41, 25, 11, 26, 24, 19, 24, 15, 31, 18, 14, 1, 49…
$ peak_pos     &lt;dbl&gt; 1, 2, 3, 4, 1, 5, 7, 6, 1, 10, 11, 8, 12, 14, 7, 16, 12, …</code></pre>
</div>
</div>
<p>Note the new data type for the chart_date, and the order of the columns along with the clean names.</p>
<ol start="2" type="1">
<li>Now save your data as an R data file (called an “RDS” file) like this:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(top100_clean, <span class="at">file=</span><span class="st">"hit100.RDS"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li>Try to process your Quarto document into a self-contained HTML page by pressing the Render button at the top of the document. You might get some errors – that’s ok for now. You’ve already done a lot.</li>
</ol>
</div>
<p>You’ll see how to load data that starts as an R data file in the next chapter.</p>
</section>
<section id="what-we-did" class="level2" data-number="11.8">
<h2 data-number="11.8" class="anchored" data-anchor-id="what-we-did"><span class="header-section-number">11.8</span> What we did</h2>
<ol type="1">
<li>Created a new Quarto document and added the packages (libraries) we plan to use.</li>
<li>Imported a comma-separated text file from the web into a data frame object called <code>top100</code>.</li>
<li>Took a look at it in several different ways.</li>
<li>Created a second data frame from the first, with names and dates fixed, with only some columns picked out and displayed in a new order.</li>
<li>Saved it into the project for use in another program.</li>
</ol>
<section id="what-you-should-do-next" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="what-you-should-do-next">What you should do next</h3>
<p>Before you put away your Quarto file, remember the principles of scripted data and documentation. Take a few minutes to clean up and document your work by narrating each step, including:</p>
<ul>
<li>Sub-headings for each of the steps</li>
<li>Introductory text describing what you are about to do</li>
<li>Maybe: Some text after the chunks that describe meaningful output or things you notice about the result.</li>
</ul>
<p>If you’re stuck, you can <a href="https://cronkitedata.s3.amazonaws.com/markdown_templates/01-top100.Rmd">use the template I created</a> as a starting point.</p>
</section>
</section>
<section id="and-breathe" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="and-breathe">And breathe</h2>
<p>You’ve now created a full, working R program in Quarto format that can serve as a model for everything you do in the future. Congratulate yourself and take a break!</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="assets/images/r-firstprog-breathe.jpg" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption class="figure-caption">Max van den Oetelaar via Unsplash</figcaption>
</figure>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation column-body">
  <div class="nav-page nav-page-previous">
      <a href="./quickstart-quarto.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Using Quarto</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./quickstart-verbs.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">A quick tour of verbs</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Data reporting for investigative journalism, Spring 2024, written by Sarah Cohen</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">Produced with <a href="https://quarto.org">Quarto</a></div>
  </div>
</footer>



</body></html>