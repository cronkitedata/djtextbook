<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Data Reporting - Appendix A — Newsroom numbers cheat sheet</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./appendix-filetypes.html" rel="next">
<link href="./r-verb-join.html" rel="prev">
<link href="./assets/images/favicon.ico" rel="icon">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./appendix-math.html">Appendices</a></li><li class="breadcrumb-item"><a href="./appendix-math.html"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Newsroom numbers cheat sheet</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./assets/images/favicon.ico" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Data Reporting</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/cronkitedata/djtextbook" rel="" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./start.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Reporting with data</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./start-story.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Learn a new way to read</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./start-data-def.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Defining “Data”</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./start-data-document.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Documenting your work</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./start-hunt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Finding the right data for your story</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./start-build-own.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Build your own database</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./quickstart.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Programming quick start</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quickstart-install.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Installing R and RStudio</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quickstart-program.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">A gentle intro to programming</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quickstart-startup.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Getting started with R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quickstart-quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Using Quarto</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quickstart-data-import.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Getting and saving data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quickstart-verbs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">A quick tour of verbs</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./rdepth.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Verbs of the tidyverse</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-tidy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Tidy data principles</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-filter-sort-story.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Sorting and filtering to find stories</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-verb-filter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Verbs in depth: Select, arrange, filter</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-verb-mutate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Verbs in depth: New from old data with Mutate</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-groupby-story.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Summarizing detail into totals</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-verb-groupby.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Verbs in depth: Aggregating with groups</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-verb-join.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Verbs in depth: Matchmaking with joins</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-math.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Newsroom numbers cheat sheet</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-filetypes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">File types in the wild</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-ppp.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Documentation for PPP data chapters</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">In this chapter:</h2>
   
  <ul>
  <li><a href="#the-pers-fractions-rates-percents-and-per-capita" id="toc-the-pers-fractions-rates-percents-and-per-capita" class="nav-link active" data-scroll-target="#the-pers-fractions-rates-percents-and-per-capita"><span class="header-section-number">A.1</span> The PERS: Fractions, rates, percents and per capita</a>
  <ul class="collapse">
  <li><a href="#fractions-and-percents" id="toc-fractions-and-percents" class="nav-link" data-scroll-target="#fractions-and-percents">Fractions and percents</a></li>
  <li><a href="#rates-and-per-capita" id="toc-rates-and-per-capita" class="nav-link" data-scroll-target="#rates-and-per-capita">Rates and per capita</a></li>
  </ul></li>
  <li><a href="#measuring-change" id="toc-measuring-change" class="nav-link" data-scroll-target="#measuring-change"><span class="header-section-number">A.2</span> Measuring change</a>
  <ul class="collapse">
  <li><a href="#simple-differences" id="toc-simple-differences" class="nav-link" data-scroll-target="#simple-differences">Simple differences</a></li>
  </ul></li>
  <li><a href="#percent-change-percent-difference" id="toc-percent-change-percent-difference" class="nav-link" data-scroll-target="#percent-change-percent-difference"><span class="header-section-number">A.3</span> Percent change / Percent difference</a>
  <ul class="collapse">
  <li><a href="#going-further-with-percents-and-rates" id="toc-going-further-with-percents-and-rates" class="nav-link" data-scroll-target="#going-further-with-percents-and-rates">Going further with percents and rates</a></li>
  </ul></li>
  <li><a href="#average-and-typical-values" id="toc-average-and-typical-values" class="nav-link" data-scroll-target="#average-and-typical-values"><span class="header-section-number">A.4</span> Average and typical values</a>
  <ul class="collapse">
  <li><a href="#the-average-or-mean" id="toc-the-average-or-mean" class="nav-link" data-scroll-target="#the-average-or-mean">The average or mean</a></li>
  <li><a href="#the-median" id="toc-the-median" class="nav-link" data-scroll-target="#the-median">The median</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="appendix-math" class="quarto-section-identifier">Appendix A — Newsroom numbers cheat sheet</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p><em>(Selected and edited from drafts of “Numbers in the Newsroom”, 2nd edition, 2014, by Sarah Cohen. Full book available from <a href="https://ire.org">IRE</a></em>)</p>
<p>Virtually every number we use must be compared with something – another time, another place or a total. This newsroom math guide helps you put numbers into perspective using three devices: “Per” something, change, and averages.</p>
<p>These are arithmetic problems – formulas many of us learned sometime around the fourth grade. Unfortunately, we had another decade to forget them before we got into reporting – then got caught in the trap of math phobia – before these tools became second nature.</p>
<p>The good news is that most news stories don’t depend on fancy math. Master this arithmetic again, and you’ll be able to tackle most reporting jobs.</p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Are you on a mobile device?
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is going to look incomprehensible. Don’t even try until you get to a bigger screen.</p>
</div>
</div>
<section id="the-pers-fractions-rates-percents-and-per-capita" class="level2" data-number="A.1">
<h2 data-number="A.1" class="anchored" data-anchor-id="the-pers-fractions-rates-percents-and-per-capita"><span class="header-section-number">A.1</span> The PERS: Fractions, rates, percents and per capita</h2>
<p>You can usually simplify your story if you can re-jigger your numbers into a rate, a ratio or a percentage. “One out of four” is a fraction, or a rate. “Forty percent” is another ratio or rate. And 235 deaths per 100,000 people is another.</p>
<p>Percents and fractions are used to scale of very large or very small numbers while putting them into perspective.</p>
<p>Rates are also used to level the playing field – they compare two items that have a different base.</p>
<p>When you see a lot of numbers in copy, examine them to see if a simple rate – “one of four” or 25 percent – would simplify your story.</p>
<section id="fractions-and-percents" class="level3">
<h3 class="anchored" data-anchor-id="fractions-and-percents">Fractions and percents</h3>
<p>Repeat this: “Percents are fractions. Fractions are percents.” Remembering this all the time will keep you focused on the key element of percentages: They’re ratios, or rates, expressed as a fraction of 100.</p>
<div class="m-3 p-2 border border-secondary">
<p><strong>Figuring a percent</strong>:</p>
<p>Step 1: Know your base. Think of the words “out of.” It’s the total of all the groups.</p>
<p>Step 2: Divide the category you care about by the base.<br>
Remember that a fraction sign (/) means “divided by” (÷).</p>
<p>Step 3: Move the decimal point two places to the right (or multiply by 100) to get the rate per hundred, or percent.</p>
<p>Step 4: Round the answer to no more than one decimal place. Better<br>
yet, look for an easier fraction your readers will understand.</p>
<hr>
<p><strong>Formula</strong></p>
<p>Step 1: Total = The base</p>
<p>Step 2: (Category / Total) = Proportion</p>
<p>Step 3: Proportion x 100 = Percent</p>
<p>Step 4: Round and simplify.</p>
<hr>
<p><strong>Example</strong></p>
<p>If 58 people say they will vote in an upcoming election and 92 say they won’t, this is how to compute the percent of people who claim they will vote:</p>
<p>Step 1: Base = number of people asked = 92 + 58 = 150</p>
<p>Step 2: Rate = 58 out of 150 = 58/150 = .386666..</p>
<p>Step 3: Percent = .38666… x 100 = 38.666666….</p>
<p>Step 4: Round and simplify: = nearly 40 percent</p>
</div>
<div class="card bg-light mb-3">
<div class="card-header font-weight-bold">
From fractions to percents and back
</div>
<div class="card-body">
<div class="card-text">
<p>You probably know that 1 out of 4 is one-quarter, and that it’s also 25 percent. But you may not know how to get from one to another.</p>
<p><em>From fractions to percents</em>:</p>
<p>1/4 = 1 ÷ 4 = 0.25. Move the decimal place over two places, or multiply by 100, to get 25%</p>
<p><em>From percents to fractions</em>:</p>
<ol type="1">
<li><p>Write your percent as a fraction: 25/100</p></li>
<li><p>Try to find a “least common denominator:” 25 in this case goes into both the top and the bottom. You might want to round off either number to come out to a simple denominator.</p></li>
<li><p>Simplify: (25 / 25) / (100 / 25) = 1 / 4</p></li>
</ol>
<p><em>To get “One out of “ numbers</em>:</p>
<ol type="1">
<li><p>Express your percentage as a proportion by dividing by 100, so 25% is 0.25.</p></li>
<li><p>Now divide one by that number: 1 / .25 = 4, so your answer is one-fourth.</p></li>
</ol>
<p>Tip for spreadsheet users: Excel allows you to format a number as a fraction or a percent. Play around with formats to see how the number is most easily described.</p>
</div>
</div>
</div>
</section>
<section id="rates-and-per-capita" class="level3">
<h3 class="anchored" data-anchor-id="rates-and-per-capita">Rates and per capita</h3>
<p>As with percentages, per person or per capita rates are used to level the playing field.</p>
<p>They’re often used when you need to compare two dissimilar places or events: Crimes in cities with different populations, deaths from various diseases or Gross Domestic Product across countries.</p>
<p>Rates also are often used with very big or very small numbers to change them into something we can understand.</p>
<p>Sometimes, though, a rate makes things more complicated, especially when events are rare and there is a consensus that they shouldn’t ever happen. Some examples include the 32 crashes attributed to GM’s faulty ignition switch, or the 64 deaths that the Centers for Disease Control associated with pharmacy compounding errors in 2012.</p>
<p>One rule of thumb is to use raw numbers when they are under 100, and revert to some kind of fraction or rate when they grow bigger.</p>
<section id="rates-for-large-numbers" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="rates-for-large-numbers">Rates for large numbers</h4>
<p>A raw per-person figure is an average and should usually be used with very big numbers.</p>
<p>A Gross Domestic Product of $17 trillion is hard to digest. So we reduce it to a number we can understand. If we divide it by 317 million, we get about $54,000 for every man, woman and child in the country. It doesn’t mean that each person earned $54,000 – in fact, almost half of all families earned less than that altogether at this writing. Instead, it includes all of the income that is generated by companies as well as people.</p>
<p>But the device turns an incomprehensible number into something we can picture. It also helps if we want to compare countries – it levels the playing field by adjusting for the size of the country.</p>
</section>
<section id="rates-for-small-numbers---crime-death-and-other-rare-events" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="rates-for-small-numbers---crime-death-and-other-rare-events">Rates for small numbers - crime, death, and other rare events</h4>
<p>Rates such as 23 per 1,000 people or something like it – are the same as percentages, but you multiply by something bigger than 100 or move the decimal place further to the right. Use these for very small numbers.</p>
<p>If 2.5 million people die in this country every year, then the percentage of people who die is a really small number: 0.789 per 100, or percent.</p>
<p>A number that little is hard to digest. So experts up the ante and express the figure as 789 deaths per 100,000 people.</p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Small numbers warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Be careful about rates based on very small numbers. One example is the number of police shootings per 100,000 people. Most police departments in the country are very small and are more likely to serve only about 5,000 people. This means that just one shooting in the department can lift them from one of the lowest rates in the nation to one of the highest. Expect rates based on very small numbers to be unstable and potentially misleading.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
</div>
</div>
<div class="m-3 p-2 border border-secondary">
<p><strong>Figuring a rate</strong></p>
<p>Step 1: Choose your base. This is often difficult. In reporting on fatalities by make of car, should you use the number of cars on the road, the number sold, or the total miles driven each year? You’ll have to decide.</p>
<p>Step 2: Divide the number you care about by the base. Choosing the numerator can also be tricky. Going back to the automobile fatality example, would you use the total number of deaths or the number of driver deaths? Take a hint using other reports you see on the topic. Experts have often come to an informal agreement about what the most telling number is.</p>
<p>Step 3: Multiply by a nice round number, such as 1,000, 100,000 or 1 million.</p>
<p>Step 4: Round the answer and simplify.</p>
<hr>
<p><strong>Formula</strong></p>
<p>Step 1: Choose the base, or “total”</p>
<p>Step 2: (Category / Total) = Proportion or Rate</p>
<p>Step 3: Proportion x 1,000 = Rate per thousand</p>
<p>Step 4: Round to zero decimal places</p>
<hr>
<p><strong>Example</strong></p>
<p>According to the FBI Crime in the United States for 2012, there were 13,000 violent and property crimes in Pittsburgh out of a population of 312,000. There were 8,870 crimes in Tucson out of a population of 531,000. Figuring a rate per thousand residents lets you compare the two cities:</p>
<table class="table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Pittsburgh</th>
<th>Tucson</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Step 1: Base= 312,000 people</td>
<td>Step 1: Base = 531,000 people</td>
</tr>
<tr class="even">
<td>Step 2: 13,000 crimes / 312,000 people = 0.041</td>
<td>Step 2: 8,870 / 531,000 people = 0.017</td>
</tr>
<tr class="odd">
<td>Step 3: 0.041 x 1,000 = 41 crimes per thousand</td>
<td>Step 3: .017 * 1,000 = 17 crimes per thousand</td>
</tr>
</tbody>
</table>
<p>So the crime rate for Pittsburgh was nearly 2 1/2 times that of Tucson that year , or 47/17 = 2.4</p>
</div>
<div class="card bg-light my-3">
<div class="card-header font-weight-bold">
Selecting your multiplier
</div>
<div class="card-body">
<div class="card-text">
<p>Some people feel that changing their multiplier from 100 to something bigger is cheating.</p>
<p>After all, a 0.2 percent rate becomes a big number – 200 – when you change the base from 100 to 100,000!</p>
<p>In practice, though, there’s nothing magical about using a base of 100 (or percent). Instead, use the number that makes sense for the comparison you’re making.</p>
<ul>
<li><p>Choose a round number – 1,000, 1 million or 100,000.</p></li>
<li><p>Choose the same number that the experts use: Crimes per 1,000 people, deaths per 100,000, or crashes per million miles driven, for example.</p></li>
<li><p>Choose a base that will give you an easy way to express it to your readers. This is one that results in a number generally between 1 and 1,000 or so.</p></li>
<li><p>Try to avoid using an outrageously large base. For instance, avoid expressing a local number in terms of 1 million people. Only a handful of cities have more than a million people.</p></li>
<li><p>Keep the same base throughout your story. Don’t shift from 100,000 to 1,000 in crime statistics, for instance, when you move from murders to total crime rates.</p></li>
</ul>
<p>You will often have to balance these rules of thumb against each other to come up with a compromise that allows you to write gracefully while keeping the sense of scale appropriate for the comparisons you’re making.</p>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="measuring-change" class="level2" data-number="A.2">
<h2 data-number="A.2" class="anchored" data-anchor-id="measuring-change"><span class="header-section-number">A.2</span> Measuring change</h2>
<p>We often write about change or difference, usually as a difference between place or time.</p>
<section id="simple-differences" class="level3">
<h3 class="anchored" data-anchor-id="simple-differences">Simple differences</h3>
<p>A simple difference is just the result of subtracting one number from another. If you are measuring differences in time, it’s the newer number minus the older number.</p>
<p>One time to use a simple difference is when the number is understandable without any calculations. Prices of common household goods, salaries and home prices are examples of numbers that needn’t always be put into perspective using percentage changes.</p>
<p>In the end, we work in news. That means that sometimes you’ll use a raw number when it’s more newsworthy. This doesn’t necessarily mean the number is more alarming – just more meaningful.</p>
<div class="pl-4 pt-1 border border-secondary">
<p><strong>Figuring a difference</strong>:</p>
<p>Subtract the older number from the newer number.</p>
<p>This is not the same as subtracting the little number from the big number.</p>
<p>If a number has fallen you get a negative number. If a number has risen you get a positive number.</p>
<p><strong>Formula</strong></p>
<p>New – Old.</p>
<p><strong>Example</strong> An executive made $2.4 million last year. She made $2.9 million this year.</p>
<p>Her raise was: $2.9 – $2.4 = 0.5 million, or $500,000, or half a million dollars.</p>
</div>
</section>
</section>
<section id="percent-change-percent-difference" class="level2" data-number="A.3">
<h2 data-number="A.3" class="anchored" data-anchor-id="percent-change-percent-difference"><span class="header-section-number">A.3</span> Percent change / Percent difference</h2>
<p>The most butchered form of newsroom math is the percent difference, or the percent change.</p>
<p>Part of the problem is that some folks have found five or six different ways to compute them. Unfortunately, only two of them work every time. I’ll show you both because sometimes – especially when you want to compare rates – one is easier than the other.</p>
<p>Note that these methods work whether or not the number is going up or going down. If the number has fallen, you’ll get a negative answer. If the number has risen, you’ll get a positive one. And it still comes out right if the increase is bigger than 100 percent.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<p>In practice, I use Method 1 when I’m working in spreadsheets because I can look at the simple difference in one column and then use it in the formula for the percentage difference. I use Method 2 when I want to compare to percent changes to one another or when working with annual rates.</p>
<div class="outer-container container-fluid border border-light my-5">
<div class="row bg-light">
<!-- row-->
<div class="col-md">
<p><!-- col1 --> <strong>Method 1: Subtract then divide</strong></p>
</div>
<!-- col1 -->
<div class="col-md">
<p><!--col2 --> <strong>Method 2: Divide then subtract</strong></p>
</div>
<p><!--col2 --></p>
</div>
<p><!-- row--></p>
<div class="container-fluid">
<!--holding the row-->
<p class="text-center">
<strong>Figuring a percent change</strong>
</p>
<div class="row">
<p><!-- row --></p>
<div class="col-6 border-right">
<p><!-- left --> Step 1: Get the simple difference between the numbers by subtracting the older number from the newer number. It doesn’t matter which one is bigger!</p>
<p>Step 2: Divide the answer by the older number.</p>
<p>Step 3: Multiply by 100, or move the decimal point two places to the right.</p>
Step 4: Round off and simplify.
</div>
<p><!-- left --></p>
<div class="col-6">
<p><!-- right --> Step 1: Get the proportion of the new number compared to the old number. This is the same as the percent of total above, except the old number is the base.</p>
<p>Step 2: Subtract 1 from that ratio</p>
<p>Step 3: Multiply by 100, or move the decimal point two places to the right.</p>
Step 4: Round off and simplify.
</div>
<p><!-- right --></p>
</div>
<p><!-- row --></p>
</div>
<p><!-- holding the row--></p>
<div class="container-fluid">
<!-- hold the row -->
<p class="text-center">
<strong>Formula</strong>
</p>
<div class="row">
<!-- the row -->
<div class="col-6 border-right">
<p><!-- left--> Step 1: New – Old = Difference</p>
<p>Step 2: Difference / Old = Decimal answer</p>
<p>Step 3: Decimal x 100 = percentage difference</p>
Step 4: Round off.
</div>
<!-- left -->
<div class="col-6">
<p><!-- right --> Step 1: New / Old = Ratio</p>
<p>Step 2: Ratio - 1 = Decimal answer</p>
<p>Step 3: Decimal x 100 = percentage difference</p>
Step 4: Round off.
</div>
<p><!-- right--></p>
</div>
<p><!-- row --></p>
</div>
<p><!-- row container --></p>
<div class="container-fluid">
<p class="text-center">
<strong>Example</strong>
</p>
<p><em>An executive made $2.4 million last year. They made $2.9 million in this year.</em></p>
<div class="row">
<div class="col-6 border-right">
<p>Step 1: Difference = 2.9 – 2.4 = 0.5</p>
<p>Step 2: Difference / Original number = <br> 0.5 / 2.4 = .208</p>
<p>Step 3: Move the decimal point = 20.8%</p>
Step 4: Round off and simplify: <br> 21% = 21 / 100 = about 20 / 100 = or about one-fifth.
</div>
<p><!-- left --></p>
<div class="col-6">
<p>Step 1: Ratio = 2.9/2.4 = 1.208</p>
<p>Step 2: Decimal answer = 1.208 - 1 = .208</p>
<p>Step 3: Move the decimal point = 20.8%</p>
Step 4: Round off and simplify: <br> 21% = 21 / 100 = about 20 / 100 = or about one-fifth.
</div>
<p><!-- right --></p>
<p><em>So the executive got a raise equivalent to one-fifth of their original salary.</em></p>
</div>
<p><!-- row--></p>
</div>
<p><!-- row container--></p>
</div>
<p><!--outer container--></p>
<div class="card bg-light my-3">
<div class="card-header font-weight-bold">
Reversing or predicting a percent change
</div>
<div class="card-body">
<div class="card-text">
<p>Remember that a number can grow many times, but it can only fall 100 percent to zero. This is a rough concept until you think it through. If you double a price of $20, increasing it by 100%, it’s $40. If you triple it, it’s $60. But if you reduce the $40 back to $20, it’s a 50 percent drop, to one-half the level, not a 100 percent decrease. In other words, percent changes can’t be reversed.</p>
<p>This means that the ads claiming you’ll use three times less detergent or a food contains three times less salt are wrong and impossible. What they probably mean is that it would be three times as much if you used the other brand or ate the other food, or the brand is one third as much. Here are two ways this makes a difference:</p>
<p>You need two of three numbers to reverse or predict a percent change:</p>
<ul>
<li>Where the number started</li>
<li>Where it ended</li>
<li>What the percent change would (or will) be</li>
</ul>
<p>Any two of those will give you what you need. It’s easiest if we use Method 2 above to get there. The example above assumes you know where it started and where it ended. Here’s how to do it if you you have either of the other two:</p>
<p><strong>Where it starts and the percent change</strong></p>
<p>Example: You started with $100 and it grew by a total of 12%. Or, you started with $100 and it fell by a total of 12% (the percent change was -12%)</p>
<p>Step 1: Convert the percent change to a ratio by moving the decimal place back : .12 (up) or -.12 (down)</p>
<p>Step 2: Add 1, resulting in 1.12 (up) or .88 (down)</p>
<p>Step 3: Multiply the beginning number by that amount : $100 x 1.12 = $112 (up), or $100 x .88 = $88 (down)</p>
<p><strong>Where it ends and the total percent change</strong></p>
<p>For example, say your house is worth $330,000, and it had appreciated by a total of 15% over the past few years. Here’s how to figure out where it started:</p>
<p>Step 1: Convert the percent change to a decimal, as above: 0.15</p>
<p>Step 2: Divide the current value by that amount = $330 / .15 = $287</p>
<p>This isn’t intuitive, but it differs because you’re starting from a bigger base. 15 percent of 330 isn’t the same as 15 percent of 287.</p>
</div>
<p><!-- card-text--></p>
</div>
<p><!-- card-body--></p>
</div>
<p><!-- card--></p>
<section id="going-further-with-percents-and-rates" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="going-further-with-percents-and-rates">Going further with percents and rates</h3>
<p>There are three common problems in changes and rates you will probably encounter that aren’t part of this guide. You should get help or look it up when these situations come up: <a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></p>
<ol type="1">
<li><p>Relative risk: That’s the technical term for dividing two percentages. If the mortgage denial rate for Black homeowners was 10 percent, and the denial rate of white homeowners was 5 percent, it means that Black homeowners are twice as likely to be denied a loan. This can be used with both rates and with changes.</p></li>
<li><p>Annual rates: When you know that something has grown, say, 2 percent a year for 10 years, it’s not the same thing as 20 percent. You have to annualize it.</p></li>
<li><p>Adjusting for inflation: Comparing values across two points in time – especially today – means putting them on the same footing. Generally, you want to convert old values to their buying power today. For example, it’s hard to compare salaries for teachers today with those 50 years ago, because our money isn’t worth as much today.</p></li>
</ol>
</section>
</section>
<section id="average-and-typical-values" class="level2" data-number="A.4">
<h2 data-number="A.4" class="anchored" data-anchor-id="average-and-typical-values"><span class="header-section-number">A.4</span> Average and typical values</h2>
<p>Averages<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> are just summaries. If a quote sums up an event, or an anecdote sums up a person using their actions instead of words, an average sums up a human condition of some kind – money, congestion, death or disease – in a single number.</p>
<p>Choosing your average carefully or deciding there may be another number or method to sum up a situation can mean the difference between accurately and inaccurately describing your story.</p>
<p>Understanding different kinds of “measures of central tendency” – what they tell us and what they don’t – is the first thing you learn in basic statistics classes. If an it doesn’t describe your data well, it’s not very productive to move forward into many other kinds of analysis.</p>
<p>Trying to compare populations over time is particularly tricky using averages because of giant demographic shifts. Between the Baby Boom and the Millennials came what some people call the Baby Bust. Getting average spending on education, for example, across these generations is really misleading – it will boom, then bust, them boom again and no one number will describe that pattern.<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></p>
<p>Two types of averages are reviewed here. Consult an introductory statistics book if your work depends on an average.</p>
<section id="the-average-or-mean" class="level3">
<h3 class="anchored" data-anchor-id="the-average-or-mean">The average or mean</h3>
<p>A “mean” is what people mean when they say the word “average”.<br>
It’s most descriptive when it summarizes numbers that don’t vary too much at either the top or bottom ends. These averages will often be misleading when they refer to items measured in dollar amount like incomes, housing costs and the like.</p>
<div class="pl-4 pt-1 border border-secondary">
<p><strong>Figuring a simple average or mean</strong></p>
<p>Step 1: Add up a list of numbers.</p>
<p>Step 2: Divide the answer by the number of numbers you’ve added up.</p>
<p><strong>Formula</strong></p>
<p>Step 1: Sum of numbers</p>
<p>Step 2: Sum / Count of numbers</p>
<p>For spreadsheet users: =AVERAGE(list of numbers)</p>
<p><strong>Example</strong></p>
<p>Here are six home prices on a block:</p>
<pre><code>$275,000          $1,200,000
$275,000            $500,000
$200,000            $395,000
</code></pre>
<p>Step 1: 275 + 275 + 200 + 1,200 + 500 + 395 = 2,845 or $2,845,000</p>
<p>Step 2: $2,845,000 / 5 = $569,000.</p>
<p>So the average home price is more than all but one on the list.</p>
</div>
</section>
<section id="the-median" class="level3">
<h3 class="anchored" data-anchor-id="the-median">The median</h3>
<p>Medians are often used to summarize the value of things measured in dollars, especially home prices and incomes. They are not sensitive to one or two unusually high or low values the way the average in the previous example is.</p>
<p>But it’s harder to get a median because you need a list of all values. For example, if you know the total income of a metropolitan area and the number of people in that area, you can compute the average – or per capita income – but not the median.</p>
<p>One way to express the median is to call it the “typical” value. Another way is to say that it’s the “middle” value.</p>
<div class="pl-4 py-1 my-2 border border-secondary">
<p><strong>Figuring a median</strong>:</p>
<p>Step 1: List all of your numbers in order, beginning with the lowest and ending with the highest.</p>
<p>Step 2: Count how many numbers you have and divide by two.</p>
<p>Step 3: Add 0.5. If that comes out to a whole number (like 13), count up the list that many values.</p>
<p>If it’s not (like 12.5), take the average of the two numbers surrounding the number. <a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a></p>
<p>In other words, this is the closest you can get to the middle of the list. This is a sorting and counting job, not a calculator job.</p>
<p>In a spreadsheet, use the =MEDIAN() function.</p>
<p><strong>Example:</strong></p>
<p>Step 1:</p>
<p>The same list, but listed from lowest to highest, with an extra expensive home</p>
<pre><code>1.    $200,000
2.    $275,000      
3.    $275,000      
4.    $395,000
5.    $500,000
6.  $1,200,000</code></pre>
<p>Step 2: 6/2 = 3</p>
<p>Step 3: 3 + .5 = 3.5</p>
<p>Step 4: Average the 3rd and 4th items on the list: (275 + 395) / 2 = $335,000</p>
</div>
<p>As a rule of thumb, the median will be more telling than the average when they’re very different as in this example. But the word “median” sounds very technical to some readers and the average encompasses all of the values in a list, so we use it when they’re not too different.</p>


</section>
</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>Note the disclaimer in <a href="https://investigativereportingworkshop.org/investigation/police-shot-killed-nearly-1000-in-2018/">this story on police shootings by The Washington Post</a>, in which changes in the rates of police shootings may just be random.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>It’s impossible for a number to fall more than 100 percent. That would mean it went below zero and then no formula works. There’s no good way to show a percent change when a figure like annual company earnings goes from profit to loss.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>They are part of the “Numbers in the Newsroom” book from which this guide is derived.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>I’m using the term “average” freely here. Technically, a simple average and median are measures of central tendency, but I’ll treat them as different types of averages for simplicity sake.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>This is sort of an example of “Simpson’s paradox” in that an average hides meaningful trends among sub-populations.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>In statistical programs like R, there are various ways to specify how to deal with medians when there are ties like this. This is the most common way, but it may not be the way your program handles it.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation column-body">
  <div class="nav-page nav-page-previous">
      <a href="./r-verb-join.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Verbs in depth: Matchmaking with joins</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./appendix-filetypes.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">File types in the wild</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Data reporting for investigative journalism, Spring 2024, written by Sarah Cohen</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">Produced with <a href="https://quarto.org">Quarto</a></div>
  </div>
</footer>



</body></html>