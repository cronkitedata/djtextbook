[{"path":"index.html","id":"preface","chapter":"Preface","heading":"Preface","text":"online book serves compilation handouts, websites tutorials used data reporting class ASU’s Cronkite School Journalism Mass Communication. material useful courses self-study, primarily aimed investigative journalism masters’ students Cronkite.covers:Reporting replication data journalismTable stakes: Spreadsheets newsroomAnalyzing data stories using R R MarkdownIt doesn’t cover:Data visualization publicationWorking non-tabular data images, sound document collectionsCreating news applicationsFreedom Information public records techniquesData science. journalism book, programming statistics book.note language: ’ll use words “read” “write” generic sense. intend cover range journalistic media, including listening, watching, news applications graphics.","code":""},{"path":"index.html","id":"credits","chapter":"Preface","heading":"Credits","text":"’m grateful trainers, experts collaborators made training materials open world, linked prominently throughout book. errors omissions .book written bookdown using RStudio. complete source available Github. built using R version 4.1.2, bookdown version 0.24 using bs4_book template (slightly tweaked , style informed Stat 545 Jenny Bryan)– Sarah Cohen, Winter 2021-22 sarah.h.cohen@asu.edu","code":""},{"path":"starter-intro.html","id":"starter-intro","chapter":"In this section","heading":"In this section","text":"section tipsheets, handouts tutorials cover fundamental parts investigative reporting data:Learning read helps learn consuming others’ work reporter rather bystander.Learning read helps learn consuming others’ work reporter rather bystander.Newsroom math general tips getting fear math. complete guide Appendix ANewsroom math general tips getting fear math. complete guide Appendix ADefining “Data” walks mean journalism use word “data”, mean almost anything anyone.Defining “Data” walks mean journalism use word “data”, mean almost anything anyone.Replication data diary introduces idea work documented, either separate data diary self-documenting programs.Replication data diary introduces idea work documented, either separate data diary self-documenting programs.","code":""},{"path":"start-story.html","id":"start-story","chapter":" 1 Learn a new way to read","heading":" 1 Learn a new way to read","text":"Getting started data journalism often feels ’ve left newsroom entered land statistics, computer programming data science. chapter help start seeing data reporting new way, learning study great works craft writer rather reader.jelani cobbJelani Cobb recently tweeted, “engineer doesn’t look bridge way pedestrians drivers .” see “language angles load bearing structures.” just see bridge. referring long-form writing, reporting data can also learned example – spend enough time examples.Almost good writers reporters try learn examplary work. know one reporter studies prize-winning journalism hone craft. site plenty examples,stay lookout others.","code":""},{"path":"start-story.html","id":"read-like-a-reporter","chapter":" 1 Learn a new way to read","heading":"1.1 Read like a reporter","text":"Try approach data empirical reporting reporter first, consumer second. goal triangulate story discovered, reported constructed. ’ll want think story, told way, time, considered newsworthy enough publish another approach topic might .","code":""},{"path":"start-story.html","id":"what-were-the-questions","chapter":" 1 Learn a new way to read","heading":"What were the questions?","text":"data journalism, often start tip, hypothesis. Sometimes ’s simple question. Walt Bogdanich New York Times renowned seeing stories around every corner. Bogdanich said prize-winning story “Disability Epidemic Among Railroad’s Retirees” came simple question railway workers went strike pension benefits – much worth? story led FBI investigation arrests, along pension reform largest commuter rail country. 1The hypothesis stories might directed. 2021, Howard Center Investigative Journalism ASU published “Little victims everywhere”, set stories lack justice survivors child sexual assault Native American reservations. story came previous reporters center analyzed data Justice Department showing FBI dropped cases investigated, Justice Department prosecuted half matters referred investigators. hypothesis rarely pursued federal prosecutors – usually focused immigration, white collar crime drugs – weren’t prepared pursue violent crime Indian Country.studying data-driven investigation, try imagine reporters trying prove disprove, used . journalism, rely mixture quantitative qualitative methods. ’s enough prove “numbers” statistical evidence. just beginning story. supposed ground-truth stories actual people places.","code":""},{"path":"start-story.html","id":"go-beyond-the-numbers","chapter":" 1 Learn a new way to read","heading":"Go beyond the numbers","text":"’s easy focus numbers statistics make key findings, reason story. reporters make mistake thinking numbers came place – rarity long-form investigations. Instead, sources woven together mix original research research done others. Try pay attention sourcing done piece. Sometimes, tell analysis original. times ’s subtle.don’t just look statistics reported story. many (?) investigations, key people, places time elements come directly database.analyzing housing court data New York Times, one fact hit looking timeline eviction cases: cases ever filed one city’s courts happened Thanksgiving week one year. kind detail compelling story recent.Often, place reporter visits determined examples found data. story rural development funds, examples came analysis database. data gave us good lead, examined press releases easy--get sources calling visiting recipients towns.","code":""},{"path":"start-story.html","id":"reading-tips","chapter":" 1 Learn a new way to read","heading":"1.2 Reading tips","text":"’ll get better reading investigations data-driven work time, now, remember go beyond obvious:might reporters found key examples, made good characters illustrations larger issue? come data?might reporters found key examples, made good characters illustrations larger issue? come data?think came first – narrative single example broadened data (naively, qualitative method), big idea illustrated characters (quantitative method)?think came first – narrative single example broadened data (naively, qualitative method), big idea illustrated characters (quantitative method)?records used? public records, leaks, proprietary data?records used? public records, leaks, proprietary data?methods use? testing, use statistical analysis, geographic methods? won’t always know, look methodology section description alongside story.methods use? testing, use statistical analysis, geographic methods? won’t always know, look methodology section description alongside story.might localize adapt methods find stories?might localize adapt methods find stories?Pick key findings (usually nut graf series bullets opening chapter): controvesial? might derived? might investigative hypothesis? given critics due tried falsify work?Pick key findings (usually nut graf series bullets opening chapter): controvesial? might derived? might investigative hypothesis? given critics due tried falsify work?effective writing presentation story? makes compelling journalism rather dry study? might done differently? video story better told text, text story made good documentary? visual elements well integrated? writing draw keep reading? Think structure, story length, entry points graphics working together.effective writing presentation story? makes compelling journalism rather dry study? might done differently? video story better told text, text story made good documentary? visual elements well integrated? writing draw keep reading? Think structure, story length, entry points graphics working together.convinced? holes questions didn’t get addressed?convinced? holes questions didn’t get addressed?","code":""},{"path":"start-story.html","id":"analyze-data-for-story-not-study","chapter":" 1 Learn a new way to read","heading":"1.3 Analyze data for story, not study","text":"journalists ’ll often using data, social science methods even interviewing differently true experts. ’re seeking stories, studies. Recognizing news data one hardest skills less experienced reporters new data journalism. list potential newsworthy data points adapted Paul Bradshaw’s “Data Journalism Heist”.Compare claims powerful people institutions facts – classic investigative approach.Report unexpected highs lows (change, characteristic)Look outliers – individual values buck trend seen restVerify bust mythsFind signs distress, happiness dishonesty emotion.Uncover new -reported long-term trends.Find data suggesting area different others kind.Bradshaw also recent study data journalism pieces: “angles journalists use often tell stories data”, Online Journalism Blog. ’m sure agree, ’s looking mainly visualizations rather stories, ’re worth considering.","code":""},{"path":"start-story.html","id":"exercises","chapter":" 1 Learn a new way to read","heading":"1.4 Exercises","text":"’re member Investigative Reporters Editors, go site find recent prize-winning entry (usually text rather broadcast). Get copy IRE contest entry Resources page. Try match reporters said key portions story.’re member Investigative Reporters Editors, go site find recent prize-winning entry (usually text rather broadcast). Get copy IRE contest entry Resources page. Try match reporters said key portions story.next time find good data source, try find story references . data local, might look story used similar data elsewhere, 911 response times overdose deaths. many stories use federal datasets can easily localized. Look description dataset story see data might used.next time find good data source, try find story references . data local, might look story used similar data elsewhere, 911 response times overdose deaths. many stories use federal datasets can easily localized. Look description dataset story see data might used.","code":""},{"path":"start-math.html","id":"start-math","chapter":" 2 Newsroom math","heading":" 2 Newsroom math","text":"Statistics people tears washed - Paul BrodeurJo Craven McGinty, New York Times, used simple rates ratios discover 6-story brick New Jersey hospital expensive nation. 2012, Bayonne Medical Center “charged highest amounts country nearly one-quarter common hospital treatments,” Times story said.story, McGinty needed know number procedures reported government total amount hospital charged. Dividing find average price, ranking common procedures, led surprising result.","code":""},{"path":"start-math.html","id":"why-numbers","chapter":" 2 Newsroom math","heading":"2.1 Why numbers?","text":"Using averages, percentages percent change bread butter data journalism, leading stories ranging home price comparisons school reports crime trends. may charming one time reporters announce didn’t “” math, longer. Instead, now announcement reporter can job. never able tackle complicated, -depth stories without reviewing basic math.good news math statistics need newsroom isn’t nearly difficult high school algebra. learned somewhere around 4th grade. decade forget deciding didn’t like math. mastering basic arithmetic requirement modern age.working typical newsroom math, need learn :Overcome fear numbersIntegrate numbers reportingRoutinely compute averages, differences ratesSimplify select right numbers storyWhile chapter covers general tips, can find specific instructions typical newsroom math Appendix ","code":""},{"path":"start-math.html","id":"overcoming-your-fear-of-math","chapter":" 2 Newsroom math","heading":"2.2 Overcoming your fear of math","text":"learned read, got used idea 26 letters American English assembled units understand without thinking – words, sentences, paragraphs books. never got comfort level 10 digits, neither audience.Think reaction seeing page words. Now imagine page numbers.Instead, picture number “five”. ’s easy. might fingers might team basketball court. ’s simple understand.Now picture number 275 million. ’s hard. Unfortunately, 275 billion isn’t much harder, even though ’s magnitudes larger. (million seconds goes 11 days may alive billion seconds – 36 years.)easiest way get used numbers learn ways cut size calculating rates, ratios percentages.\nanalysis, keep eye simplest accurate way characterize numbers want use. “Characterize” important word – ’s usually necessary overly precise long story doesn’t hinge nuanced reading small differences. (anything depends news? may .)’s one example putting huge numbers perspective. Pay attention really can picture - ’s probably $21 equivalent.written even simply, editors found facts unbelievable wanted give readers chance math . ’s reasonable, ’s even simpler way say : “earned nearly $1 billion taxes…given $300,000 groups backing candidates, equivalent dinner Olive Garden typical American family , based Congressional Budget Office income data.” (yes, checked price Olive Garden meal time four people.)","code":""},{"path":"start-math.html","id":"put-math-in-its-place","chapter":" 2 Newsroom math","heading":"2.3 Put math in its place","text":"journalists, numbers – facts – make third leg stool supported human stories anecdotes , insightful comment experts. serve us three ways:summaries. Almost definition, number counts something, averages something, otherwise summarizes something. Sometimes, good job, average height Americans. Sometimes terrible job, average income Americans. Try find summaries accurately characterize real world.summaries. Almost definition, number counts something, averages something, otherwise summarizes something. Sometimes, good job, average height Americans. Sometimes terrible job, average income Americans. Try find summaries accurately characterize real world.opinions. Sometimes ’s opinion derived years impartial study. Sometimes ’s opinion tinged partisan selective choices facts. Use accordingly.opinions. Sometimes ’s opinion derived years impartial study. Sometimes ’s opinion tinged partisan selective choices facts. Use accordingly.guesses. Sometimes ’s good guess, sometimes ’s --cuff guess. sometimes ’s hopeful guess. Even everything presumably counted many times, ’s still (nearly accurate) guess. Yes, “audits” presidential election results several states 2021 found handful errors – meaningful number, just .guesses. Sometimes ’s good guess, sometimes ’s --cuff guess. sometimes ’s hopeful guess. Even everything presumably counted many times, ’s still (nearly accurate) guess. Yes, “audits” presidential election results several states 2021 found handful errors – meaningful number, just .find humanity numbers, cutting size relegating proper role, ’ll find less fearful. ’ll able characterize ’ve learned rather numb readers every number notebook. may even find finding facts fun.","code":""},{"path":"start-math.html","id":"going-further","chapter":" 2 Newsroom math","heading":"2.4 Going further","text":"","code":""},{"path":"start-math.html","id":"tipsheets","chapter":" 2 Newsroom math","heading":"Tipsheets","text":"Steve Doig’s “Math Crib Sheet”Appendix : Common newsroom math, adapted drafts book Numbers Newsroom, Sarah Cohen.","code":""},{"path":"start-math.html","id":"reading-and-viewing","chapter":" 2 Newsroom math","heading":"Reading and viewing","text":"“Avoiding Numeric Novcain: Writing Well Numbers,” Chip Scanlan, Poynter.com“Avoiding Numeric Novcain: Writing Well Numbers,” Chip Scanlan, Poynter.comT. Christian Miller’s “Writing data-driven story”T. Christian Miller’s “Writing data-driven story”viral Twitter thread:viral Twitter thread:\nhappens head 27+48?\n","code":""},{"path":"start-math.html","id":"exercises-1","chapter":" 2 Newsroom math","heading":"2.5 Exercises","text":"Imagine someone gave $1 million spend anything want. Write list things add amount. easy. Now, imagine someone gave $1 billion spend whatever want, anything left year returned. spend ? (can give away money, can’t 50% charity’s annual revenues. can’t give 10 $100 million gifts!) See far get trying spend . homes, yachts, student loan repayments friends? ’ve hardly gotten started.Imagine someone gave $1 million spend anything want. Write list things add amount. easy. Now, imagine someone gave $1 billion spend whatever want, anything left year returned. spend ? (can give away money, can’t 50% charity’s annual revenues. can’t give 10 $100 million gifts!) See far get trying spend . homes, yachts, student loan repayments friends? ’ve hardly gotten started.Imagine Jan. 1, 2020 tasked writing annual weather story, summarizing high low points previous year. Using daily summary temperatures, rain wind Phoenix, try find three interesting facts story. want download data NOAA, choose “Local Climatalogical Data,” keep rows refer “SOD,” “Summary Day”.Imagine Jan. 1, 2020 tasked writing annual weather story, summarizing high low points previous year. Using daily summary temperatures, rain wind Phoenix, try find three interesting facts story. want download data NOAA, choose “Local Climatalogical Data,” keep rows refer “SOD,” “Summary Day”.","code":""},{"path":"start-data-def.html","id":"start-data-def","chapter":" 3 Defining “Data”","heading":" 3 Defining “Data”","text":"data /ˈdeɪ.tə/ :information electronic form can stored used computer, information, especially facts numbers, collected examined >considered used help decision-making– Cambridge Dictionary – sort 2","code":""},{"path":"start-data-def.html","id":"the-birth-of-a-dataset","chapter":" 3 Defining “Data”","heading":"3.1 The birth of a dataset","text":"journalism uses data collected one purpose something entirely different. Understanding original uses – matters people collected , doesn’t – profoundly affect accuracy usefulness.","code":""},{"path":"start-data-def.html","id":"trace-data-and-administrative-records","chapter":" 3 Defining “Data”","heading":"Trace data and administrative records","text":"“Art Access”, David Cullier Charles N. Davis describe process tracking life times dataset. purpose make sure know request government agency. idea applies using data acquire elsewhere.Understanding data exists crucial understanding , reporter, might .Anything can systematically search analyze considered one piece data. reporters, usually deal data created process something else – conducting inspection, delivering tweet, scoring musical. sciences, flotsam jetsom left behind called “digital trace data” born digitally.journalism social sciences, many data sources born government process – safety inspection, traffic ticket, filing death certificate. administrative records form basis much investigative reporting often subject public records FOIA requests. born part government job, without thought given might used another way. sciences, often called “administrative records”.trace data might considered first part definition – information can stored used.’s Chris Bail Duke University describes :","code":""},{"path":"start-data-def.html","id":"data-collected-and-curated-for-analysis","chapter":" 3 Defining “Data”","heading":"Data collected and curated for analysis","text":"Another kind data compiled collected specifically purpose studying something. might collected form survey poll, might system sampling measure pollution weather. ’s information intrinsic value information.video suggests hard line trace data custom data. practice, ’s clear. Many newsrooms may curate data published sources administrative records, Washington Post’s police shooting dataset. cases, agencies covering get already-compiled data state local governments.type data might considered second type definition – tabular information used decision-making.","code":""},{"path":"start-data-def.html","id":"granular-and-aggregated-data","chapter":" 3 Defining “Data”","heading":"3.2 Granular and aggregated data","text":"One hardest concepts lot new data journalists idea granularity data source. lot ways think : individual items list vs. figures table; original records vs. compilations; granular data vs. statistics.Generally, investigative reporter interested getting data close possible granular information exists, least computer files. ’s example , might give little intuition ’s important think way:someone dies US, standard death certificate filled series officials - attending physician, institution died even funeral direcor.Click link see blank version standard US death certificate form – notice detail detailed instructions supposed filled . 3A good reporter imagine many stories coming little boxes. Limiting just COVID-19-related stories: profile local doctor signed COVID-19-related death certificates city, examine number deaths COVID contributing, underlying immediate, cause death. compare smoking rates city number decedents whose tobacco use likely contributed death. Maybe ’d want know long patients suffered disease died. map deaths find block town devastated virus.Early pandemic, Coulter Jones Jon Kamp examined records one states makes public, concluded “Coronavirus Deaths Likely Missed Michigan, Death Certificates Suggest”probably can’t . reason , states, death certificates public records treated secrets. 4. Instead, state local governments provide limited statistics related deaths, usually county, detail. ’s example Arizona:’s difference granular data aggregate data. typical (universal) characteristics :often consider trade-offs. Granular data detail need - especially involves personally identifiable information like names addresses - can take months years negotiation public records requests, even law allows . ’s often much easier convince agency provide summarized incomplete data. Don’t balk using works . understand vast majority cases, ’s summarized way ’s lost information important story.","code":""},{"path":"start-data-def.html","id":"nouns","chapter":" 3 Defining “Data”","heading":"3.3 Nouns","text":"brings us one important things must find data begin analyze: “noun” row tabular dataset represent? statistics, might called observations cases. data science, ’re usually called records. Either way, every row must represent thing – person, place, year, water sample school. can’t really anything figure .2015, story New York Times called “Deportation Follow Minor Crimes, Records Show” . government claimed removing hardened criminals country, analysis data suggested many minor infractions.writing piece, work around problem data: agency refused provide us anything help us distinguish individuals one another. knew row represented one deportation – one person! Without column, field variable attribute individual – say, name date birth, scrambled version DHS number – way even estimate often people deported multiple times. read story, ’ll see careful wording, except reported spoken people ground.","code":""},{"path":"start-data-def.html","id":"further-reading","chapter":" 3 Defining “Data”","heading":"3.4 Further reading","text":"“Basic steps working data”, Data Journalism Handbook, Steve Doig, ASU Professor. describes piece problem knowing exactly data compiled.“Basic steps working data”, Data Journalism Handbook, Steve Doig, ASU Professor. describes piece problem knowing exactly data compiled.“Counting Infected” , Rob Gebellof Daily, July 8, 2020.“Counting Infected” , Rob Gebellof Daily, July 8, 2020.“Spreadsheet thinking vs. Database thinking”, Robert Kosara, gets idea looking individual items often “database”, statistical compilations often “spreadsheets”.“Spreadsheet thinking vs. Database thinking”, Robert Kosara, gets idea looking individual items often “database”, statistical compilations often “spreadsheets”.“Tidy Data”, Journal Statistical Software (linked pre-print) Hadley Wickham , quintessential article describing think “clean” data. purposes, much describes “tidy” comes individual, granular records – statistical compilations. ’s academic article, underlying concepts ’ll working year.“Tidy Data”, Journal Statistical Software (linked pre-print) Hadley Wickham , quintessential article describing think “clean” data. purposes, much describes “tidy” comes individual, granular records – statistical compilations. ’s academic article, underlying concepts ’ll working year.","code":""},{"path":"start-data-def.html","id":"exercises-2","chapter":" 3 Defining “Data”","heading":"3.5 Exercises","text":"Get copy parking ticket local government, try imagine database look like. every row represent? every column represent? ’s missing expect find, included surprises ?Get copy parking ticket local government, try imagine database look like. every row represent? every column represent? ’s missing expect find, included surprises ?next time get government statistical report, scour footnotes find explanation data came . ’ll surprised often compilations administrative records - government version trace data.next time get government statistical report, scour footnotes find explanation data came . ’ll surprised often compilations administrative records - government version trace data.","code":""},{"path":"start-data-diary.html","id":"start-data-diary","chapter":" 4 Replication and the data diary","heading":" 4 Replication and the data diary","text":"Associated Press, data reporters issue simple command beginning project, sets common set files folders. , reporters’ work centrally stored documented agreed-upon locations, making easy one team dip project.unit’s work, including story memos, done using standardized tools allow replication point project ensure communication members reporting graphics teams looking , --date results.Meghan Hoyer, team’s former manager, said goal make sure anyone team pick project event emergency without wasting time.One concession Hoyer made standardize team around R programming language. doesn’t regret . “big lift time,” said. “now never go back” overseeing projects done using less formal structure documentation.","code":""},{"path":"start-data-diary.html","id":"replication-and-the-data-diary","chapter":" 4 Replication and the data diary","heading":"4.1 Replication and the data diary","text":"formal processes used AP might work smaller endeavors, anyone can put underlying ideas work. Center Public Integrity, Talia Buford, now ProPublica, kept simple Word document questions code annotated help repeat work. “data diary” served backstop roadmap fact-checking.analysis way ’s characterized publication must demonstrably accurate. means understanding exactly , , communicated general audience. can’t describe exactly data came , derive findings, find , simply shouldn’t published.Think data work way think interview notes transcripts research story. wouldn’t quote court case without reading probably talking participants. ’d make sure know find documents people say . consult documents fact-checking. data work – even short-lived – documented least detail. Ideally, someone reading notes able repeat work understand means.also don’t want future self curse present self. likely ’ll drop work point stories become urgent return months later. able pick left briefly refreshing work.disagreements among reporters much try make work replicable just scientists . Matt Waite’s rant subject prompted write rebuttal. right answer probably somewhere .","code":""},{"path":"start-data-diary.html","id":"first-steps-in-documentation","chapter":" 4 Replication and the data diary","heading":"4.2 First steps in documentation","text":"Anyone taken hard sciences computer programming class school probably maintain lab notebook. data diary idea – running list sources steps taken get final answers.Start documentation process even open new dataset. quick daily story, might able keep work one short document page spreadsheet file. longer project, may find easier break documents apart logical pieces.\ncomputer languages self-documenting – write steps taken. data diary may necessary programming language combined narrative Jupyter Notebooks R Markdown documents.Whether alongside computer code separate document, sections worth considering whenever start story project.","code":""},{"path":"start-data-diary.html","id":"data-sourcing","chapter":" 4 Replication and the data diary","heading":"Data sourcing","text":"source data, know ’s authentic. specific. don’t pretend got original source found elsewhere, textbook data.world archive.source data, know ’s authentic. specific. don’t pretend got original source found elsewhere, textbook data.world archive.Describe original source data collected released.Describe original source data collected released.separate set notes, reference stories studies use similar data. Include interview notes, advice, warnings findings along stories already done.separate set notes, reference stories studies use similar data. Include interview notes, advice, warnings findings along stories already done.Identify alternative sources similar related datasets documents.Identify alternative sources similar related datasets documents.Specifically write stored organized work. want make sure can get back latest version easily, supporting documents need check .Specifically write stored organized work. want make sure can get back latest version easily, supporting documents need check .","code":""},{"path":"start-data-diary.html","id":"data-documentation-and-flaws","chapter":" 4 Replication and the data diary","heading":"Data documentation and flaws","text":"sure include links copies original documentation record layout, data dictionary5 manual. isn’t one, consider making data dictionary ’ve learned.sure include links copies original documentation record layout, data dictionary5 manual. isn’t one, consider making data dictionary ’ve learned.Document ways checked integrity data. many ways might inaccurate. Try reconcile number rows totals can produce match reports created source, reports used . longer stories, ’ll also check impossible combinations (10-year-olds DUIs), missing data, improper importing exporting dates, among things. (’ll come back .)Document ways checked integrity data. many ways might inaccurate. Try reconcile number rows totals can produce match reports created source, reports used . longer stories, ’ll also check impossible combinations (10-year-olds DUIs), missing data, improper importing exporting dates, among things. (’ll come back .)Record questions (answers get ) meaning fields scope data.Record questions (answers get ) meaning fields scope data.Document decisions ’ve made scope method analysis. example, want look “serious” crimes, describe categorized crime “serious” “serious.” vetted experts verified documenting industry standards.Document decisions ’ve made scope method analysis. example, want look “serious” crimes, describe categorized crime “serious” “serious.” vetted experts verified documenting industry standards.Include list interviews conducted / questions asked officials said.Include list interviews conducted / questions asked officials said.","code":""},{"path":"start-data-diary.html","id":"processing-notes","chapter":" 4 Replication and the data diary","heading":"Processing notes","text":"projects require many steps get dataset can analyzed. may scrape data, combine sources fix entries. common elements document:Hand-made corrections. Try list every one, ’s ok describe , clustering hand-entering using OpenRefine. Link spreadsheet, document program used. Just sure always work copy data.Hand-made corrections. Try list every one, ’s ok describe , clustering hand-entering using OpenRefine. Link spreadsheet, document program used. Just sure always work copy data.Geocoding (affixing geographic coordinates addresses). Note many correct, many missing, .Geocoding (affixing geographic coordinates addresses). Note many correct, many missing, .description got messy data tabular form form suitable analysis. example, may strip headings flip spreadsheet head. Make sure write .description got messy data tabular form form suitable analysis. example, may strip headings flip spreadsheet head. Make sure write .","code":""},{"path":"start-data-diary.html","id":"the-good-part-your-analysis","chapter":" 4 Replication and the data diary","heading":"The good part: Your analysis","text":"question asked data, steps took answer . use programming notebooks, write plain language query statements.question asked data, steps took answer . use programming notebooks, write plain language query statements.Vetting answers: looked , commented themVetting answers: looked , commented themWhy might wrong.might wrong.","code":""},{"path":"start-data-diary.html","id":"examples-of-documentation","chapter":" 4 Replication and the data diary","heading":"4.3 Examples of documentation","text":"published Jupyter notebook analysis FEC enforcement actions Los Angeles Times’ data desk. Ben Welsh, author notebook, says previous versions unpublishable work.published Jupyter notebook analysis FEC enforcement actions Los Angeles Times’ data desk. Ben Welsh, author notebook, says previous versions unpublishable work.2018 Buzzfeed News repo start--finish documentation opioid deaths story.2018 Buzzfeed News repo start--finish documentation opioid deaths story.One year, created dataset practice class contained information population changes Arizona counties. turned awesome exercise, created example data diary go instructive data .One year, created dataset practice class contained information population changes Arizona counties. turned awesome exercise, created example data diary go instructive data .Data cleaning come lot future, ’s closely intertwined documenting work. ’s email exchange Craig Silverman, now ProPublica, process used New York Times reporting fact-checking. isn’t process replication, discusses kinds things .Data cleaning come lot future, ’s closely intertwined documenting work. ’s email exchange Craig Silverman, now ProPublica, process used New York Times reporting fact-checking. isn’t process replication, discusses kinds things .","code":""},{"path":"start-hunt.html","id":"start-hunt","chapter":" 5 Finding the right data for your story","heading":" 5 Finding the right data for your story","text":"","code":""},{"path":"start-hunt.html","id":"an-example-news21-hate-in-america","chapter":" 5 Finding the right data for your story","heading":"5.1 An example: News21 “Hate in America”","text":"2018, News 21 – multi-university investigative reporting fellowship hosted ASU’s Cronkite School Journalism – chose “Hate America” topic year. risk others reporting subject year, making difficult News 21 break new ground. also difficult became clear quite quickly one documented every case hate crimes hate-driven incidents U.S.","code":""},{"path":"start-hunt.html","id":"data-news-21-used","chapter":" 5 Finding the right data for your story","heading":"5.1.0.1 Data News 21 used","text":"meant team find creative way quantify problem. sources used included:Raw data National Crime Victimization Survey, annual survey crime victims asks whether hate element crime. Reporters Catherine Devine Allie Bice used data report produced Justice Department, instead analyzed raw data new way show twice many incidents may motivated hate previously acknowledged. analysis thoroughly vetted experts survey, hate crimes, criminology. also created structure around entire package provided newsy lead overview storyRaw data National Crime Victimization Survey, annual survey crime victims asks whether hate element crime. Reporters Catherine Devine Allie Bice used data report produced Justice Department, instead analyzed raw data new way show twice many incidents may motivated hate previously acknowledged. analysis thoroughly vetted experts survey, hate crimes, criminology. also created structure around entire package provided newsy lead overview storyA database created team reporters monitored two weeks’ social media activity users associated white nationalists, new-Nazis far-right groups sites including Twitter, Facebook, Gab VK. enabled Kia Gardener write:database created team reporters monitored two weeks’ social media activity users associated white nationalists, new-Nazis far-right groups sites including Twitter, Facebook, Gab VK. enabled Kia Gardener write:News 21 monitored daily social media activity various far-right users, including white nationalists neo-Nazis, June 10 June 24. tracked 3 million followers combined. Reporters recorded compiled 2,500 posts popular platforms, Twitter Facebook, emerging social media platforms, including Gab VK.half posts directed specific demographics communities, black Americans Latinos Jewish people LGBTQ members….– Social Media: voices hate find place preach, News 21, August 2018Federal prosecutions hate crimes various federal statutes. Reporter Lenny Martinez scraped Justice Department’s hate crime-related press releases find cases government bragged . cases supplemented list cases extracted Westlaw federal case database. team logged case Google sheet show kinds incidents pursued federal prosecutors, .Federal prosecutions hate crimes various federal statutes. Reporter Lenny Martinez scraped Justice Department’s hate crime-related press releases find cases government bragged . cases supplemented list cases extracted Westlaw federal case database. team logged case Google sheet show kinds incidents pursued federal prosecutors, .ProPublica’s “Documenting Hate” project, , Southern Poverty Law Center, tried compile many stories hate incidents. ProPublica’s database tip sheet, quantification. served one key goal data source: source reporters consult seeking specific types examples specific locations.ProPublica’s “Documenting Hate” project, , Southern Poverty Law Center, tried compile many stories hate incidents. ProPublica’s database tip sheet, quantification. served one key goal data source: source reporters consult seeking specific types examples specific locations.FBI Uniform Crime Report’s Hate Crime series. quickly learned data seriously flawed non-response local police departments squishy definition included. Another flaw others, including ProPublica, thoroughly reported flaws trends data, meaning failed test newsworthiness.FBI Uniform Crime Report’s Hate Crime series. quickly learned data seriously flawed non-response local police departments squishy definition included. Another flaw others, including ProPublica, thoroughly reported flaws trends data, meaning failed test newsworthiness.","code":""},{"path":"start-hunt.html","id":"data-the-team-didnt-use","chapter":" 5 Finding the right data for your story","heading":"5.1.0.2 Data the team didn’t use","text":"also sources team considered didn’t pursue, sometimes difficulty sometimes less useful project expected:Justice Department’s U.S. attorney case management system, provided details cases government chose pursue along . (subsequent analysis showed vast majority cases rejected prosecutors, vetting analysis proved difficult time available.)Justice Department’s U.S. attorney case management system, provided details cases government chose pursue along . (subsequent analysis showed vast majority cases rejected prosecutors, vetting analysis proved difficult time available.)Databases graffiti maintained local police departments. required public records requests department records usually aren’t clearly public. team also contacted Google companies publish street level images see possible isolate hate symbols. Companies declined release images users flagged offensive.Databases graffiti maintained local police departments. required public records requests department records usually aren’t clearly public. team also contacted Google companies publish street level images see possible isolate hate symbols. Companies declined release images users flagged offensive.Historical questions Roper Center Public Opinion Research General Social Survey might shed light attitudes race religion time. proved difficult match years didn’t really provide much insight.Historical questions Roper Center Public Opinion Research General Social Survey might shed light attitudes race religion time. proved difficult match years didn’t really provide much insight.just ways News 21 team looked far wide sources methodically used document stories. project type, search often failed along way whole team learned topic got know experts way wouldn’t just seeking quotes.","code":""},{"path":"start-hunt.html","id":"finding-data-and-documents","chapter":" 5 Finding the right data for your story","heading":"5.2 Finding data and documents","text":"big part data reporting finding, creating acquiring records can use electronically.sources readily available data include:Government agencies open government sitesHobbyists interest groupsData aggregators data collectorsAcademic researchers might share dataMicrodata surveys government programs, Census, Medicare, General Social Survey several standard sites.Social data API’s Spotify, Twitter services.Details scraped online data sources aren’t available bulk.also difficult ways find data:Public records requestsWhistleblower leaksHome made databases created documents, free text image document collections.Responses survey conduct .testing issues water quality soil contamination.start project, ’ll usually rely experts advocates lead lot possible data sources. can also use strategies troll interesting datasets might make good stories practice.Listen caveats warnings. may decide ’re important, don’t want blindsided end. sure ask – often, people expertise data story project ideas can’t get funded approved, happy someone else .search using Google, try use advanced commands precisely hit target.\ntipsheet goes Google advanced search operators. ’s missing one important ones, Google doesn’t official support works: : : operators, :2020-01-01 Jan. 1, 2020. form.","code":""},{"path":"start-hunt.html","id":"government-agency-sites","chapter":" 5 Finding the right data for your story","heading":"5.2.1 Government agency sites","text":"Try guess government agencies – state, local federal – interest topic. Browse websites find “Publications” “Data research”, searchable database. ’ll often find downloadable data . learn , can also evaluate hard scrape data want. Don’t limit jurisdications care . one city state good dataset, strong chance local government thing.Look federal agency sites find least common denominator database – usually compiled detailed state local reports.Even can’t find database, might able find name datset maintained internally audits, footnotes reports, initiatives.know good agency search, use advanced Google searches filetype:csv filetype:xlsx, limit site agency city site bring datasets letting users download.","code":""},{"path":"start-hunt.html","id":"news-reports","chapter":" 5 Finding the right data for your story","heading":"5.2.2 News reports","text":"One useful sources find names databases original sources news reports relied data, refers data source quoted experts. doesn’t matter ’re looking area others – places kinds information collected stories similar across geographic areas.get good using resources precisely can. means getting familiar advanced searching Google, using LexisNexis news databases provided ASU library. offer much targeted searching usual Google search, result much -point stories. find good story, consider logging spreadsheet doc, identify:wrote whenWhat government sources data explicitly mentioned.analysis data done news outlet, research depended .terms art seem used around topic. example, hate crimes frequently referred “bias” crimes many articles – searching “hate” might surface .","code":""},{"path":"start-hunt.html","id":"ire.org-tipsheets","chapter":" 5 Finding the right data for your story","heading":"5.2.2.1 IRE.org tipsheets","text":"Another source information news stories used data reporting IRE, two ways search details: ire.org tip sheets story archive. Log IRE.org choose tipsheets look guides reporters; choose story database look stories general topic click form reporters filled go sources. ’ll often find pair – story, tip sheet – done person year.(database library currently undergoing review, lot data listed date. might also point standard sources data.)","code":""},{"path":"start-hunt.html","id":"academic-articles","chapter":" 5 Finding the right data for your story","heading":"5.2.3 Academic articles","text":"Make sure Google Scholar search topic. often find one two researchers delved subject single source. often great shortcut. example, News 21 example, search hate crimes Google Scholar identified article called “Documenting Hate Crimes United States: consideration data sources,” APA PsycNet. Although specifically sexual orientation gender diversity, cataloged different ways scholars try document bias crimes. Devine settled crime victimization survey, another Google scholar search surfaced expert survey wrote changed years. turned former chief Justice Department section ran survey, one project’s best sources. Another source led book, “Statistics Criminology Criminal Justice.” One authors book also provided advice.Another value approach help find technical jargon topic ’re studying. ’s often difficult literature searches without knowing term.","code":""},{"path":"start-hunt.html","id":"think-tanks-interest-groups","chapter":" 5 Finding the right data for your story","heading":"5.2.4 Think tanks / interest groups","text":"Try find interest groups care lot topic sides. often websites recent research topic might experts can consult. Take advice cautiously often point prove unabashed twisting data make point. However, can often use raw data draw conclusions. news organizations frown , sure transparent ’ve done.Another good way use interest groups think tanks get initial versions public records wait requests processed. Washington Post, used old version weapons trace database year fought government ; also used copy Agriculture subsidies acquired Environmental Working Group waiting public records requests completed.Sometimes, gathering Tweets advocates can provide rich dataset, ’s relatively easy . example, used Twitter posts Police Misconduct project Cato Institute get list stories ’d compiled topic.","code":""},{"path":"start-hunt.html","id":"data-collectors","chapter":" 5 Finding the right data for your story","heading":"5.2.5 Data collectors","text":"Several sites trying make businesses collected maintaining databases. Others make available data collected past.sure look original source data find . wouldn’t say news article came Google News Lexis, wouldn’t say dataset came Google Data Search. ’s documented , might contact owner detail.careful . ’re often old, undocumented poorly vetted. give sense might able get reliable source, give ideas data collection effort.*data.world** wants Facebook Instagram data. private public accounts, users upload data want share. means ’s varied people .newsroom AP member, might access data.world feed, contains curated documented data local newsrooms can use stories. reporters also use data.world store public records. government agencies posting data directly data.world. cases, ’re undocumented hobbyists.Vet way Google results.*Journalists’ sites** can often find individual journalists journalism organizations various sharing sites, including Github (doesn’t show default Google searches), data.world versioning. Look sites see collected – ’s share. Fivethirtyeight, ProPublica Los Angeles Times particularly active data archives.*Google data search** , well, Google data. general, data search limited sources frequently logging data sets posted state local government sources.makes attempt curate search, though, cautious find something.One use dataset search see cities counties voluntarily released. see , often means local state government might similar data can request.example, searching police shootings brings dataset released Orlando Police Department, contains far detail dataset released Phoenix 2018:orlando pdBe sure look different terms meaning thing. example, searching “use force” brings completely different sets data “police shootings”.","code":""},{"path":"start-hunt.html","id":"vetting-data-provenance","chapter":" 5 Finding the right data for your story","heading":"5.3 Vetting data provenance","text":"even open dataset, know dataset collected, originally came current . future chapter go many ways reporters check data ’ve found completeness, mistakes problems.first blush, look anything precludes using data can’t identify responsible collected. basic vetting ’d source hope use.Look :original source. getting secondary source, look see hard get original. ’s secondary source, reliable ? going comfortable crediting data? can’t identify data collected, probably can’t use .original source. getting secondary source, look see hard get original. ’s secondary source, reliable ? going comfortable crediting data? can’t identify data collected, probably can’t use .others used criticisms made use.others used criticisms made use.timeliness data. Anything two three years old effectively useless news article. ’s old, plan updated.timeliness data. Anything two three years old effectively useless news article. ’s old, plan updated.Data definitions, data dictionaries record layouts. maps underlying data, definitions can prove difficult understand.Data definitions, data dictionaries record layouts. maps underlying data, definitions can prove difficult understand.","code":""},{"path":"start-build-own.html","id":"start-build-own","chapter":" 6 Build your own database","heading":" 6 Build your own database","text":"","code":""},{"path":"start-build-own.html","id":"the-evolution-of-a-home-made-database","chapter":" 6 Build your own database","heading":"6.1 The evolution of a home-made database","text":"day December 2015 San Bernadino couple killed 14 people, New York Times published short story called “Often Mass Shootings Occur? Average, Every Day, Records Show”.daily story spurred Times embark project document mass shooting America year. Five months later, published story:Sharon LaFraniere, Daniela Porat Agustin Armendariz described results work 10 paragraphs story. (suggest also read lede - ’s exquisite example framing lede anecdote detail context.)Seeking deeper insight phenomenon, New York Times identified analyzed 358 shootings four casualties, drawing two databases assembled news reports citizen contributors, verifying details law enforcement agencies.small handful high-profile mass shootings like South Carolina Oregon. rest pencil sketch everyday America violent.chronicle easily lives shattered firearm readily available — waistband, glove compartment, mailbox garbage can serves gang’s gun locker. document mayhem spawned banal offenses: push bar, Facebook taunt, wrong choice music house party. tally scores unfortunates wrong place wrong time: 11-month-old clinging mother’s hip, shot prepared load car; 77-year-old church deacon, killed stray bullet watching television couch.shootings took place everywhere, mostly outdoors: neighborhood barbecues, family reunions, music festivals, basketball tournaments, movie theaters, housing project courtyards, Sweet 16 parties, public parks. motives gleaned, roughly half involved suggested crime gang activity. Arguments spun control accounted shootings, followed acts domestic violence.typical victim man 18 30, 1 10 17 younger. Less known pulled triggers nearly half cases remain unsolved. arrested identified suspects, average age 27.shootings occurred economically downtrodden neighborhoods. shootings, large, middle-class phenomenon.divide racial well. Among cases examined Times 39 domestic violence shootings, largely involved white attackers victims. many high-profile massacres, including wild shootout Texas biker gangs left nine people dead 18 wounded., though, nearly three-fourths victims suspected assailants whose race identified black. experts suggest helps explain drumbeat dead wounded inspire outrage.Notice authors weave details chronicled database data points. Now, try imagine dataset might organized allow rich description phenomenon.database, built Armendariz, mostly reported Porat, designed anticipate writing phase:database split two separate tables – one detailed 358 events another detailed 1,592 victims.database split two separate tables – one detailed 358 events another detailed 1,592 victims.included links original FOIA requests documentation ’d need fact-checking.included links original FOIA requests documentation ’d need fact-checking.columns categories items summarized – ages ethnicity victims, severity injury, whether solved. much data included detailed descriptions searched using sophisticated filters. Still others tagged one-word descriptions allowed reporters pluck just right examples just right part story, using words like “suspected gang”, “child”, “party”. time, tags reviewed revised, common small databases like .columns categories items summarized – ages ethnicity victims, severity injury, whether solved. much data included detailed descriptions searched using sophisticated filters. Still others tagged one-word descriptions allowed reporters pluck just right examples just right part story, using words like “suspected gang”, “child”, “party”. time, tags reviewed revised, common small databases like .Fact-checking information publication included database. example, database logged photos, interview contact notes, specific entries name spelling fact checks. way reporters focus ready publication, rather review things ’d already checked.Fact-checking information publication included database. example, database logged photos, interview contact notes, specific entries name spelling fact checks. way reporters focus ready publication, rather review things ’d already checked.didn’t ?didn’t bother standardize names addresses pieces – interest counting many “Smith”s database, didn’t care often occurred Main Street.contexts, fields might important, required filtering sorting, counting. reason make difficult fill database necessary.also didn’t try publish full dataset. ’s important consideration, especially data collecting contains sensitive potentially erroneous information. Getting level accuracy might added several months project, probably served readers better. (bare bones list cases, exceptions, already available updated elsewhere.)","code":""},{"path":"start-build-own.html","id":"when-to-build-your-own-database","chapter":" 6 Build your own database","heading":"6.2 When to build your own database","text":"common reasons design build data stories:long-running story periodically updated new documents events want track.\nOne reporter created spreadsheet log event related Jack Kevorkian, doctor became famous helping people commmit suicide. list made easy write story every time another person died, full list people circumstances knew ’d already fact-checked.\nfirst data-driven set stories came following actions George Steinbrenner, former principle owner New York Yankees, whose family owned failing shipbuilding company Tampa early 1990s. pressed “sort” button, discovered time helped company gain new Navy contracts lending money, demanded repayment soon contract signed, sending back downward spiral.long-running story periodically updated new documents events want track.One reporter created spreadsheet log event related Jack Kevorkian, doctor became famous helping people commmit suicide. list made easy write story every time another person died, full list people circumstances knew ’d already fact-checked.first data-driven set stories came following actions George Steinbrenner, former principle owner New York Yankees, whose family owned failing shipbuilding company Tampa early 1990s. pressed “sort” button, discovered time helped company gain new Navy contracts lending money, demanded repayment soon contract signed, sending back downward spiral.getting information disparate sources need easy way search , arrange chronologically, keep track need verify. Examples include reviewing court cases across jurisdictions compiling death records many medical examiners’ officers. also work tracking FOIA requests. ’ve read Michael Berens’ story serial killer Illinois.getting information disparate sources need easy way search , arrange chronologically, keep track need verify. Examples include reviewing court cases across jurisdictions compiling death records many medical examiners’ officers. also work tracking FOIA requests. ’ve read Michael Berens’ story serial killer Illinois.want fill details every item list, like mass shootings story . quite common – might list opioid overdose deaths medical examiner, want fill details case. USA Today, Anthony DeBarros 9/11 tell story every person killed World Trade Center, including planes hit.want fill details every item list, like mass shootings story . quite common – might list opioid overdose deaths medical examiner, want fill details case. USA Today, Anthony DeBarros 9/11 tell story every person killed World Trade Center, including planes hit.","code":""},{"path":"start-build-own.html","id":"tools-for-building-databases","chapter":" 6 Build your own database","heading":"6.3 Tools for building databases","text":"simplest tool one-table database just Google Sheets Excel. Google Microsoft 365, ’s possible create data entry form feed form, can make little structured just free-form spreadsheet. gets little complicated want control data types choices, might choose use different product.Airtable one option (ASU enterprise account, kick create account school email address). recently, Microsoft created “Lists” 365 account, Google added “Tables” Google account. Airtable Tables quite limited free edition – limited may find doesn’t meet needs. even can’t use full dataset, might useful sandbox test different ways set dataset.products let set related tables, events events people tables used Times story, create tags structured items spreadsheet. ’re also good working teams.","code":""},{"path":"start-build-own.html","id":"how-to-start","chapter":" 6 Build your own database","heading":"6.4 How to start","text":"Work everyone might use dataset start set goals. Think full range issues might come . importantly, going get information long take? just list things chronological order provide quick overview reporting? trying count specific types events, police shootings race gender lawyer disciplinary actions taken?difference whether primarily using dataset sorting filtering versus grouping counting category.also assume won’t able get information ’d hoped, real life doesn’t often fit neat rectangular boxes. ’s fine put aspirational columns case can get details, sure stay realistic. takes long fill row database, won’t .considerations:Try find interest group academic researcher already tried tally information ’re collecting. may good structures can adapt project. can’t, try find standard want measure results – policy followed , case solved ? key statistics identify newsworthiness results.Try find interest group academic researcher already tried tally information ’re collecting. may good structures can adapt project. can’t, try find standard want measure results – policy followed , case solved ? key statistics identify newsworthiness results.Carefully define “universe”. case Washington Post’s Pulitzer Prize-winning “Fatal Flaws” series deadly police shootings, reporters chose focus deaths result gun discharges line duty. means aren’t able talk people killed police, people killed custody, happen hours others strangulations causes death. cases, may choose FOIA top 50 cities counties ignore rest. ’s ok limit universe. Just sure entire team knows agrees definitions limits places results.Carefully define “universe”. case Washington Post’s Pulitzer Prize-winning “Fatal Flaws” series deadly police shootings, reporters chose focus deaths result gun discharges line duty. means aren’t able talk people killed police, people killed custody, happen hours others strangulations causes death. cases, may choose FOIA top 50 cities counties ignore rest. ’s ok limit universe. Just sure entire team knows agrees definitions limits places results.unit analysis, noun use describe row database? want count events, people, cases, years, something else? , one one row things, may mean splitting work inot one data frame table, way Times reporters people events.unit analysis, noun use describe row database? want count events, people, cases, years, something else? , one one row things, may mean splitting work inot one data frame table, way Times reporters people events.Build data dictionary start filling database, keep adjusting adapt real world. Make sure include detailed data type (eg, list separated semicolons, long text, category, number, date….), list standardized words codes plan use (“Y” “N” yes , example) .Build data dictionary start filling database, keep adjusting adapt real world. Make sure include detailed data type (eg, list separated semicolons, long text, category, number, date….), list standardized words codes plan use (“Y” “N” yes , example) .Reduce number columns smartly combining categories tags, considering way ’ll use field. example, sorting street name isn’t usually useful (especially can filter ), may reason split street number, name, etc. different columns. enter names standard format (eg, Last, First Middle Suffix), ’re easy split later can kept one column still sorted. words, consider whether want able sort, filter count entries. requires different level standardization.Reduce number columns smartly combining categories tags, considering way ’ll use field. example, sorting street name isn’t usually useful (especially can filter ), may reason split street number, name, etc. different columns. enter names standard format (eg, Last, First Middle Suffix), ’re easy split later can kept one column still sorted. words, consider whether want able sort, filter count entries. requires different level standardization.Anticipate errors. One common problems creating dataset whole purpose sort arrange date, enter dates properly. rarely get exact date every item list. several strategies , entering year, month day different columns; entering approximate date, flagging “approximate” separate field (preference).Anticipate errors. One common problems creating dataset whole purpose sort arrange date, enter dates properly. rarely get exact date every item list. several strategies , entering year, month day different columns; entering approximate date, flagging “approximate” separate field (preference).Build fact-checking. nothing else, sure include source information row, provide way get back original quickly. example, typing events court case, enter link case folder one field, page number item ’re entering another. ’m publishing anything dataset, include columns name checks, fact checks even whether narrative copy edited.Build fact-checking. nothing else, sure include source information row, provide way get back original quickly. example, typing events court case, enter link case folder one field, page number item ’re entering another. ’m publishing anything dataset, include columns name checks, fact checks even whether narrative copy edited.many columns really want? spreadsheet, things can bet pretty unwieldy pretty fast. Try avoid 15 columns, try define filled .many columns really want? spreadsheet, things can bet pretty unwieldy pretty fast. Try avoid 15 columns, try define filled .example spreadsheet created log first 100 days Obama administration. “subject_tags” column let reporters enter variety categories, normalized came time use .100 daysThose tags resulted relatively easy create graphics like filtering related tags ordering date:reversals","code":""},{"path":"start-build-own.html","id":"an-example","chapter":" 6 Build your own database","heading":"6.5 An example","text":"2013, New York Times Frontline collaborated story police-involved domestic violence. story narrative single case. important show first time sheriff Florida county slow investigate deputies. Another case several years earlier telltale problems.Times obtained several key documents case.* can read copy internal affairs report , quickly come away realizing ’s hard follow, repetitive ’re never quite sure ’s happened. record layout table built, small snippet looks like.data dictAnd rows look like. Notice organized chronologically, organized order listed underlying document. “sort” button turns chronology.sjso-exampleAnd finally, written case final story:year , Sheriff Shoar’s disciplinary posture called question domestic violence case involving deputy named Halford (Bubba) Harris II.Two supervisors learned accusations Mr. Harris abused wife. investigation immediately opened, records show.One sergeant prepare affidavit documenting accusations. told supervisor hold back, stuck visor squad car, remained, even another officer became aware incidents, according Mr. Harris’s internal affairs file.case came head Christmas Eve, wife fled house called police. Internal affairs officers uncovered possible acts domestic violence hiring, records show. wife said married, held knife throat hit . ex-wife said threatened gun. charges filed.Col. Todd R. Thompson, sheriff’s director law enforcement, recommended Mr. Harris fired, saying actions “particularly egregious trouble deeply.”necessary create spreadsheet logging almost 100 events case? . go every document detail anyway, meant didn’t .","code":""},{"path":"xl-intro.html","id":"xl-intro","chapter":"Introduction","heading":"Introduction","text":"people consider using spreasheets table stakes getting data journalism. ’s relatively easy see ’re can easily share work colleagues. fact, pieces Pulitzer-Prize winning COVID-19 coverage New York Times compiled using elaborate highly tuned set Google spreadsheets dozens contributors.guide uses Excel Mac Office 365, newsrooms still . reason ’re little easier get around particular options pivot tables – crucial part table stakes. Google sheets shine elsewhere book, particularly comes time scrape websites import non-tabular file formats like JSON.Excel Windows different – much capability working large complex data, provides better tuning import operations.screen shots instructions created MacOS Monterey. come earlier Mac versions, largely now. Windows users replace instructions using CMD- key CTL- key. table compares keystrokes Apple desktops, laptops Windows machines Excel bottom Excel Refresher","code":""},{"path":"xl-intro.html","id":"tutorials","chapter":"Introduction","heading":"Tutorials","text":"Spreadsheets form Excel Google Sheets used almost every workplace America. section covers need newsroom, different set skills businesses.Excel Refresher : Start good habitsAn Excel Refresher : Start good habitsSorting filtering find stories : first step interviewing dataSorting filtering find stories : first step interviewing dataGrouping pivot tables: Aggregating, super power spreadsheetsGrouping pivot tables: Aggregating, super power spreadsheetsFormulas Excel: Percents, sums, basic computations used newsrooms.Formulas Excel: Percents, sums, basic computations used newsrooms.","code":""},{"path":"xl-intro.html","id":"practice-exercises","chapter":"Introduction","heading":"Practice exercises","text":"Practice “notice claims” Phoenix: Filtering pivot table practice using claims made city Phoenix 2010-2020.","code":""},{"path":"xl-refresher.html","id":"xl-refresher","chapter":" 7 An Excel Refresher","heading":" 7 An Excel Refresher","text":"Spreadsheets everywhere, ’s worth re-learning use well. Reporters usually use spreadsheets three ways:create original databases events sorting, filtering counting. Examples include long-running court case; details opioid death city; list police shootings documents; even list public records requests contact log.create original databases events sorting, filtering counting. Examples include long-running court case; details opioid death city; list police shootings documents; even list public records requests contact log.use data created others fast, simple analysis data cleanup. Many government agencies provide information spreadsheet form, often require rejiggering can use .use data created others fast, simple analysis data cleanup. Many government agencies provide information spreadsheet form, often require rejiggering can use .perform simple, straightforward analysis data share team members. becoming less common reporters learn programming languages, ’s still common newsrooms share data, especially Google Sheets.perform simple, straightforward analysis data share team members. becoming less common reporters learn programming languages, ’s still common newsrooms share data, especially Google Sheets.guide use Excel rather Google sheets little easier work larger datasets still available newsrooms. Google Sheets essentially capabilities easier share teammates. also features lacking Excel comes getting data Web. 6Some reporters flinch typing 30 100 entries spreadsheet. shouldn’t. learn take notes structured way, ’ll always able find verify work. try calculate sum 30 numbers calculator, ’ll type least twice anyway. Also, getting used easy tasks spreadsheet keeps muscles trained need .","code":""},{"path":"xl-refresher.html","id":"re-learning-excel-from-the-ground-up","chapter":" 7 An Excel Refresher","heading":"7.1 Re-learning Excel from the ground up","text":"areas spreadsheet different visual clues, learning read make life much easier.image shows key areas screen ’re just viewing sheet:readyThis changes ’re editingediting","code":""},{"path":"xl-refresher.html","id":"the-spreadsheet-grid","chapter":" 7 An Excel Refresher","heading":"The spreadsheet grid","text":"start spreadsheet, ’ll see letters across top numbers side. ever played Battleship, ’ll recognize idea – every little square, cell, referenced intersection column letter row number:B2 cell currently active. can tell ’s outlined sheet ’s shown upper left corner.","code":""},{"path":"xl-refresher.html","id":"mouse-shapes","chapter":" 7 An Excel Refresher","heading":"Mouse shapes","text":"","code":""},{"path":"xl-refresher.html","id":"selecting-cells-and-ranges","chapter":" 7 An Excel Refresher","heading":"Selecting cells and ranges","text":"Spreadsheets act cells regions selected. begin typing, ’ll start entering information currently selected cell.select: Hold BFWPS cell clice – twice. Check formula bar make sure ’ve selected think ’ve got. can also look bottom right spreadsheet information.’ll often work ranges cells formulas. defined corners area want work – often column information. example , range A1:B6, “:” referring word “”.select group cells act : Hover BFWPS one corner, click drag diagonal corner. Make sure Evil Hand nowhere seen. entire area shaded except currently selected cell. Look upper right corner see many rows columns selected.select column row : Hover BFWPS letter top column. row, hover row number margin","code":""},{"path":"xl-refresher.html","id":"reading-the-screen","chapter":" 7 An Excel Refresher","heading":"Reading the screen","text":"","code":""},{"path":"xl-refresher.html","id":"entering-data","chapter":" 7 An Excel Refresher","heading":"Entering data","text":"Select cell start typing. information type won’t locked cell hit Return / Enter key, move selection another cell. Hit “Escape” cancel entry.can’t lot things ’re editing, lot greyed menu items, look formula bar see still editing cell.’re trouble getting menu item seeing result work, try hitting “Escape” try . may actually entered information sheet.","code":""},{"path":"xl-refresher.html","id":"locking-in-headings","chapter":" 7 An Excel Refresher","heading":"Locking in headings","text":"spreadsheet grows vertically rows, ’ll want able see top time. grows horizontally columns, ’ll probably want see columns left, names. called “Freezing Panes” – freeze part page stays place move around.Select corner want frozen. example, want first three columns frozen (:C) first row frozen (1), select cell D2. first cell move, everything left stay screen.freeze panes","code":""},{"path":"xl-refresher.html","id":"formatting-tricks","chapter":" 7 An Excel Refresher","heading":"Formatting tricks","text":"Use buttons format dialog box make numbers easier read.Use buttons format dialog box make numbers easier read.column filled lot text, select column look Home ribbon next formatting area “Wrap Text”. means double-click widen column, get taller, wider. good need save valuable real estate screen.column filled lot text, select column look Home ribbon next formatting area “Wrap Text”. means double-click widen column, get taller, wider. good need save valuable real estate screen.","code":""},{"path":"xl-refresher.html","id":"getting-started-with-a-dataset","chapter":" 7 An Excel Refresher","heading":"7.2 Getting started with a dataset","text":"SLOW ! Don’t anything understand front can predict next mouse click .data encounter created someone else purpose . means can’t assume anything. may complete. may inaccurate. may mean something completely different appears first blush.","code":""},{"path":"xl-refresher.html","id":"first-steps","chapter":" 7 An Excel Refresher","heading":"First steps","text":"Document got spreadsheet can get back original.Read anything can contains. Look documentation comes data.Save original safe place original name metadata. Work copy.spreadsheet shows #### instead words numbers, widen columns. shows 7E-14 something like , format numbers, “General”.Check corners – look top left bottom right. data one area? footnotes non-data sections mixed ? ’re going want fix later.","code":""},{"path":"xl-refresher.html","id":"interview-your-data","chapter":" 7 An Excel Refresher","heading":"Interview your data","text":"","code":""},{"path":"xl-refresher.html","id":"headings","chapter":" 7 An Excel Refresher","heading":"Headings","text":"fraught part data reporting understanding column actually means. often cryptic, bureaucratic names. may need go back source data sure actually understand .data doesn’t headings, ’s going first priority. effect, ’ll need build call data dictionary record layout one hasn’t provided. Many reporters create page dataset.","code":""},{"path":"xl-refresher.html","id":"unit-of-analysis","chapter":" 7 An Excel Refresher","heading":"Unit of analysis","text":"unit analysis refers items listed rows dataset. Ideally, every row unit analysis – person, inspection, city, example. Summaries separated blank row, moved different sheet. Think noun ’d use describe every row.","code":""},{"path":"xl-refresher.html","id":"row-numbers","chapter":" 7 An Excel Refresher","heading":"Row numbers","text":"data probably given sort natural sort order. Different computer systems sort differently – case-sensitive, others . may depend data created! order data may even depend column don’t . don’t something now, ’ll never able get back original order, meaning agency fact-checking.","code":""},{"path":"xl-refresher.html","id":"video-walkthrough","chapter":" 7 An Excel Refresher","heading":"7.3 Video walkthrough","text":"first steps, along adding ID row, shown . can follow along dataset.","code":""},{"path":"xl-refresher.html","id":"keyboard-shortcuts","chapter":" 7 An Excel Refresher","heading":"7.4 Keyboard shortcuts","text":"Mac users, ’s much easier use Excel override action function keys ’re program. Mac’s System Preferences, choose Keyboard, select box says, “Use F1, F2, etc. standard function keys.” (NOTE: MacBook Pro touch bar (circa 2017-2020 ), option may . Instead, go Shortcuts section keyboard options turn options Mission Control. ones interfere Excel.)’ve done , keyboard shortcuts work:practice getting around spreadsheet efficiently, since scrolling mouse selecting lesson frustration.","code":""},{"path":"xl-filter-sort.html","id":"xl-filter-sort","chapter":" 8 Sorting and filtering to find stories","heading":" 8 Sorting and filtering to find stories","text":"","code":""},{"path":"xl-filter-sort.html","id":"a-sorting-miracle","chapter":" 8 Sorting and filtering to find stories","heading":"8.1 A sorting miracle","text":"Ferguson, Mo., police killed Michael Brown 2014, advocates journalists began examining racial ethnic gap police departments communities served. New York Times found 7-year-old survey conducted Justice Department allowed compare data major cities standalone graphic published later year.newer data reflecting departments’ makeup 2012 released year later, Matt Apuzzo hoped show differences. didn’t. left trying find news data clearly public interest.matching demographics police departments cities, started sorting, filtering Googling. news outliers list? departments closely represented communities? ones unusually large gaps?\nChief William T. Riley III. Credit: Laura McDermott New York Times\nquickly stumbled telling anecdote frame story: Inkster, Mich. one least representative departments country, recently hired new police chief help mend department’s fraught relationship largely African-American community. come ? Selma, Ala., one representative police departments nation. Interviews chief, William T. Riley III, suggested one reason cities’ disparities: state federal money pay training new police officers.story, “Police Chiefs, Looking Diversity Forces, Face Structural Hurdles” helped explain persistent gap makeup police areas communities served.","code":""},{"path":"xl-filter-sort.html","id":"sorting-and-filtering-as-a-reporting-tool","chapter":" 8 Sorting and filtering to find stories","heading":"8.2 Sorting and filtering as a reporting tool","text":"Sorting filtering can:Narrow focus specific items want examine story.Show rows containing highest lowest values column. can news can errors problems data.Let answer quick “many?” questions, count rows match criteria. (next lesson, ’ll see pivot tables, group-queries, much powerful cases.)","code":""},{"path":"xl-filter-sort.html","id":"example-data","chapter":" 8 Sorting and filtering to find stories","heading":"8.3 Example data","text":"Data Washington Post use tutorialDocumentation Post’s github siteThe data several chapters Washington Post’s public data collection police shootings U.S. includes nation’s best guess fatal police shooting since 2015. couple caveats:excludes deadly police interactions shooting firarem suspect. strangulation, car crashes, Tasers without guns methods excluded.excludes deadly police interactions shooting firarem suspect. strangulation, car crashes, Tasers without guns methods excluded.based primarily news reports results public records requests often contains story told police. know many reports sugar-coated best, lies worst.based primarily news reports results public records requests often contains story told police. know many reports sugar-coated best, lies worst.Post says list fatal shootings, doesn’t say happens one person killed. 2019 shooting D’Angelo Brown & Megan Rivera West Memphis shown two rows7 data even though one event. row might considered shooting “victim”, “suspect” shooting “fatality” rather “shooting”.Post says list fatal shootings, doesn’t say happens one person killed. 2019 shooting D’Angelo Brown & Megan Rivera West Memphis shown two rows7 data even though one event. row might considered shooting “victim”, “suspect” shooting “fatality” rather “shooting”.original data download link https://github.com/washingtonpost/data-police-shootings/releases/download/v0.1/fatal-police-shootings-data.csv. screenshots tutorial may match exactly get data – included incomplete 2021 data, added column year.’s good example set us ’s used basis many stories, least one data type plan deal Excel, well documented Post’s github site.","code":""},{"path":"xl-filter-sort.html","id":"understanding-data-types","chapter":" 8 Sorting and filtering to find stories","heading":"8.4 Understanding data types","text":"open spreadsheet, first thing notice granularity. Unlike Census budget spreadsheets, list capturing specific characteristics fatality column type data top bottom. types :Text. Text “character” columns can come long short form. standardized (values can contain one small list values), ’re called “categorical”. ’re free-form, ’re might called “free text”. computer doesn’t know difference, . Post data examples . spreadsheets, text left-justified (move toward left cell line vertically beginning)Text. Text “character” columns can come long short form. standardized (values can contain one small list values), ’re called “categorical”. ’re free-form, ’re might called “free text”. computer doesn’t know difference, . Post data examples . spreadsheets, text left-justified (move toward left cell line vertically beginning)Numbers. pure numbers commas, dollar signs embellishments. Excel, ’ll see computing section, can formatted look like numbers care , underneath ’re just numbers. Adding column numbers word missing values just ignored Excel. trip languages. right-justified, last digit always lined vertically.Numbers. pure numbers commas, dollar signs embellishments. Excel, ’ll see computing section, can formatted look like numbers care , underneath ’re just numbers. Adding column numbers word missing values just ignored Excel. trip languages. right-justified, last digit always lined vertically.Logical: subset text. can take one two values – yes , true false. “maybe”.Logical: subset text. can take one two values – yes , true false. “maybe”.Date times: actual dates calendar, magical properties. Underneath, number. Excel, number number days since Jan. 1, 1900.8 can also time attached , Excel fraction day. means number 44,536.5 really Dec. 6, 2021 noon. Excel, use format tell spreadsheet want see date time, just way look dollar values commas symbols. (get spreadsheet lot dates 1/1/1900, means 0 column, sometimes fill-“don’t know.”)\n’s picture date shown variety formats.\n\ndate formats\n\n, underlying value – number left. Notice right-justified.\nmeans see “Friday, December 10”, computer sees 44540.87431. put dates order, won’t alphabetized Fridays shown together. Instead, ’ll arranged actual date time.\nalso means can compute 911 response times even crosses midnight, compute someone’s age today given date birth. Keeping actual calendar dates data give much power just words. (Excel uses 1st month stand-actual date know month year.)Date times: actual dates calendar, magical properties. Underneath, number. Excel, number number days since Jan. 1, 1900.8 can also time attached , Excel fraction day. means number 44,536.5 really Dec. 6, 2021 noon. Excel, use format tell spreadsheet want see date time, just way look dollar values commas symbols. (get spreadsheet lot dates 1/1/1900, means 0 column, sometimes fill-“don’t know.”)’s picture date shown variety formats.date formatsAll , underlying value – number left. Notice right-justified.means see “Friday, December 10”, computer sees 44540.87431. put dates order, won’t alphabetized Fridays shown together. Instead, ’ll arranged actual date time.also means can compute 911 response times even crosses midnight, compute someone’s age today given date birth. Keeping actual calendar dates data give much power just words. (Excel uses 1st month stand-actual date know month year.)","code":""},{"path":"xl-filter-sort.html","id":"working-with-excel-tables","chapter":" 8 Sorting and filtering to find stories","heading":"8.5 Working with Excel “tables”","text":"Excel lets put type data anywhere spreadsheet. bring little order chaos, allows turn data “table”, set sorting filtering. enforces data types , deals missing information smoothly. designed tabular data without empty rows columns, nothing else sheet.Put cursor somewhere table, use “Format table” button home screen. Check make sure “table headers” checked.","code":""},{"path":"xl-filter-sort.html","id":"sorting-rows","chapter":" 8 Sorting and filtering to find stories","heading":"8.5.1 Sorting rows","text":"Sorting means rearranging rows data table different order. reporters take conceptual shortcut call “sorting columns”. thinking get trouble – lets forget want keep rows tact changing order see . fact, languages ’s called “order ” “arrange” one columns – much clearer way think .Excel, look sort options Data tab top screen. case, sorting oldest newest gives list fatalities chronological order, including time day.sort data, put cursor one cells within data area, choose Data…Sort. Please don’t use ->Z Z->buttons!","code":""},{"path":"xl-filter-sort.html","id":"adding-fields-to-the-sort","chapter":" 8 Sorting and filtering to find stories","heading":"Adding fields to the sort","text":"Adding columns sort box tells Excel first one tied. example, sorting first state date gives list shows events state sequence:","code":""},{"path":"xl-filter-sort.html","id":"filtering","chapter":" 8 Sorting and filtering to find stories","heading":"8.5.2 Filtering","text":"Filtering means picking rows want see based criteria select column. Think casting fishing net – filters add, fewer fish caught.created table, also created little drop-arrows top row. can’t see , use CTL-HOME CTL-first column get back top. filter select adds conditions, narrowing net.find fatalities involved firearm Taser, use drop-menu manner_of_death select . (example naming column unexpected way. Usually, “manner” death relates circumstances accident, suicide homicide. ’s can’t count understanding column names without crib sheet data’s maker, called data dictionary record layout. Post’s crib sheet excellent!), notice bottom left briefly shows number rows matched filter, line numbers turn blue. rows don’t match filter hidden.method works small-ish simple-ish columns. column 10,000 different entries, names addresses, first 10,000 considered. caught stories someone fact-check using different method filtering. column lot distinct entries, use option says “Choose One”, use “Contains” option. Better yet, don’t use filtering counting things .Add filters narrow list cases even . example, New York Times ran series stories 2021 unarmed people shot police. One story fleeing car. ’s one way get preliminary list cases:Remove filter already .Turn filters turned .Choose “unarmed” armed “car” flee.(course, Times didn’t stop trying find cases teasing data. start. )","code":""},{"path":"xl-filter-sort.html","id":"different-kinds-of-filters","chapter":" 8 Sorting and filtering to find stories","heading":"Different kinds of filters","text":"several options filter box, depending data type column. numeric columns, can get top bottom lists. Dates automatically collapse years, months, days let choose efficiently.","code":""},{"path":"xl-filter-sort.html","id":"video-of-sorting-and-filtering-with-salaries","chapter":" 8 Sorting and filtering to find stories","heading":"8.6 Video of sorting and filtering with salaries","text":"video goes many details sorting filtering. Follow along using spreadsheet Phoenix city salaries. ’s different year, idea just .Note case, original order dataset alphabetical, except lower-case names came end. hard get back order spreadsheet didn’t leftmost column numbers indicated original order.","code":""},{"path":"xl-filter-sort.html","id":"faq","chapter":" 8 Sorting and filtering to find stories","heading":"8.7 FAQ","text":"","code":""},{"path":"xl-filter-sort.html","id":"how-do-i-turn-off-all-of-my-sort-and-filters","chapter":" 8 Sorting and filtering to find stories","heading":"How do I turn off all of my sort and filters","text":"data tab, chose “Clear” (funnel red “X”) remove filters sorts table.","code":""},{"path":"xl-filter-sort.html","id":"where-is-the-button-to-filter-columns","chapter":" 8 Sorting and filtering to find stories","heading":"Where is the button to filter columns?","text":"Sometimes don’t want see columns – many ’re getting confusing. column filter Excel. (’ll see filter, “Select”, columns dataset standard programming languages later.)Instead, can hide columns don’t want see. columns rows hidden, generally won’t copy new sheet.","code":""},{"path":"xl-filter-sort.html","id":"im-getting-weird-questions-and-alerts-about-sorting","chapter":" 8 Sorting and filtering to find stories","heading":"I’m getting weird questions and alerts about sorting","text":"Slow read alert. two common types alerts sorting, since potential wreck spreadsheet.first comes selected entire column, just hit button says “-Z” arrow. Excel won’t let ’s formatted table, ’s just normal spreadsheet. alert asks REALLY want sort column ’ve selected, separating meaning rest rows. answer . Always. Expand selection Excel wants default.filter dateThe comes numbers treated text. tricky question, properly tidied spreadsheet avoid time. type data column, answer question shouldn’t matter. , neither one give want.","code":""},{"path":"xl-filter-sort.html","id":"i-want-to-get-rid-of-my-data-table","chapter":" 8 Sorting and filtering to find stories","heading":"I want to get rid of my data table","text":"can revert plain old spreadsheet selecting cell within table, looking “Table” tab top screen. Choose option says “Convert Range”.","code":""},{"path":"xl-pivot.html","id":"xl-pivot","chapter":" 9 Grouping with pivot tables","heading":" 9 Grouping with pivot tables","text":"wake police shooting 2016, reporter Mitch Smith obtained list traffic stops St. Anthony Police Department Minnesota. writing story Philandro Castile’s death running time. wanted answer simple question: minority motorists likely stopped St. Anthony whites?Rob Gebeloff made quick pivot table answer question. night, Smith wrote:three small suburbs patrolled St. Anthony police, less 10 percent population black. data released city Tuesday showed far higher percentage people ticketed arrested St. Anthony officers African-American.\nSummarizing list items spreadsheet done using pivot tables. languages, ’s considered “aggregating” “grouping summarizing”. Think pivot tables grouping answering questions, “many?” “much?”. particularly powerful question also words “” “least” “”. examples:Zip Code crimes?month least total rainfall?much candidate raise last quarter?playing cards, many suit hand?average, Cronkite students taller shorter schools?","code":""},{"path":"xl-pivot.html","id":"confusing-grouping-with-sorting-or-arranging","chapter":" 9 Grouping with pivot tables","heading":"Confusing grouping with sorting or arranging","text":"Many reporters confuse summarization “sorting”. One reason express concept plain language: “want sort Skittles color”.data analysis, sorting grouping different things. Sorting involves shuffling table’s rows order based values column. languages, called arranging ordering, much clearer concepts. Grouping, pivot tables , path aggregating computing summary statistics count (number items), sum (much add ), average category. means “make piles compute statistics one.”","code":""},{"path":"xl-pivot.html","id":"when-to-use-filter-vs.-pivot-tables","chapter":" 9 Grouping with pivot tables","heading":"When to use filter vs. pivot tables","text":"Something trips beginners desire see details totals time, difficult sounds.filter used display selected items list. ’ll get see detail every column. convenience, Excel shows many items filtered list. ’s great want just look , get information . instance, list crimes ZIP code, might just want see list neighborhood – , exactly, ? happen? night morning? crimes happened blocks?pivot table used just want see summaries – ZIP code crime others? robberies common car theft Zip code, compare others?practice, ’ll go back forth summary detail. ’re important, just different.","code":""},{"path":"xl-pivot.html","id":"tutorial","chapter":" 9 Grouping with pivot tables","heading":"9.1 Tutorial","text":"continues Washington Post’s police shooting database, updated include descriptions ethnicities.Download new version","code":""},{"path":"xl-pivot.html","id":"tldr","chapter":" 9 Grouping with pivot tables","heading":"TL;DR","text":"’s video material:","code":""},{"path":"xl-pivot.html","id":"setting-up-the-pivot-table","chapter":" 9 Grouping with pivot tables","heading":"Setting up the pivot table","text":"Start cursor somewhere data , choose Insert, Pivot tableinsert menuIf goes well, look like data disappeared. didn’t – ’re just new page. ’s looks like:pivot menu","code":""},{"path":"xl-pivot.html","id":"counting-or-how-many","chapter":" 9 Grouping with pivot tables","heading":"Counting , or “how many”?","text":"section right gives outline . section left get filled make pivot table. want see number fatalities ethnicity, drag column “Rows” area, drag something ’s always filled Values area (state safe one data).","code":""},{"path":"xl-pivot.html","id":"percents-of-total","chapter":" 9 Grouping with pivot tables","heading":"Percents of total","text":"’s hard compare raw numbers unless ’re really small. Instead, ’d like know percent fatalities ethnicity. Right-click number pivot table, choose “Show data …” , choose “Percent Column total”.remove , right-click choose “Remove”Count state2”“.","code":""},{"path":"xl-pivot.html","id":"more-variables","chapter":" 9 Grouping with pivot tables","heading":"More variables","text":"Suppose ’d like see number fatalities year, years across top ethnicity sides. Drag year variable column area . Sorting can get hinky pivot tables, case work put largest number top. won’t work percentages – still sorts underlying number.","code":""},{"path":"xl-pivot.html","id":"even-more-variables","chapter":" 9 Grouping with pivot tables","heading":"Even more variables","text":"Say wanted see city’s total shootings year. one last year, one overall?actually really hard pivot table, cities names different states. means ’d need pivot table TWO columns side, one across top. ’s attempt getting :badsortThis fiddling formats, still can’t sort properly – city “Phoenix”, including Maryland Arizona, second-highest number shootings. can’t sort combination city state.choices Excel limited: Copy paste values pivot table new sheet sort , create new variable concatenating name city state one column.","code":""},{"path":"xl-pivot.html","id":"faq-1","chapter":" 9 Grouping with pivot tables","heading":"9.2 FAQ","text":"","code":""},{"path":"xl-pivot.html","id":"everything-disappeared","chapter":" 9 Grouping with pivot tables","heading":"Everything disappeared!","text":"select something outside pivot table left, menu right disappears. Select something pivot table area likely come back.","code":""},{"path":"xl-pivot.html","id":"i-have-too-many-columns","chapter":" 9 Grouping with pivot tables","heading":"I have too many columns","text":"want two sets statistics – say, number fatalities percent fatalities – across top, can get wide confusing quickly. One alternative change vertical rectangle dragging “Values” element columns rows right. (shows two calculations made.)","code":""},{"path":"xl-pivot.html","id":"i-want-to-sort-by-percents-not-numbers","chapter":" 9 Grouping with pivot tables","heading":"I want to sort by percents, not numbers","text":"can’t.","code":""},{"path":"xl-pivot.html","id":"things-arent-adding-up","chapter":" 9 Grouping with pivot tables","heading":"Things aren’t adding up","text":"super careful column use Count things – always filled (can’t blanks). Go filters find one doesnt (Blanks) bottom sure.","code":""},{"path":"xl-pivot.html","id":"its-a-crazy-number","chapter":" 9 Grouping with pivot tables","heading":"Its a crazy number!","text":"might dragged numeric column “Values” area. Check see says “Count” “Sum”. Change “Count” something else , unless wanted add column.","code":""},{"path":"xl-pivot.html","id":"this-is-so-frustrating---i-cant-get-what-i-want","chapter":" 9 Grouping with pivot tables","heading":"This is so frustrating - I can’t get what I want","text":"Right? ’s time go programming language!","code":""},{"path":"xl-formulas.html","id":"xl-formulas","chapter":" 10 Formulas in Excel","heading":" 10 Formulas in Excel","text":"quick review math Excel uses City Phoenix’s budgeted spending 2018 fiscal year, compared previous years.Download data file follow alongYou get habit creating unique identifiers, checking corners looking documentation ever start working spreadsheet. habits covered Replication data diary Excel refresher .","code":""},{"path":"xl-formulas.html","id":"formulas-in-spreadsheets","chapter":" 10 Formulas in Excel","heading":"10.1 Formulas in spreadsheets","text":"Whether use Excel Google sheets, remember every formula begins equals sign (=). Rather values want work formula, ’ll use references cells sheet.easiest formulas simple arithmetic: adding, subtracting, multiplying dividing two cells. ’ll just use simple operators :’s spreadsheet looks like editing simple arithmetic:formulaThe kind formula function. function command name, requires arguments – usually cell addresses range addresses act . Every programming language functions built many extensions, packages libraries, add even users find things want efficiently. begin using function way begin formula – = sign. three common functions create summary statistics numbers contained range addresses. range set cells defined corner cell address: top left bottom right.’ll usually use single column time.…“start” means first cell want include, finish means last cell. Use cell address first number want include , colon, cell address last number want include. can also select ’re editing formula.’s example adding rows list county:formula","code":""},{"path":"xl-formulas.html","id":"common-spreadsheet-arithmetic","chapter":" 10 Formulas in Excel","heading":"10.2 Common spreadsheet arithmetic","text":"budget document shows three years’ data: actual spending fiscal year ended 2016; spending estimated end fiscal year 2017; proposed spending fiscal year 2018. first page document shows amounts broad spending categories.may want widen columns format numbers start:","code":""},{"path":"xl-formulas.html","id":"check-the-governments-math-with-sum","chapter":" 10 Formulas in Excel","heading":"10.2.1 Check the government’s math with SUM","text":"first job make sure government provided us data adds . , ’ll SUM departments’ spending.add numbers 2016, enter following formula cell C11, just number provided government:Copy formula right. Notice formula changes addresses using move right – ’s adjusted refer current column.’s wrong? numbers budget 2018 don’t add . (Hint: look page called “notes” explanation.)","code":"  =SUM(C2:C8)\n  and hit the enter key"},{"path":"xl-formulas.html","id":"change-in-spending","chapter":" 10 Formulas in Excel","heading":"10.2.2 Change in spending","text":"increase decrease projected spending 2017 2018 just difference two values, beginning cell F3When copy , note references row also adjusted. line 3, ’s E3-D3, . Excel spreadsheets assume , time, want kinds adjustments made.","code":"  new-old, or  =E2-D2"},{"path":"xl-formulas.html","id":"percent-change","chapter":" 10 Formulas in Excel","heading":"10.2.3 Percent change","text":"can’t tell rate growth department calculate percent change one year another. Now already change, percent change easy. formula :new-old already column F, ’s left divide . grade school, also move decimal place two spots, since concept percent change “100”. Excel formats .Remember, ’s always (new-old)/old , big one minus little one. correctly, answer negative, meaning value fell.“% change”’re done, can format answer percentage get whole numbers.get used , ’s harm calculations step step. Excel won’t complain extra columns. can always hide .’s also worth comparing picture get looking raw numbers vs. percentages. case, budget public safety expected rise whopping $102 million, ’s smaller percentage increase , smaller departments.","code":"  ( new - old ) / old\n\n  .. or just scream \"NOO\""},{"path":"xl-formulas.html","id":"parts-of-a-whole-percent-of-total","chapter":" 10 Formulas in Excel","heading":"10.2.4 Parts of a whole: percent of total","text":"’d also like know portion total spending eaten department. , need percent total.case, let’s use total government gave us. practice, ’d decide figures didn’t match provided officials. can’t assume total wrong – missing category, mistake one line items.formula percent total :, Excel multiply 100, move decimal place format.problem: either type row, get something like try copy:Wrong wayExcel done magic, adjusting location numerator denominator copied. don’t type formula one one, though. Instead, ’ll use anchors, known spreadsheets “absolute references”. Think dollar sign anchor stickpin, holding location part formula. put stickpin letter formula, holds column place. put number, holds row place. put places, holds cell place.new formula percent total :E2/E$10","code":"  category / total"},{"path":"xl-formulas.html","id":"while-were-at-it-two-kinds-of-averages","chapter":" 10 Formulas in Excel","heading":"10.3 While we’re at it: two kinds of averages","text":"Although doesn’t make lot sense context, ’ll go ahead calculate average mean size department, calculate median size.Simple average, meanA simple average, also known mean, skewed toward high low values. formula isBut Excel, need word AVERAGE:MedianIn Excel, can get median list numbers just using formula, MEDIAN()","code":"    sum of pieces / # of pieces that were summed    =AVERAGE(C2:C9)  = MEDIAN(C2:C9)"},{"path":"xl-formulas.html","id":"the-final-spreadsheet","chapter":" 10 Formulas in Excel","heading":"10.4 The final spreadsheet","text":"final worksheetDoing simple calclutions like data provided government lets ask better questions get interview, may even convince officials talk . ’s big difference asking tell budget numbers , asking explain specific results!","code":""},{"path":"xl-formulas.html","id":"faqs","chapter":" 10 Formulas in Excel","heading":"10.5 FAQs","text":"","code":""},{"path":"xl-formulas.html","id":"excel-wont-let-me-copy-my-formula","chapter":" 10 Formulas in Excel","heading":"Excel won’t let me copy my formula","text":"Make sure formula locked either hitting “Enter” “Escape”. common problem ’re habit double-clicking instead selecting cell. lot things can’t Excel thinks ’re still entering information.","code":""},{"path":"xl-formulas.html","id":"should-i-use-average-or-median","chapter":" 10 Formulas in Excel","heading":"Should I use average or median?","text":"depends. Averages easier explain can misleading. Usually, ’re different, median better representation typical person, city department. Averages cases like totals.","code":""},{"path":"xl-formulas.html","id":"my-percents-are-small-numbers-with-decimal-points","chapter":" 10 Formulas in Excel","heading":"My percents are small numbers with decimal points","text":"Use format % button move decimal point two places insert percentage symbol.","code":""},{"path":"xl-formulas.html","id":"mac-users-theres-some-kind-of-weird-image-on-top-of-my-spreadsheet.-or-some-other-very-weird-hiccup.","chapter":" 10 Formulas in Excel","heading":"Mac Users: There’s some kind of weird image on top of my spreadsheet. Or some other very weird hiccup.","text":"idea , happens. Save spreadsheet, close re-open. go away.","code":""},{"path":"xl-practice-noc.html","id":"xl-practice-noc","chapter":" 11 Practice exercise","heading":" 11 Practice exercise","text":"exercise helps understand difference filtering grouping, , Excel terms, filtering pivot tables. general, ’ll use filtering look details cases based criteria. stories. ’ll use pivot tables create aggregated data – count, sum, average, like.real world, reporters move back forth two techniques. ’ll go back filter cases find something interesting aggregation, create sums counts think see pattern cases.’s pretty abstract concept – become concrete go motions exercise.","code":""},{"path":"xl-practice-noc.html","id":"data-source","chapter":" 11 Practice exercise","heading":"11.1 Data source","text":"Data downloadCity link Notice claims form instructions claimantsBackgrounder data Helen WiefferingThis dataset includes “Notice Claims” city Phoenix 2010 2020. claims refer damages people say suffered problem government ranging slip--fall city building use force police. obtained Helen Wieffering just end 2020 fiscal year, many claims year unresolved. Although names claimants public record, included data compiled . Also missing court case number cases went court.Make sure look “data_dictionary” sheet definitions column start.tutorial, ’m providing equivalent data diary – follow instructions, come answers . keep diary alongside work.","code":""},{"path":"xl-practice-noc.html","id":"sort-filter","chapter":" 11 Practice exercise","heading":"11.2 Sort / filter","text":"almost always go Excel preferences, “Tables & Filters” turn check says “Use table names formulas”. Sometimes sticks, sometimes doesn’t. idea .Arrange (sort) claims using ID column called “orig_order”.orig_order (id) value largest PAID claim database (combined personal injury property) ?orig_order (id) value largest PAID claim database (combined personal injury property) ?department cause associated payment?department cause associated payment?long take resolve ?long take resolve ?Describe recent claim made police related law enforcement activities, regardless whether ’s resolved.Describe recent claim made police related law enforcement activities, regardless whether ’s resolved.Filter pd_total greater zero, type called “Shootings”. Look lower left corner record many claims city shootings paid money?Filter pd_total greater zero, type called “Shootings”. Look lower left corner record many claims city shootings paid money?Find one thing might want research make interesting one-story. distinct events ’d like know , trends patterns. requires calculation, just news judgment.Find one thing might want research make interesting one-story. distinct events ’d like know , trends patterns. requires calculation, just news judgment.","code":""},{"path":"xl-practice-noc.html","id":"pivot-table-motivation","chapter":" 11 Practice exercise","heading":"11.3 Pivot table motivation","text":"questions department city:highest lowest payout made?many claims made, many paid ?total amount paid average per claim?","code":""},{"path":"xl-practice-noc.html","id":"using-filters-to-answer-big-questions","chapter":" 11 Practice exercise","heading":"11.3.1 Using filters to answer big questions","text":"’s one way , using filters:Remove filter.Filter department. ’ll start Aviation, first one list.Select entire table, including headings. Copy new sheet. Don’t surprised miss headings columns first couple times .Rename new sheet “Aviation” double-clicking tab.Make sure ’re top left corner screen (use CTL-HOME key ’re real keyboard, CTL-CTL-Left ’re .) Freeze column headings can scroll bottom still see ’re looking (View, Freeze top Row)Note number rows copied subtract one. Record number claims made.Make sure start top sheet, filter “Unresolved” claims un-selecting . Don’t touch anything note number records found bottom left (11852 case). ’s number resolved claims. Now filter column, uncheck “payment” note number claims. 5718.Go bottom worksheet. Skip row, sum column. Repeat , replacing =sum() =max(), =min() , =average().Write answers piece paper.Don’t surprised wrong times, . now answer Aviation department.Try imagine ’d wanted know average minimum payout just settled .","code":""},{"path":"xl-practice-noc.html","id":"rinse-repeat","chapter":" 11 Practice exercise","heading":"11.4 Rinse, repeat","text":"Now repeat entire process least two departments interest .","code":""},{"path":"xl-practice-noc.html","id":"pivot-table","chapter":" 11 Practice exercise","heading":"11.5 Pivot table","text":"point, thoroughly sick things . purpose pivot table let compute aggregate, summary, statistics category set categories. can compute average, minimum , maximum sum values, can count number rows column. (Excel ’re always . ’s always true programs depending handle missing information.)","code":""},{"path":"xl-practice-noc.html","id":"create-the-pivot-table","chapter":" 11 Practice exercise","heading":"11.5.1 Create the pivot table","text":"1, Create empty pivot table data table.Look “Options” tab toward top left, turn “Generate GetPivotData”. tab, “Options”, set error values “N/”, set Empty cells zero (meaning nothing category.)Look “Options” tab toward top left, turn “Generate GetPivotData”. tab, “Options”, set error values “N/”, set Empty cells zero (meaning nothing category.)Drag “Department” row areaDrag “Department” row areaDrag type_case filter areaDrag type_case filter areaDrag “department” Values area make sure says “Count Department”.Drag “department” Values area make sure says “Count Department”.Drag pd_total Values area, make sure says “Sum pd_total”. doesn’t, change pivot table calculation “Sum”. Repeat three times, “average”, “min” “max”.Drag pd_total Values area, make sure says “Sum pd_total”. doesn’t, change pivot table calculation “Sum”. Repeat three times, “average”, “min” “max”.Try playing placement items pivot table get intuition . can drag column “Filter” area can pick just cases analysis. works way filter original sheet.","code":""},{"path":"xl-practice-noc.html","id":"practice-questions","chapter":" 11 Practice exercise","heading":"11.5.2 Practice questions","text":"Now answer following questions:department claims made FY 2015-16 2019-20?department claims made FY 2015-16 2019-20?much city pay time complaints Streets. department pay ?much city pay time complaints Streets. department pay ?average, much city pay vs. amount requested? Include complaints resolved – still underway reopened.average, much city pay vs. amount requested? Include complaints resolved – still underway reopened.","code":""},{"path":"r-intro.html","id":"r-intro","chapter":"Introduction","heading":"Introduction","text":"following chapters lay fundamentals data journalism R. ’ll adding chapters want class. format chapters varies little rest book. section begin key concepts skills included, hope make easier find need .chapters :Getting started RGetting started RR Markdown - lazy person’s data diaryR Markdown - lazy person’s data diaryGetting data R - short introduction get data , looks like.Getting data R - short introduction get data , looks like.overview Tidyverse verbs - Continuing basic review Billboard top 100 hit database.overview Tidyverse verbs - Continuing basic review Billboard top 100 hit database.following chapters refer PPP data, documented AppendixSelect, filter, arrangeSelect, filter, arrangeAggregating groupsAggregating groupsNew old data mutateNew old data mutateMatchmaking joinsMatchmaking joinsR recipesR recipesIn set chapters R, following colors mean :Blue background means ’s extra information ’ll probably need.Yellow background means “Warning!” Something bad happen.green background specific instructions follow class.","code":""},{"path":"r-start.html","id":"r-start","chapter":" 12 Getting started with R and RStudio","heading":" 12 Getting started with R and RStudio","text":"\nchapter\nInstall R , RStudioThe power packages, especially tidyverseSet defaults reporting dataIssue first R commandsWork projectsRelax!probably first introduction coding. Don’t worried. effort, much reporters coding can learned weeks.Like reporters, learned coding know (isn’t lot) wanted get story done. class, trying become programmer social scientist. ’re working stories.saw pivot table lesson spreadsheets limits. couldn’t easily get city police shootings put city state pivot table. median missing pivot tables entirely. ’s easy lose track . ’s reason learn coding – something want know isn’t easy get ways.programming languages one thing common: write instructions, called algorithms, program executes statements order. means can complicated work computer programming point--click parts Excel. can also scale – can repeat instructions millions times, tweak little, re-run program without messing anything else . computer won’t mind. Really.Writing code can also self-documenting. can largely eliminate painstaking Excel data diaries replace documents explain work go. ’ll still need record information interviews decisions, ’ll longer write every mouse click.’re nervous getting started programming, take look Appendix: gentle introduction programming Jesse Lecy’s “Learning Learn”, says:first programming language, get frustrated times. Take step back remember semester Spanish can operate level three-year old. know one verb tense, dozen verbs, several hundred words. many emotions can’t express new language!ask get frustrated, walk away computer little . Get help , break, don’t know might next make progress. #dj-sos Slack one option. Use . ’re stuck, ’s quite likely others well. don’t let get . Lecy says, morale limited commodity.","code":""},{"path":"r-start.html","id":"r-or-python","chapter":" 12 Getting started with R and RStudio","heading":"R or Python?","text":"ask data scientist technologist language learn first, ’ll start heated debate often advocates R, Python, Javascript , SQL, Julia others. Ask question data journalist answer : “Choose one free colleagues use can get help.” purposes, really doesn’t matter – standard languages .rule make try stick first language little deciding want learn different one. like trying learn Portuguese Spanish time, know neither one begin . ’re related, different.Employers hire data reporters usually don’t care programming language know ’s relatively easy learn another ’re comfortable concepts good data journalism habits. cases, Associated Press, R preferred. others, like Los Angeles Times, ’s little easier work team work Python. employers just happy reasonably self-sufficient either one.chose R find little easier use trying puzzle something step step, particularly good working weird varied forms data thrown us. ’s really just matter taste comfort.","code":""},{"path":"r-start.html","id":"install-r-and-rstudio","chapter":" 12 Getting started with R and RStudio","heading":"12.1 Install R and RStudio","text":"R programming language , installed firstRStudio way ’ll interact programming language. Install second.Packages sets programs written volunteers data scientists perform specialized jobs easily working “base” R language. package must installed computer, invoked use program. TFollow interactive tutorial installing R, RStudio tidyverse computer:https://learnr-examples.shinyapps.io/ex-setup-r/#section-welcome .two differences video today:tidyverse take much longer finish installation. lot often looks like ’s stalled.two versions R Mac users: traditional one one new M1 chip latest machines. Choose one matches machine checking apple upper left looking “Mac”. say “Apple M1” processor .","code":""},{"path":"r-start.html","id":"cronkite-students-r-and-rstudio-in-labs","chapter":" 12 Getting started with R and RStudio","heading":"Cronkite students: R and RStudio in labs","text":"update let know labs Cronkite software need. using lab, put folders portable hard drive.","code":""},{"path":"r-start.html","id":"mac-users---command-line-tools-error","chapter":" 12 Getting started with R and RStudio","heading":"Mac users - “Command line tools” error","text":"get error installation “command line tools”, ask help . ’s simple fix. RStudio actually work without , ’ll get lot annoying warnings.","code":""},{"path":"r-start.html","id":"unlocking-packages-and-the-tidyverse","chapter":" 12 Getting started with R and RStudio","heading":"12.2 Unlocking packages and the tidyverse","text":"real power R comes packages. Packages bundles programs others found useful extend base R language. R almost useless without . 10,000 packages available R, special job.followed along tutorial, last thing install “package” called tidyverse. Almost everything now depends step.materials see related programming R reference tidyverse. One problem lot packages, often written hobbyists, ’re consistent. One might use comma another uses dots, example. One might expect data come “spreadsheet” form studied earlier book, others might expect come “database” form.tidyverse packages whole set packages designed work together smoothly similar grammar syntax. ’s particularly useful kind work reporters – importing, cleaning analyzing data get others can’t control ’s structured. works best granular data arrives database form rather tabular statistics come aggregated spreadsheets, methods convert across forms.many reporters (included), R difficult learn tidyverse came around. ’ll working almost exclusively within tidyverse course. strongly suggest Google help, put word “tidyverse” somewhere query. Otherwise, may get answers look inscrutable unfamiliar.tidyverse brainchild Hadley Wickham, statistician New Zealand, famously identified tidy data principles ’ve implicitly followed semester. ’s currently chief data scientist RStudio Houston.","code":""},{"path":"r-start.html","id":"set-up-rstudio-for-data-reporting","chapter":" 12 Getting started with R and RStudio","heading":"12.3 Set up RStudio for data reporting","text":"Staying organized one challenges data reporting – ’re constantly re-downloading re-jiggering analysis ’s easy get material separated. setup helps ensure always know find work can move another comptuer seamlessly.start, decide folder ’ll use store R work. Within Documents folder, created sub-folder called data-class. make guide little easier thing, especially ’re familiar using directories folders.Start RStudio ’ve made folder. Make sure start RStudio (R language) searching Spotlight Search bar Windows. ’s look like:Get Preferences (RStudio menu item Mac) make sure looks like General tab:see (’ve turned options restore anything start RStudio set default working directory browsing one just created.)R Markdown options, make sure box called “Execute setup chunk automatically” checked.","code":""},{"path":"r-start.html","id":"the-screen","chapter":" 12 Getting started with R and RStudio","heading":"12.4 The screen","text":"screen probably looks like:console","code":""},{"path":"r-start.html","id":"the-console","chapter":" 12 Getting started with R and RStudio","heading":"The Console","text":"Console can type commands interact directly programming language. Think powerful calculator first. One reason use install packages.followed installation demo, ’ve already used console install one package. (Go back part now skipped .) Install useful course.Copy commands one time, paste Console, hit Return/Enter execute command.package names quotes. ’ll installing packages later guide, now everything need.","code":"   install.packages(\"janitor\")\n   install.packages(\"rmarkdown\")\n   install.packages(\"skimr\")\n   install.packages(\"swirl\")"},{"path":"r-start.html","id":"files-tab","chapter":" 12 Getting started with R and RStudio","heading":"Files tab","text":"won’t using many tabs lower right, Files tab can help ’re trouble navigating work. button, can choose “Go working directory”, since ’s R thinks ’ve parked work. can confusing R, ’ll working “projects” bundle work one place.","code":""},{"path":"r-start.html","id":"environment","chapter":" 12 Getting started with R and RStudio","heading":"Environment","text":"upper right screen Environment, active variables live. variable named thing. might word, list words numbers, data frame (spreadsheet). Anything want use listed environment can reference . make sense later.","code":""},{"path":"r-start.html","id":"typing-into-the-console","chapter":" 12 Getting started with R and RStudio","heading":"Typing into the console","text":"type : 5+5 > prompt, ’ll get back press Return/Enter:\n[1] 10When type : \"Sarah\" (quotes) > prompt, ’ll get back:\n[1] \"Sarah\"create new variable, ’ll use assignment operator <- (two characters : less sign hyphen). create variable called my_name (lower case, spaces). Notice appears Environment created. can print typing name variable instead letters name quotes:console remembers commands, type one time forget leave day. ’s ’re going work programs called R Markdown documents time.","code":""},{"path":"r-start.html","id":"work-in-projects","chapter":" 12 Getting started with R and RStudio","heading":"12.5 Work in projects","text":"One things trips new users R ’s hard tell program find things computer. “working directory” can confusing.’ll working entirely projects course. Projects keep everything needed together can run almost machine. Create new project hitting second green + sign top screen, create new directory within one ’re working (can also find File menu item):","code":""},{"path":"r-start.html","id":"optional-take-a-tutorial","chapter":" 12 Getting started with R and RStudio","heading":"12.6 Optional: Take a tutorial","text":"One packages installed earler called swirl. Invoke now typing library(swirl) Console. can follow instructions . Don’t bother going beyond first chapter – ’s geared kinds jobs .\nRelax Silwia Bartyzel via Unsplash\n","code":""},{"path":"r-start.html","id":"relax","chapter":" 12 Getting started with R and RStudio","heading":"12.7 Relax!","text":"’re set ’re ready start programming. Congratulate - everything new, nothing intuitive screen intimidating. ’ve come long way.","code":""},{"path":"r-start.html","id":"other-resources","chapter":" 12 Getting started with R and RStudio","heading":"12.8 Other resources","text":"Sharon Machlis’ Practical R Mass Communications Journalism intro R RStudio chapters 2.3 2.6Ben Stenhaug created fast-paced video introducing RStudio interface. Don’t worry much means just yet – just see can get used different parts screen.","code":""},{"path":"r-markdown.html","id":"r-markdown","chapter":" 13 R Markdown","heading":" 13 R Markdown","text":"\nchapter\nCreate new markdown document projectWrite narrative sections including headlines, subheads formatting using R MarkdownSet “front matter” YAML pageInsert first code chunk run R code!Knit document - can often want see drafts.Optional: download new skeleton page can use class formatting options pre-set.Creating documents R Markdown lets ditch tiresome data diaries combine documentation, code results one, reproducible page. ’s variant markdown language invented easy way early contributors Wikipedia author documents translate web.write document around chunks R code, integrates analysis writing. (R Markdown also designed output work formats, like actual printed book slides.) news organizations much internal work using R Markdown documents code.Shannon Pileggi created series gifs illustrate nuances RStudio interface – look illustrations customizing windows troubleshooting documents move forward. lot R Markdown documents.","code":""},{"path":"r-markdown.html","id":"your-first-markdown","chapter":" 13 R Markdown","heading":"13.1 Your first markdown","text":"Open project created last chapter. , use File menu choose “New File”, press leftmost green plus sign top screen, choose “R Markdown.” ’ll prompted headline author, create new, unsaved filed. Save yourlastname-firstmarkdown.Rmd. delete everything last set three dashes. Create Markdown document following along (Specific steps walkthrough)","code":""},{"path":"r-markdown.html","id":"the-anatomy-of-a-document","chapter":" 13 R Markdown","heading":"13.2 The anatomy of a document","text":"four parts R Markdown document:“front matter”, YAML.Narrative document features including headlines, subheads, images elements ’d normally see web page. don’t write HTML - Markdown writes .Code chunks – R computer code.results code chunks - get back execute code, including charts, graphs, tables maps.","code":""},{"path":"r-markdown.html","id":"markdown-punctuation-and-symbols","chapter":" 13 R Markdown","heading":"Markdown punctuation and symbols","text":"narrative part follows basic rules. markdown cheatsheet Adam Pritchard goes , common :","code":""},{"path":"r-markdown.html","id":"front-matter-yaml-at-the-top","chapter":" 13 R Markdown","heading":"Front matter / YAML at the top","text":"way R knows process page reading top file looking section three dashes. called YAML, front matter, ’s extremely picky.default YAML basic – options. might want set skeleton document r-projects folder can use starting point time. YAML can copy put top document make look little polished.Another way customize use Output Options gear.","code":"---\ntitle: \"A title for your page\"\nautor: \"Your name\"\ndate:  \"A date\"\noutput: \n  html_document: \n    theme: cerulean\n    toc: true\n    toc_float: true\n    df_print: paged\n    fig_width: 5\n    code_download: true\n---"},{"path":"r-markdown.html","id":"knitting-your-document","chapter":" 13 R Markdown","heading":"13.3 Knitting your document","text":"Look top screen, ’ll see knitting needle word, “Knit”. Pressing button convert markdown finished document.’s looks pre-knitted knitting:several reasons might work:haven’t saved document yet.error top YAML section. Just copy one works try .error R code. (’ll see skip chunk error later .)Everything’s smushed together. Give document room breathe , inserting blank lines elements.","code":""},{"path":"r-markdown.html","id":"including-r-code-and-its-results","chapter":" 13 R Markdown","heading":"13.4 Including R code and its results","text":"far, just simple document. doesn’t contain R code. add code, insert “code chunk”. can add pressing green “+C” button top document, pressing Option/Alt-Ctl-. Write code gray area triple-backtic symbols. Run code chunk pressing arrow button within , pressing Cmd/Ctl-Shft-Enter (either Cmd Ctl)following code chunk creates new variable called my_variable, another called my_name, prints value stored my_name one.might seem like much, think helps analysis. can write notes right work. don’t copy paste information one place another, share --date spreadsheets teammates.","code":"\n#this is a comment - it won't be run\n\nmy_variable <- 13\nmy_name <- \"Sarah\"\n\nmy_name## [1] \"Sarah\""},{"path":"r-markdown.html","id":"more-markdown-details","chapter":" 13 R Markdown","heading":"13.5 More markdown details","text":"Take minute now explore toolbar document. Now know lot means make sense.’re working, might knit every time significant amount work document make sure ’s coming way expect. ’s harm get used seeing markdown code looks ’s finished document.","code":""},{"path":"r-markdown.html","id":"r-starts-from-scratch","chapter":" 13 R Markdown","heading":"R starts from scratch","text":"close computer, run program ’ve written start - doesn’t remember left . includes loading libraries data. actually good – ensures project reproducible.long programs working complicated datasets, might split analysis several programs, saving interim versions data go along.Every time knit document, pretends ’ve also started scratch - may see variables environment, computer work entirely new, empty “session”, starts top.Make sure run every part document every time re-open . easiest way get habit running chunks soon start work session using menu using Alt-Cmd-R, Run menu:runall","code":""},{"path":"r-markdown.html","id":"a-replacement-skeleton-for-you","chapter":" 13 R Markdown","heading":"A replacement skeleton for you","text":"skeleton R gives default stripped version YAML. replacement copy can copy paste instead. options make output look little polished. code_download set true means don’t need send anyone raw Markdown document – final version embedded . Make sure replace everything, including three dashes top bottom. colons indentations important.","code":"---\ntitle: \"A title for your page\"\nauthor: \"Your name\"\ndate:  \"A date in quotes\"\noutput: \n  html_document: \n    theme: cerulean\n    toc: true\n    df_print: paged\n    code_download: true\n---\n"},{"path":"r-markdown.html","id":"resources","chapter":" 13 R Markdown","heading":"Resources","text":"“Data driven docs” walkthrough DS4PS (, Data Science Public Sector), Jesse Lecy.RStudio quick tour R Markdown goes even need. goes little fast.","code":""},{"path":"r-markdown.html","id":"walkthrough","chapter":" 13 R Markdown","heading":"13.6 Walkthrough","text":"Make sure already installed rmarkdown package going .Create new R Markdown document following elements:Front matter name, date title page.heading introducing subtopicWithin heading, list three things topic love, bulleted list.Another headingAn image like (’ll save project.)Another headingA code chunk, create variable assign value.knit document compare sections.one created can use guide, implore copy – just use guide questions something happening don’t expect. rendered version want see translates HTML page: https://rpubs.com/cohensh/firstmarkdown","code":""},{"path":"r-data-import.html","id":"r-data-import","chapter":" 14 Getting and saving data","heading":" 14 Getting and saving data","text":"\nchapter\nInvoking standard packagesReading data Excel text file.Looking dataIntroducing “pipe” (%>%)postscript different types data filesBut start:","code":""},{"path":"r-data-import.html","id":"the-data-frame","chapter":" 14 Getting and saving data","heading":"14.1 The data frame","text":"data frame R variable9 can used re-used like . difference contains columns rows, just like spreadsheet. follow rules ’ve seen good, tidy Excel files:column contains one kind information – race, sex, address, etc.row contains one example columns, unit analysis. words, refer noun.can use data frame, import data file hard drive web, load data saved one several R-specific formats. time, data originally come comma-separated text file (.csv), Excel format (.xlsx). work , ’ll save R data file ’ve checked mistakes proper treatment columns.","code":""},{"path":"r-data-import.html","id":"example-data-1","chapter":" 14 Getting and saving data","heading":"14.1.1 Example data","text":"Christian McDonald, data journalism professor University Texas, compiled list Billboard’s Hot 100 hits back 1950s, made available Github account. ’s great example dataset lot rows, columns, different data types. ’s also easy understand. also made tutorials using data, generously offered use.’ll using data McDonald’s Github repository https://github.com/utdata/rwd-billboard-data/blob/main/data-/hot100_archive.csv?raw=trueHere describes :Billboard Hot 100 singles charts music industry’s standard record chart since inception 8/2/1958. rankings, published Billboard Media, currently based sales (physical digital), radio play, online streaming. methods policies chart changed time.data use combination data collected Kaggle user Dhruvil Dave, along scraping merging Prof. McDonald. stored code sharing website Github safe keeping.data dictionary , sometimes called record layout go along data. look , create, something like every data source use.’s good example us, since nuances data, contains mix words, numbers dates. won’t spend lot time studying understand .Notice upper-casing, spaces period column names. important later .","code":""},{"path":"r-data-import.html","id":"starting-a-new-r-program","chapter":" 14 Getting and saving data","heading":"14.2 Starting a new R program","text":"Every time start new R markdown document, need load packages intend use editing first code chunk default document, called “setup chunk”.delete boilerplate first code chunk.following along, assumed created opened project hold new programs data. now haven’t. Mine project called cohen-rlessons, inside class folder.)Create new markdown document (green plus sign upper left screen, File menu) , edit setup chunk shown . want, copy paste YAML last lesson replace default options .Save document 01-top100.Rmd . ’m using “01” prefix come back six months road, know program run first!setup chunkI’ve created template can save project exercise , encourage use guide rather copy-paste just edit . get habit creating readable markdowns document , , work.","code":""},{"path":"r-data-import.html","id":"importing-the-hot-100-data-file","chapter":" 14 Getting and saving data","heading":"14.2.1 Importing the Hot 100 data file","text":"read CSV10 file, R guess column – text (words, called “character” “chr” R), numbers (“dbl” “int” “double-precision” “integer”), date/time (couple different possibilities ’ll get later ). 11Data frames easily managed keeping style rules mind:Column names lower-case, special characters. Separate words column name underscore.column containing numerals don’t plan use math computation stored character type, number.12We often tweak data import make sure things, convert data types ’ve imported. save data R data frame, never .Create new code chunk read top 100 dataset variable like :’s code :Creates new variable name, called top100, pour data .Uses function tidyverse13 called read_csv, toAccess comma-separated text data held McDonald’s github repository.run chunk pressing green arrow within code chunk, press Shift-CMD-Enter , output look like :R found:330,787 rows (records, observations).Seven columns ,Three thinks character types, four thinks numbers.named variables using first row file.Pro tip: ’re sure data types column, use option import text, character, columns. can fix one one. Text (almost) never problem. option looks like :read_csv( name_of_file, col_types=c(.default=\"c\") )’s also telling get information. Sometimes, say “Use problems() …”, meaning something gone wrong check . ’ll see fix column types time import later course.want import Excel file, use slightly different library. load readxl library setup chunk, use read_excel() function access data. works similarly, ’s slightly different method.ways look data. First, can look top bottom using head() tail() commands:, can look list columns along types examples top file using glimpse() function, case listing name data frame want look within parentheses.^ [may noticed pattern already: Function names followed parentheses, leave room specifications, called arguments. Sometimes don’t need , ’re blank], might notice names columns back-ticks around . ’s don’t follow rules column names – lower case, spaces special characters.can also explore dataset clicking name Environment tab. good idea exploring, can’t replicated audience. suffers point--click problems ran using spreadsheets. plan use results exploration, ’ll explicitly program markdown.","code":"\ntop100 <- \n  read_csv(\"https://github.com/utdata/rwd-billboard-data/blob/main/data-out/hot100_archive.csv?raw=true\")## Rows: 330787 Columns: 7\n## ── Column specification ────────────────────────────────────────────────────────\n## Delimiter: \",\"\n## chr (3): CHART WEEK, SONG, PERFORMER\n## dbl (4): THIS WEEK, LAST WEEK, PEAK POS., WKS ON CHART\n## \n## ℹ Use `spec()` to retrieve the full column specification for this data.\n## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\nhead(top100)## Rows: 330,787\n## Columns: 7\n## $ `CHART WEEK`   <chr> \"11-6-2021\", \"11-6-2021\", \"11-6-2021\", \"11-6-2021\", \"11…\n## $ `THIS WEEK`    <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, …\n## $ SONG           <chr> \"Easy On Me\", \"Stay\", \"Industry Baby\", \"Fancy Like\", \"B…\n## $ PERFORMER      <chr> \"Adele\", \"The Kid LAROI & Justin Bieber\", \"Lil Nas X & …\n## $ `LAST WEEK`    <dbl> 1, 2, 3, 4, 5, 6, 9, 7, 11, 8, 12, 10, 14, 15, 21, 16, …\n## $ `PEAK POS.`    <dbl> 1, 1, 1, 3, 2, 1, 7, 1, 9, 2, 9, 3, 12, 14, 15, 11, 1, …\n## $ `WKS ON CHART` <dbl> 3, 16, 14, 19, 18, 8, 7, 24, 20, 56, 17, 29, 41, 18, 8,…"},{"path":"r-data-import.html","id":"introducing-the-pipe","chapter":" 14 Getting and saving data","heading":"14.3 Introducing the pipe","text":"’ll seeing lot R code format:little symbol, %>% called “pipe”. means “keep going next command”. matches way think algorithms programming appendix book.’re going use two libraries loaded top – lubridate janitor \nfix two problems data, showing pipe .Add code chunk ’ll edit clean column names types now.try build code chunks one step time. show separate ones, practice keep editing one works get want.Using pipe can help make code easier read write separating step command. example,\nglimpse(top100) thing top100 %>% glimpse(). second version tells R, “Start top100 data frame glimpse . Using small-ish datasets like , try separate much reasonable separate steps can troubleshoot problems one line time.shows us function clean_names() converts column names preferred style. Notice didn’t pour answer new variable name, just prints answer screen.works expected, can finish cleaning data.process uses pipe tack new statements one complete, introduces verbs tidyverse, ’ll see action next chapter.two important verbs ’ll use:select, picks rearranges columns (kind like filtering vertically)mutate, lets create new columns old ones. (like inserting column Excel entering formula)code chunk also uses function called mdy(), stands “month-day-year”, turn tells R character chart_week column starts format, opposed year-month-day something else.14Your final code chunk look like . Try avoid copying pasting, instead build one step time, running chunk time add phrase.(usually add variable name top last save data result later use, ’m sure everything worked printing screen.)Save cleaned data tidyverse’s rds format code chunk like :","code":"  data_set_name %>%\n     verb ( nouns ) %>%\n     verb ( nouns ) %>%\n     etc...\ntop100 %>%\n  clean_names()  %>%\n  glimpse()## Rows: 330,787\n## Columns: 7\n## $ chart_week   <chr> \"11-6-2021\", \"11-6-2021\", \"11-6-2021\", \"11-6-2021\", \"11-6…\n## $ this_week    <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17…\n## $ song         <chr> \"Easy On Me\", \"Stay\", \"Industry Baby\", \"Fancy Like\", \"Bad…\n## $ performer    <chr> \"Adele\", \"The Kid LAROI & Justin Bieber\", \"Lil Nas X & Ja…\n## $ last_week    <dbl> 1, 2, 3, 4, 5, 6, 9, 7, 11, 8, 12, 10, 14, 15, 21, 16, 17…\n## $ peak_pos     <dbl> 1, 1, 1, 3, 2, 1, 7, 1, 9, 2, 9, 3, 12, 14, 15, 11, 1, 15…\n## $ wks_on_chart <dbl> 3, 16, 14, 19, 18, 8, 7, 24, 20, 56, 17, 29, 41, 18, 8, 1…\ntop100_clean <- \n  top100 %>%\n  clean_names () %>%\n  mutate ( chart_date = mdy(chart_week)) %>%\n  select ( chart_date, song, performer, this_week, last_week,\n           wks_on_chart, peak_pos)\nsaveRDS(top100_clean, file=\"hit100.RDS\")\n"},{"path":"r-data-import.html","id":"what-we-did","chapter":" 14 Getting and saving data","heading":"14.4 What we did","text":"Created new R Markdown document added packages (libraries) plan use.Imported comma-separated text file web data frame called top100.Took look several different ways.Created second data frame first, names dates fixed, columns picked displayed new order.Saved project use another program.","code":""},{"path":"r-data-import.html","id":"what-you-should-do-next","chapter":" 14 Getting and saving data","heading":"What you should do next","text":"’ve followed along, create text surrounding code chunks result clean, readable Markdown document readers can follow start finish. Include:Documentation source file.Sub-headings stepsIntroductory text describing doMaybe: text chunks describe meaningful output.’re stuck, can use template created starting point.Knit early often make sure program isn’t broken output looks way expect.","code":""},{"path":"r-data-import.html","id":"and-breathe","chapter":" 14 Getting and saving data","heading":"And breathe","text":"’ve now created full, working R program Markdown format can serve model everything future. Congratulate take break!Max van den Oetelaar via Unsplash","code":""},{"path":"r-data-import.html","id":"postscript-understanding-file-types","chapter":" 14 Getting and saving data","heading":"14.5 Postscript: Understanding file types","text":"far book, ’ve saved understand format data traded among people computers. Now ’ll start understanding different forms data files, one simple Excel file ’ve dealt far.Excel propriety format – ’s made Microsoft isn’t easy use without program can import . ’ve seen, can also corrupt data misunderstanding data types like dates numbers, isn’t much control assumptions.section go common data formats ’re likey run across work R. However, R limited . ’ll often find arcane specialized data file formats work statisticians experts geographic analysis can also read R. almost always package available import .","code":""},{"path":"r-data-import.html","id":"tabular-text-data","chapter":" 14 Getting and saving data","heading":"Tabular text data","text":"Excel Google Sheets, page workbook tabular, meaning approximately rectangle. might narrow tall rectangle, short wide rectangle, ’s still rectangle. column attribute variable, row observation record .Every computer can read write plain text. characters can type typewriter, fancy formatting features require special software ingest . ’ll normally dealing . usually come two flavors:CSV data “comma-separated values” data, means new column created whenver comma encountered. chance might comma inside column, enclosed quote marks. usually works OK, times careful commas quotes inside column. (good example column peoples’ names – may something like Smith, Johnny \"Rat\") overcome , people use:CSV data “comma-separated values” data, means new column created whenver comma encountered. chance might comma inside column, enclosed quote marks. usually works OK, times careful commas quotes inside column. (good example column peoples’ names – may something like Smith, Johnny \"Rat\") overcome , people use:TSV , tab-separated data. case, tab key determines distinction columns, much rarer find plain text files.TSV , tab-separated data. case, tab key determines distinction columns, much rarer find plain text files.’s CSV might look like listing last presidents:looks like mess , ’s thing beauty computer.government agencies just make delimiter instead comma tab - ’ve seen vertical bars (|) tildes ~. use function read_delim() import text file delimited something comma.","code":"  name, position, start_date, age_at_start_date\n  \"Biden, Joe\", President, 2021-01-20, 78\n  \"Trump, Donald\", President, 2017-01-20, 70\n  \"Obama, Barack\", President, 2009-01-20, 47"},{"path":"r-data-import.html","id":"non-tabular-text-data","chapter":" 14 Getting and saving data","heading":"Non-tabular text data","text":"Another common format ’ll see passed around computer computer called JSON. stands Javascript Object Notation, commonly used pass data web , often phone browser.looks even worse, ’s also thing beauty computer. data look like JSON:","code":" {\"presidents\": [\n    {\"name\": \"Biden, Joe\", \"position\": \"President\", \"start_date\": \"2021-01-20\", \n       \"age_at start_date\": \"78\"},\n    {\"name\": \"Trump, Donald\", \"position\": \"President\", \"start_date\": \"2017-01-20\", \n       \"age_at start_date\": \"70\"},\n    {\"name\": \"Obama, Barack\", \"position\": \"President\", \"start_date\": \"2009-01-20\", \n       \"age_at start_date\": \"47\"}\n   ]\n  } \n    "},{"path":"r-data-import.html","id":"data-formats-created-for-specific-software","chapter":" 14 Getting and saving data","heading":"Data formats created for specific software","text":"R data files, sort like Excel files, require special handling used within R, can’t really used program.Almost every programming language way read Excel (.xlsx) files, sometimes don’t handle intricacies well.now, ’ll just work kinds files, just remember ’re likely run different kinds. Get help just Googling find new type – ’ll often get bad advice internet topic.","code":""},{"path":"r-verbs.html","id":"r-verbs","chapter":" 15 A quick tour of verbs","heading":" 15 A quick tour of verbs","text":"\nchapter\nneed handful key verbs tidyverse get lot done:filter: Pick rows based conditiongroup_by : Collapse data categories based column, pivot tablessummarise : Compute summary statistics sum, count medianmutate : Create new columns using functions formulasarrange : Display rows certain orderselect: Pick arrange columnsYou done Excel already.saw first R chapter tidyverse whole set packages linked together using common syntax grammar. One key concepts tidyverse verbs . Mastering just handful equip data journalist , prepare complicated endeavors.walkthrough gives little taste verbs . details coming subsequent chapters.depends continuing previous chapter. can download copy data saved project need .\n## new markdown programOpen re-open project created previous chapters. starts clean slate correct location.Create new R Markdown document. Using program wrote last chapter, copy everything setup chunk delete anything else. Edit YAML section create new title , save 02-top100-analysis.Rmd.code chunk loads data saved last chapter:","code":"\ntop100 <- readRDS(\"hit100.RDS\")"},{"path":"r-verbs.html","id":"filter-and-arrange","chapter":" 15 A quick tour of verbs","heading":"15.1 Filter and arrange","text":"filter idea filtering Excel, ’s much picky. R, match words exactly, including upper- lower-case. (Everything R case-sensitive, including names columns. ’s made lower-case last lesson.)arrange R’s version Excel’s sort.’s pick Taylor Swift’s appearances Billboard top 100 list, chronological order.R, condition tested filter using two equal signs, one.Taylor Swift songs Billboard Hot 100 list 1,000 times since 2008.’s ’d list appearances top list – . 1 lowest possible value this_week, indicating rank , pick just columns list order:first . 1 hit 2012, recent November 2021.","code":"\ntop100 %>%\n  filter ( performer == \"Taylor Swift\") %>%\n  arrange (  chart_date )   \ntop100 %>%\n  filter (performer==\"Taylor Swift\" & this_week == 1) %>%\n  arrange ( chart_date)  %>%\n  select ( this_week, song, chart_date, last_week)"},{"path":"r-verbs.html","id":"summary-statistics-in-r","chapter":" 15 A quick tour of verbs","heading":"15.2 Summary statistics in R","text":"Summary statistics similar saw pivot tables. includen() – instead “count”sum()mean() – instead “average”median()min() max()count total number songs database, use summary function n(), statisticians think concept “many?”case, ’ve done nothing else, match number rows data frame. code also creates two summary statistics: first (earliest) entry entire list, last one.R, use single equals sign naming new column","code":"\ntop100 %>%\n  summarise ( number_of_entries = n() , \n              first_entry = min(chart_date), \n              last_entry= max(chart_date)\n              )"},{"path":"r-verbs.html","id":"grouping-with-summary-statistics-aggregating","chapter":" 15 A quick tour of verbs","heading":"15.3 Grouping with summary statistics (aggregating)","text":"questions often around idea “” “biggest” something. Like Excel, guessing filtering one thing another. make list items, count .get performer appearances list, combine group_by summarise count within group. ’ll go lot detail future chapters.(may notice number next Taylor Swift’s name list number rows found filter.)code chunk:Began top100 data frame loaded earlier saved version, thenMade one row performer using group_by, thenCounted number times one appeared using summarise n() named new column times_on_list, thenSorted, arrange list descending order new column created summarise step, thenPrinted first 10 rows.Excel, trouble sorting pivot table city state rows. , ’s problem:songs list longest never made #1.","code":"\ntop100 %>%\n  group_by ( performer) %>%\n  summarise ( times_on_list = n() ) %>%\n  arrange (desc ( times_on_list ))  %>%\n  head (10)\ntop100 %>%\n  group_by ( song, performer)  %>%\n  summarise ( times_on_list = n() , \n              last_time_on_list = max(chart_date),\n              highest_position = min(this_week)\n            ) %>%\n  arrange ( desc ( times_on_list) ) %>%\n  head(25) "},{"path":"r-verbs.html","id":"thoughts-on-the-verbs","chapter":" 15 A quick tour of verbs","heading":"15.4 Thoughts on the verbs","text":"’ve now seen key verbs tidyverse, can put together. :mutate , saw last chapter, calculate new variables.select, lets pick columns order want see themfilter, pick rows based conditionsummarise compute summary statistics like “many?” “much? ”smallest” “largest”group_by create single row unique item list.Don’t worry don’t understand works . walkthrough just intended show much can just lines code.","code":""},{"path":"r-verbs.html","id":"exercise","chapter":" 15 A quick tour of verbs","heading":"15.5 Exercise","text":"feel comfortable, consider trying create markdown program accomplishes thing done Washington Post shooting database Excel lessons.Skip pivot table exercise ethnicities rows years columns - ’ll get back later.three changes ’ll make data begins Excel file rather comma-separated text file (csv):Add library setup chunk : library(readxl) sure run chunk (’ll get error).Download file save project. (readxl package doesn’t let read data web address.)Use read_excel() function import instead read_csv():","code":""},{"path":"r-verbs.html","id":"answers","chapter":" 15 A quick tour of verbs","heading":"Answers","text":"Sort state, date, time picking columns:Find fatalities Taser:Unarmed suspects carsFatalities ethnicityFatalities ethnicity yearYou skip one now – ’ll learn later flip answer head get something looks like pivot table.Fatalities cityIt’s worth noting top 10 cities west Mississippi.","code":"\nwapo_data %>%\n  arrange ( state, date) %>%\n  select (name, date, armed, ethnicity, city, state)\nwapo_data %>%\n  filter ( manner_of_death == \"shot and Tasered\")\nwapo_data %>%\n  filter (armed == \"unarmed\" & flee==\"Car\")\nwapo_data %>%\n  group_by ( ethnicity ) %>%\n  summarise ( count = n() ) %>%\n  arrange ( desc ( count ) )\nwapo_data %>%\n  group_by ( city, state) %>%\n  summarise ( fatalities = n() ) %>%\n  arrange (desc (fatalities)) %>%\n  head (10)"},{"path":"r-verb-filter.html","id":"r-verb-filter","chapter":" 16 Verbs in depth: Select, filter, arrange","heading":" 16 Verbs in depth: Select, filter, arrange","text":"\nchapter\nselect pick columns efficiently rename themarrange order rows data framefilter using Boolean logicstr_detect filters fuzzy matchingThis next several chapters based Paycheck Protection Program, PPP, loans Arizona. Full documentation dataset Appendix. haven’t already, look documentation start.","code":""},{"path":"r-verb-filter.html","id":"select-columns","chapter":" 16 Verbs in depth: Select, filter, arrange","heading":"16.1 select columns","text":"select verb allows pick columns name order data frame. Selecting columns case-sensitive: column called amount completely different column named Amount. ’s one reason use style always converting column names lower case.select easiest verb understand , ’s shown first. practice, ’ll usually include last command code chunk need use columns filtering operations don’t want include final output.lot ways pick column names based name, position, type characteristics. now ’ll stick ways:select (1:10) picks first 10 columns. Think colon word “”select (date_approved, borrower_name, borrower_address, borrower_zip, loan_status, amount, business_type) picks columns order.select ( 2, 4:6, business_type) combines position name can use whichever easier.can rename columns time select typing new name, equals sign old name, example:","code":"select ( given_date = date_approved, \n        borrower = borrower_name ,\n        borrower_city:borrower_zip)\n"},{"path":"r-verb-filter.html","id":"arrange-rows","chapter":" 16 Verbs in depth: Select, filter, arrange","heading":"16.2 arrange rows","text":"arrange verb sorts data different ways depending type column. can alphabetical (character columns), numeric order ( number double columns), chronologically (date date/time columns) . Reverse order using desc() :","code":"ppp_orig %>%\n  arrange ( date_approved, desc(amount) )\n  "},{"path":"r-verb-filter.html","id":"filter-rows","chapter":" 16 Verbs in depth: Select, filter, arrange","heading":"16.3 filter rows","text":"filter uses Boolean logic allow quite sophisticated powerful conditions pick just rows want see examine. conditions case-sensitive extremely literal. example, “PIZZA HUT ARIZONA, INC” completely different “PIZZA HUT” “Pizza Hut Arizona Inc” . simple extra character prevent match.15The conditions indicated using following symbols:cases, column name goes left operator, condition goes right.can combine using :& “” , means conditions must true. NARROWS search| “” , means EITHER condition can true. WIDENS search. ’ll usually use want get results two different columns. Think “”. rarer think, since usually looking different items within one column.%% equivalent “” condition within one column.sometimes confusing ’s exact opposite way describe English. want “apples oranges”, search fruit == 'apple' | fruit == 'orange' (Note plural versus singular well - search data, want say.)often need use parentheses tell R order want evaluate conditions combine “” “” conditions.Pro tip: Matching parentheses can tricky. make little easier, can set “rainbow parentheses” RStudio options, show matching opening closing brackets parentheses different colors cursor placed next one . ’s Preferences -> Code -> Display options, bottom.","code":""},{"path":"r-verb-filter.html","id":"a-few-examples","chapter":" 16 Verbs in depth: Select, filter, arrange","heading":"A few examples","text":"PPP data, borrower names upper case, cities addresses proper case. addition, punctuation removed, periods, commas, quotes apostrophes.use condition :Numbers without quotes, commas, dollar signs anything digits decimal points. (1000000.24)Text always quotes.Dates form “2022-01-22”.NA values never match anything. Search using .na() function.Pro tip: can explore data data frame window (clicking name data frame Environment tab. ) . wildcard search case-sensitive. Use test various ways search item, find exact phrasing need filter.","code":""},{"path":"r-verb-filter.html","id":"a-list-of-borrowers-in-flagstaff-and-sedona","chapter":" 16 Verbs in depth: Select, filter, arrange","heading":"A list of borrowers in Flagstaff and Sedona","text":"’s example extracting columns data, filtering borrowers Flagstaff Sedona, using %% operator list cities, defined c() command, “combine”:","code":"\nppp_orig %>%\n  filter ( borrower_city %in% c(\"Flagstaff\", \"Sedona\")) %>%\n  select (borrower_name, borrower_city, date_approved, amount, forgiveness_amount)"},{"path":"r-verb-filter.html","id":"narrowed-to-under-100000","chapter":" 16 Verbs in depth: Select, filter, arrange","heading":"Narrowed to under $100,000","text":"narrow just loans $100,000, can use “&” condition, add another filter. , ’ll arrange chronological order:","code":"\nppp_orig %>%\n  filter ( borrower_city %in% c(\"Flagstaff\", \"Sedona\")) %>%\n  filter ( amount < 100000) %>%\n  select (borrower_name, borrower_city, date_approved, amount, forgiveness_amount) %>%\n  arrange (date_approved)"},{"path":"r-verb-filter.html","id":"another-way-to-do-the-same-thing","chapter":" 16 Verbs in depth: Select, filter, arrange","heading":"Another way to do the same thing","text":"query equivalent last example produce answer. time uses combination | “” operator & “” operator.(might note indentations – helps reading code make clear comes .)","code":"\nppp_orig %>%\n  filter ( \n           (borrower_city == \"Flagstaff\" | borrower_city == \"Sedona\") &\n              amount < 10000\n  ) %>%\n  select (borrower_name, borrower_city, date_approved, \n          amount, forgiveness_amount) %>%\n  arrange (date_approved)"},{"path":"r-verb-filter.html","id":"projects-in-maricopa-county-that-are-not-in-phoenix-or-scottsdale","chapter":" 16 Verbs in depth: Select, filter, arrange","heading":"Projects in Maricopa County that are NOT in Phoenix or Scottsdale","text":"’s negate filter - everything two cities. ! means “”.","code":"\nppp_orig %>%\n  filter ( project_county == \"MARICOPA\" &\n             (! borrower_city %in% c(\"Scottsdale\", \"Phoenix\")) \n  ) %>%\n  select ( borrower_city, borrower_name, \n           amount, forgiveness_amount) %>%\n  arrange (amount)"},{"path":"r-verb-filter.html","id":"fuzzy-matching-with-patterns","chapter":" 16 Verbs in depth: Select, filter, arrange","heading":"16.4 Fuzzy matching with patterns","text":"far, ’ve filters character columns matching exactly. can see ’s rarely going useful columns like names, cities, addresses.Enter idea fuzzy filtering, called pattern matching using regular expressions. ’re going use package part tidyverse called stringr .Googling help “regular expressions” “pattern matching” R likely bring back instructions use base R, stringr package tidyverse. get answers include “grep” “grepl”, try adding word “tidyverse” “stringr” Google query.chapter basics pattern matching. entire chapter later semester. ’s one powerful things can programming languages.16","code":""},{"path":"r-verb-filter.html","id":"regular-expressions---the-short-version","chapter":" 16 Verbs in depth: Select, filter, arrange","heading":"Regular expressions - the short version","text":"Regular expressions search patterns rather exact words phrases. can use search column, extract piece column row, replace . work strings, computer-eze text character columns.filtering, function str_detect() detects whether string exists cell. looks little different usual filter command. ’s function takes two arguments: column name work regular expression look . looks like :basic rules pattern:^ means “pattern must come beginning string”$ means “pattern must come end string”| means “”, just filter. “(LLC|CORP|INC)” look “LLC”, “CORP”, “INC”.* means “anything nothing”? means “might might exist ” . usually need put phrase set letters parentheses make work properly.many instructions can add, now ’ll just stick .","code":"\nfilter ( str_detect ( a_column_name, \"a regular expression\" ))"},{"path":"r-verb-filter.html","id":"examples-of-regular-expressions","chapter":" 16 Verbs in depth: Select, filter, arrange","heading":"Examples of regular expressions","text":"filter address containing “Central Ave”:filter address using Central, Fillmore Taylor zip code “85004”:filter kind non-profit:filter “Fillmore St” don’t know might misspelled “Filmore”.’d look everything North Scottsdale Road, don’t know whether ’s “N” “North” “Road” “Rd”:’ll see later semester standardize names addresses don’t guess – ’s one time consuming difficult things data journalism. ’s trips people try report campaign finance.","code":"\nfilter ( str_detect(borrower_address, \"Central Ave\"))\nfilter (str_detect (borrower_name, \"Central|Fillmore|Taylor\") &  \n                    borrower_zip == \"85004\"\n        )\nfilter (str_detect (business_type, \"^Non-Profit\"))\nfilter (str_detect (borrower_address, \"Fill?more\"))\nfilter ( str_detect( business_address, \"N(orth)? Scottsdale R(oa)?d\") )"},{"path":"r-verb-filter.html","id":"your-turn","chapter":" 16 Verbs in depth: Select, filter, arrange","heading":"16.5 Your turn","text":"Create new markdown document YAML (front matter) setup chunk used last chapter.Create introduction summarizing program . may want just leave room now, come back ’re finished.Add sub-heading provides documentation sourcing data. can load data time using code chunk17:Next, add code chunk glimpse(ppp_orig) command get list columns order.","code":"\nppp_orig <- readRDS( url ( \"https://cronkitedata.s3.amazonaws.com/rdata/ppp_az_loans.RDS\"))"},{"path":"r-verb-filter.html","id":"filtering-your-data","chapter":" 16 Verbs in depth: Select, filter, arrange","heading":"Filtering your data","text":"Create code chunks filter following values. can select just columns want see whatever sort order makes sense troubleshoot. can rewrite list plain English sentences introduce code chunks.Find following sets loans, try think might make interesting possible story ideas.least $1 millionAt least $1 millionUnder $1,000Under $1,000Under $1,000 projects Maricopa CountyUnder $1,000 projects Maricopa CountyLoans paid full forgiven. words, borrower decided pay back rather ask taxpayers cover . (loans shown missing, NA forgiveness_amount column)Loans paid full forgiven. words, borrower decided pay back rather ask taxpayers cover . (loans shown missing, NA forgiveness_amount column)Loans forgiven approved.Loans forgiven approved.Loans Phoenix, Scottsdale TempeLoans Phoenix, Scottsdale TempeLoans Arizona projects state.Loans Arizona projects state.McDonald’s franchises. (removed apostrophe.)McDonald’s franchises. (removed apostrophe.)loan Native American tribe nation reservation. Hint: ’s hard “NATION” part word “NATIONAL” “TRIBE” part word “TRIBECA” “RESERVATION” part word “PRESERVATION”. can use special character look “word boundaries” : \\\\b. find just word “NATION”, look like \"\\\\bNATION\\\\b\" . Try see can figure make work want use three words.loan Native American tribe nation reservation. Hint: ’s hard “NATION” part word “NATIONAL” “TRIBE” part word “TRIBECA” “RESERVATION” part word “PRESERVATION”. can use special character look “word boundaries” : \\\\b. find just word “NATION”, look like \"\\\\bNATION\\\\b\" . Try see can figure make work want use three words.turn! Think one filter want make based chapter.turn! Think one filter want make based chapter.","code":""},{"path":"r-verb-groupby.html","id":"r-verb-groupby","chapter":" 17 Verbs in depth: Aggregating with groups","heading":" 17 Verbs in depth: Aggregating with groups","text":"\nchapter\ngroup_by summarise tidyverse’s version Excel pivot tables, many possibilities.R picky create different rows tiniest difference values, “Lettuce” vs. “lettuce”.rarely use group_by without summarise.often accommodate missing data, dreaded “NA” values.Pivoting result spreadsheet rather database format.chapter continues Paycheck Protection Program, PPP, loans Arizona. Full documentation dataset Appendix. haven’t already, look documentation start.last chapter, create new R Markdown document usual biolerplate top, read data internet using code chunk :","code":"\nppp_orig <- readRDS( url ( \"https://cronkitedata.s3.amazonaws.com/rdata/ppp_az_loans.RDS\"))"},{"path":"r-verb-groupby.html","id":"get-an-overview-of-your-data-with-skimr","chapter":" 17 Verbs in depth: Aggregating with groups","heading":"Get an overview of your data with skimr","text":"Get overview data using skimr package suggested install earlier book. haven’t yet (’re Cronkite computers), install now Console using command install.packages(\"skimr\").command uses package without loading first chunk naming package (skimr) function action comes package (skim). Sometimes ’ll ’re using , want indicate readers package contributes function.Using skimr package easy way get detailed overview data without examine column.18","code":"\nskimr::skim(ppp_orig)"},{"path":"r-verb-groupby.html","id":"summarise","chapter":" 17 Verbs in depth: Aggregating with groups","heading":"17.1 summarise","text":"summarise19 verb computes summary statistics number rows, sum, average. creates new data frame just summary statistics, none columns original data frame. Using alone produces data frame one row. ’s equivalent putting nothing pivot table Excel “Values” area.","code":""},{"path":"r-verb-groupby.html","id":"the-dreaded-na","chapter":" 17 Verbs in depth: Aggregating with groups","heading":"17.1.1 The dreaded NA","text":"Missing data computers always problem. R, noted NA (without quotes), show ’re available. Sometimes ’ll see NaN, “number”, form missing data. problem ’re unknown, can’t match anything else, can’t considered 0, can warp answers get.20But ’s usually nothing can missing data, tell program exactly . two choices:Let infect everything touch, turning everything NA.Ignore computation completely.’s right answer, depends ’re . cases, know stand value 0, others don’t. usually ignore adding argument every summary function infected : na.rm = TRUE , means, “remove NA’s anything.”.","code":""},{"path":"r-verb-groupby.html","id":"summary-functions","chapter":" 17 Verbs in depth: Aggregating with groups","heading":"17.1.2 Summary functions","text":"common functions ’ll use summarize :mean (column_name, na.rm=T) – averagesum (column_name, na.rm = T)n() – “many”, “count”median (column_name, na.rm=T)min (column_name, na.rm=T)max (column_name , na.rm=T)example, creating summary statistics appeared skimr report:produced data frame 1 row 5 columns. column names formulas created , difficult work . Create new column names using name (back-ticks ’s got spaces special characters) assign values summaries using = sign:","code":"\nppp_orig %>%\n  summarise ( n(), \n              mean (amount, na.rm=T), \n              mean (forgiveness_amount, na.rm=T), \n              min (date_approved, na.rm=T), \n              max (date_approved, na.rm= T)\n  ) %>%\n  glimpse()## Rows: 1\n## Columns: 5\n## $ `n()`                                 <int> 169268\n## $ `mean(amount, na.rm = T)`             <dbl> 73214.08\n## $ `mean(forgiveness_amount, na.rm = T)` <dbl> 78022.49\n## $ `min(date_approved, na.rm = T)`       <date> 2020-04-03\n## $ `max(date_approved, na.rm = T)`       <date> 2021-06-29\nppp_orig %>%\n  summarise ( number_of_rows =  n(), \n              mean_amount = mean (amount, na.rm=T), \n              mean_forgiven = mean (forgiveness_amount, na.rm=T), \n              first_loan = min (date_approved, na.rm=T), \n              last_loan = max (date_approved, na.rm= T)\n  ) %>%\n  glimpse()## Rows: 1\n## Columns: 5\n## $ number_of_rows <int> 169268\n## $ mean_amount    <dbl> 73214.08\n## $ mean_forgiven  <dbl> 78022.49\n## $ first_loan     <date> 2020-04-03\n## $ last_loan      <date> 2021-06-29"},{"path":"r-verb-groupby.html","id":"grouping","chapter":" 17 Verbs in depth: Aggregating with groups","heading":"17.2 Grouping","text":"Now know summarize whole data frame, ’ll want start getting totals category. thing pivot table – columns use “groups” equivalent Rows area Excel:","code":""},{"path":"r-verb-groupby.html","id":"grouping-by-one-column","chapter":" 17 Verbs in depth: Aggregating with groups","heading":"17.2.1 Grouping by one column","text":"PPP data, “draw” refers two programs involved - original one, one passed Congress late 2020.’s ’d get key statistics draw:can math time summarization. code chunk expresses amounts millions dollars, making little easier read. na.rm=T date_approved amount columns ’re always filled , according skimr report . n() function never takes argument, counts rows rather values.Notice unlike pivot tables, don’t get total across bottom. separate step (now, go make better looking tables. )","code":"\nppp_orig %>%\n  group_by ( draw ) %>%\n  summarise ( first_loan = min ( date_approved ), \n              total_amount = sum (amount), \n              total_forgiven = sum (forgiveness_amount, na.rm=T), \n              `# of loans` = n() \n  )\nppp_orig %>%\n  group_by ( draw ) %>%\n  summarise ( first_loan = min ( date_approved ), \n              amount_million = sum (amount/1000000), \n              forgiven_million = sum (forgiveness_amount/1000000, na.rm=T), \n              `# of loans` = n() \n  )"},{"path":"r-verb-groupby.html","id":"grouping-by-more-than-one-column","chapter":" 17 Verbs in depth: Aggregating with groups","heading":"17.2.2 Grouping by more than one column","text":"wanted know numbers outstanding forgiven draw, add another column group :summarise verb created data frame variables identified group_by summarise commands - everything else removed, since ’s summary data.","code":"\nppp_orig %>%\n  group_by ( loan_status, draw ) %>%\n  summarise ( first_loan = min ( date_approved ), \n              total_amount = sum (amount), \n              total_forgiven = sum (forgiveness_amount, na.rm=T), \n              `# of loans` = n() \n  )## `summarise()` has grouped output by 'loan_status'. You can override using the\n## `.groups` argument."},{"path":"r-verb-groupby.html","id":"understanding-grouped-data","chapter":" 17 Verbs in depth: Aggregating with groups","heading":"Understanding grouped data","text":"may noticed odd warning ran last code chunk said:mean?grouped loan status draw, R effectively split data frame five independent completely divorced piles - one combination draw status found. processed one one create output data frame printed .’s done summarizing data, R doesn’t know want piles – keep , put everything back together .default, group one column, maintains separate piles last group list group_by – case loan_status. , everything work three piles seperately.message tells piles, change behavior.’s often want, ’ll see next chapter. want stop , add argument looks like end summarise statement:add line end code (pipe) return normal: ungroup(). can get really strange answers save data frame ’s grouped don’t notice .’s “glimpse()” looks like data frame retained groups:Notice “Groups” row top – tells ’s still got three piles.","code":"\"`summarise()` has grouped output by 'loan_status'. You can override using the `.groups` argument.\"  summarise ( loan_count = n(), \n            .groups = \"drop\")\nppp_orig %>% group_by ( loan_status) %>% glimpse()## Rows: 169,268\n## Columns: 24\n## Groups: loan_status [3]\n## $ loan_id            <dbl> 2008847101, 3057347105, 3470877104, 3530847305, 377…\n## $ date_approved      <date> 2020-04-10, 2020-04-11, 2020-04-11, 2020-04-29, 20…\n## $ draw               <chr> \"First\", \"First\", \"First\", \"First\", \"First\", \"First…\n## $ borrower_name      <chr> \"SFE HOLDINGS LLC\", \"NAVAJO TRIBAL UTILITY AUTHORIT…\n## $ borrower_address   <chr> \"9366 East Raintree Drive\", \"Po Box 170\", \"2999 N44…\n## $ borrower_city      <chr> \"Scottsdale\", \"Fort Defiance\", \"Phoenix\", \"Tucson\",…\n## $ borrower_state     <chr> \"AZ\", \"AZ\", \"AZ\", \"AZ\", \"AZ\", \"AZ\", \"AZ\", \"AZ\", \"AZ…\n## $ borrower_zip       <chr> \"85260\", \"86504\", \"85018\", \"85711\", \"85250\", \"85012…\n## $ franchise_name     <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n## $ loan_status        <chr> \"Paid in Full\", \"Exemption 4\", \"Paid in Full\", \"Exe…\n## $ loan_status_date   <date> 2021-08-17, NA, 2021-09-25, NA, 2021-08-07, NA, 20…\n## $ amount             <dbl> 10000000, 10000000, 10000000, 10000000, 10000000, 1…\n## $ forgiveness_amount <dbl> 10108219, NA, 10133389, 10131667, 10126027, NA, 101…\n## $ forgiveness_date   <date> 2021-06-11, NA, 2021-08-17, 2021-08-26, 2021-07-22…\n## $ lender             <chr> \"The Huntington National Bank\", \"Great Western Bank…\n## $ rural_urban        <chr> \"U\", \"R\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"…\n## $ low_income_area    <chr> \"N\", \"Y\", \"N\", \"Y\", \"Y\", \"Y\", \"N\", \"N\", \"Y\", \"N\", \"…\n## $ project_county     <chr> \"MARICOPA\", \"APACHE\", \"MARICOPA\", \"PIMA\", \"MARICOPA…\n## $ project_state      <chr> \"AZ\", \"AZ\", \"AZ\", \"AZ\", \"AZ\", \"AZ\", \"AZ\", \"AZ\", \"AZ…\n## $ project_cong_dist  <chr> \"AZ-06\", \"AZ-01\", \"AZ-09\", \"AZ-02\", \"AZ-06\", \"AZ-09…\n## $ employees          <dbl> 500, 500, 500, 500, 500, 500, 500, 378, 500, 500, 5…\n## $ business_type      <chr> \"Limited  Liability Company(LLC)\", \"Non-Profit Orga…\n## $ naics_code         <chr> \"722310\", \"221122\", \"621610\", \"621111\", \"517311\", \"…\n## $ census_zip         <chr> \"85260\", \"86504\", \"85018\", \"85711\", \"85250\", \"85012…"},{"path":"r-verb-groupby.html","id":"converting-to-wide-spreadsheet-format","chapter":" 17 Verbs in depth: Aggregating with groups","heading":"17.3 Converting to “wide” (spreadsheet) format","text":"Normally, ’ll want one summary statistic shown rectangle, one column spread across top another column shown rows. R, done “pivoting” tables.case, ’re going “long” “wide” data structure, ’s called pivot_wider.’s explanation command looks like. Don’t try run :’s ’d previous example:instinct often want see data form, can actually work without , turn head want display . usually last step.","code":"\npivot_wider ( id_cols = *list of columns to keep down the side* , \n            names_from = *the name of the column supplying the headings across the top*, \n            values_from = *the values you want to show in each cell* , \n            values_fill = *what you want to show if it's empty, usually 0 *\n            )\nppp_orig %>%\n  group_by ( loan_status, draw ) %>%\n  summarise ( loan_count = n() ) %>%\n  pivot_wider ( id_cols = loan_status, \n                names_from = draw, \n                values_from = loan_count, \n                values_fill = 0)## `summarise()` has grouped output by 'loan_status'. You can override using the\n## `.groups` argument."},{"path":"r-verb-groupby.html","id":"percentages","chapter":" 17 Verbs in depth: Aggregating with groups","heading":"17.3.1 Percentages","text":"noticed created summaries, option create “percent total” percent loans draw, percent money forgiven.’ll get mutate verb next chapter, ’s used add column data frame. can use summary statistics create summarise section, ’ll added existing data frame. ’s can try first using just one “group_by” column:add second group_by, R keeps columns creates percentage based subtotal:","code":"\nppp_orig %>%\n  group_by ( draw) %>%\n  summarise ( loan_count = n() ) %>%\n  mutate ( pct_of_total = loan_count / sum(loan_count) * 100)\nppp_orig %>%\n  group_by ( draw, loan_status) %>%\n  summarise ( loan_count = n() ) %>%\n  mutate ( pct_of_draw = loan_count / sum(loan_count) * 100)## `summarise()` has grouped output by 'draw'. You can override using the\n## `.groups` argument."},{"path":"r-verb-groupby.html","id":"practice","chapter":" 17 Verbs in depth: Aggregating with groups","heading":"17.4 Practice","text":"Putting together grouping summarizing, along commands learned last chapter filter, arrange display head() tail() dataset equip write code questions:lenders provided loans?lenders provided amount money loaned?borrowers got least amount money?Show number loans draw went 24 (including NA) types businesses. see one screen, add “, rows.print=25” heading code chunk like : {r  , rows.print=25}Try compute percent loans went projects county Arizona. require first filtering, grouping.","code":""},{"path":"r-verb-mutate.html","id":"r-verb-mutate","chapter":" 18 Verbs in depth: New from old data with Mutate","heading":" 18 Verbs in depth: New from old data with Mutate","text":"\nchapter\nCreating new columns mutate()Combine summary detail one data frameReplacing NA valuesUsing conditional commands if_else() case_when() create categoriesThis continues work using Arizona Paycheck Protection Program loans. Full documentation dataset Appendix.follow along, open PPP project create new markdown usual way, including usual setup chunk. let us make numbers readable. Read data environment using code chunk::::","code":"\nppp_orig <- \n  readRDS( \n   url ( \n     \"https://cronkitedata.s3.amazonaws.com/rdata/ppp_az_loans.RDS\"\n       )\n   )"},{"path":"r-verb-mutate.html","id":"mutate-to-create-new-columns","chapter":" 18 Verbs in depth: New from old data with Mutate","heading":"18.1 mutate to create new columns","text":"Use verb mutate whenever want create change existing columns data.Examples include:Computing difference percent differenceCollapsing creating categories meaningful analysisReplacing NA values “Unknown” zero.often use combination filtering mutating create new data frame using <- assignment use future code chunks. ’s can get complex, don’t want repeat code might change .","code":""},{"path":"r-verb-mutate.html","id":"math-on-columns-compute-difference-and-percent-difference","chapter":" 18 Verbs in depth: New from old data with Mutate","heading":"18.1.1 Math on columns: compute difference and percent difference","text":"’s example computing difference percent difference amount received amount forgiven. run , try think reporter might interested list, especially order ’s listed.21","code":"\nppp_orig %>%\n  select ( borrower_name, borrower_city, amount, forgiveness_amount) %>%\n  filter ( forgiveness_amount > 0) %>%\n  mutate ( amt_diff = amount - forgiveness_amount, \n           amt_pct_diff = amt_diff / amount  ) %>%\n  arrange  ( amt_pct_diff) %>%\n  head(5)"},{"path":"r-verb-mutate.html","id":"detail-and-total-with-summary-statistics","chapter":" 18 Verbs in depth: New from old data with Mutate","heading":"18.1.2 Detail and total with summary statistics","text":"last chapter, saw use mutate compute total sub-total number rows summary. can use summary statistics get totals entire data frame mutate statement.Use single “=” sign provide name new column create one new column using comma :","code":"\nmutate ( avg_loan_size = mean( amount ), \n         median_loan_size = median ( amount ))"},{"path":"r-verb-mutate.html","id":"converting-na-to-0","chapter":" 18 Verbs in depth: New from old data with Mutate","heading":"18.1.3 Converting NA to 0","text":"NOTE: Beginning code chunk, tutorial begins saving interim data frames every time make change.like convert forgiven amount missing value zero, idea filled , nothing (yet) forgiven. course, ’d check SBA publication.specific function used : replace_na():(Note nothing came code chunk result saved new data frame variable.)","code":"\nppp_forgiven_fixed <- \n  ppp_orig %>%\n  mutate (amount_forgiven = replace_na(forgiveness_amount, 0))"},{"path":"r-verb-mutate.html","id":"working-with-text-using-conditional-statements","chapter":" 18 Verbs in depth: New from old data with Mutate","heading":"18.2 Working with text using conditional statements","text":"often, ’ll want categorize entries database order make simpler count sum values meaningful way. example, business_type column 23 different values, isn’t always filled . variants others:One way work create new columns yes-indicators certain types businesses like non-profits individuals vs. companies.","code":""},{"path":"r-verb-mutate.html","id":"categories-using-if_else","chapter":" 18 Verbs in depth: New from old data with Mutate","heading":"18.2.1 Categories using if_else","text":"function if_else() , tests condition exactly way filter , assigns value based whether ’s met . ’s general form looks like:way business_type using %% operator used filter lesson, saving new data frame Environment, displaying resulting data frame:","code":"\nnew_column_name = if_else ( test the old column for something as in a a filter,\n                         give it a value if it's true,\n                         give it another value if it's not true)\nppp_category_indiv <- \n  ppp_forgiven_fixed %>%\n  mutate ( is_individual = \n              if_else ( business_type %in% \n                          c(\"Independent Contractors\", \n                            \"Sole Proprietorship\", \n                            \"Self-Employed Individuals\", \n                            \"Single Member LLC\"), \n                        \"Individual\", \n                        \"Organization\")\n  )  \n\n\n# now you can print out the ones that were changed to check them:\n\nppp_category_indiv %>%\n  group_by ( business_type, is_individual) %>%\n  summarise ( n = n(), .groups=\"drop\") %>%\n  arrange ( desc(n) ) %>% \n  head(5)"},{"path":"r-verb-mutate.html","id":"categories-using-pattern-matching","chapter":" 18 Verbs in depth: New from old data with Mutate","heading":"18.2.2 Categories using pattern matching","text":"can also use str_detect() function used filtering. , sets whether borrower non-profit. period means “nothing 1 character” sometimes ’s listed dash sometimes ’s .(profit categorization unclear types, professional associations , tribal concerns cooperatives.)","code":"\nppp_category_nonprofit <-\n  ppp_category_indiv %>%\n  mutate ( is_nonprofit = \n             if_else ( str_detect(business_type, \"Non.Profit\") , \n                       \"Is nonprofit\", \n                       \"Not nonprofit\"))  \n\n\n\nppp_category_nonprofit %>%\n  count ( business_type, is_nonprofit) %>%\n  filter ( is_nonprofit == \"Is nonprofit\")"},{"path":"r-verb-mutate.html","id":"more-than-one-outcome","chapter":" 18 Verbs in depth: New from old data with Mutate","heading":"18.2.3 More than one outcome","text":"Sometimes want one outcome, setting value “High”, “Medium” “Low”. Instead if_then, use function case_when, looks like :","code":"\ncase_when ( first condition ~ what if it's true,\n            second condition ~ what if  it's true, \n            third condition  ~ what if it's true, \n            TRUE ~ what to do with everything that's left\n            )"},{"path":"r-verb-mutate.html","id":"putting-it-all-together","chapter":" 18 Verbs in depth: New from old data with Mutate","heading":"18.3 Putting it all together","text":"set column five types borrowers instead three. ’s little complicated, see can follow along, using knowledge pattern matching:(might notice indentation spacing code chunk, making easier identify exactly ’s happening sub-phrase.)Now, want look types companies, can fewer groups. Note uses fixed amount “forgiven”, original NA. skipped , used forgiven = sum(forgiveness_amount, na.rm=T):Explore data frames clicking Environment tab see can tell whether formulas worked.","code":"\nppp_business_categories <- \n  ppp_category_nonprofit %>%\n  mutate (  new_business_type = \n                case_when (  str_detect(business_type, \"Non.Profit\") ~ \"Non-profit\", \n\n                             business_type %in% \n                               c(\"Independent Contractors\", \n                                \"Sole Proprietorship\", \n                                \"Self-Employed Individuals\", \n                                  \"Single Member LLC\")              ~ \"Individual\", \n                             \n                             business_type == \"Tribal Concerns\"     ~ \"Tribal concerns\", \n                             \n                             str_detect (business_type, \"LLC|Company|Corporation|Partnership\") ~ \"Companies\", \n                             \n                             TRUE ~ \"Other\") \n            )\n\n\n# Now compare what they were to what they are:\n\nppp_business_categories %>%\n  group_by ( new_business_type, business_type) %>%\n  summarise ( \"# of loans\" = n(), .groups=\"drop\")\nppp_business_categories %>%\n  group_by ( new_business_type) %>%\n  summarise ( \"# of loans\" = n(), \n              total_amount  = sum(amount), \n              forgiven = sum(amount_forgiven) , \n              forgiveness_pct = forgiven / total_amount * 100, \n              .groups=\"drop\")"},{"path":"r-verb-mutate.html","id":"save-it-for-use-in-another-program","chapter":" 18 Verbs in depth: New from old data with Mutate","heading":"Save it for use in another program","text":"Saving future use means don’t worry anymore missing values, can filter group simpler new business type instead original.","code":"\nsaveRDS(ppp_business_categories, file=\"ppp_edited.RDS\")\n"},{"path":"r-verb-join.html","id":"r-verb-join","chapter":" 19 Verbs in depth: Matchmaking with joins","heading":" 19 Verbs in depth: Matchmaking with joins","text":"\nchapter\njoin combines two tables (data frames) columnjoining data frames requires exact matches one columns. Close matches don’t count.Use codes one data frame “look ” information another, attach row, translation codes words demographics Census tract.Many public records databases come “lookup tables” “code sheets”. Make sure ask codes translations data request.Reporters don’t always stick matchmaking way database designers intended. “Enterprise” joins let find needles haystack, bus drivers history DUIs.Matching one data frame entirely different one always produce errors. can minimize kind error fear – false positives false negatives – likely report findings ground.","code":""},{"path":"r-verb-join.html","id":"join-basics","chapter":" 19 Verbs in depth: Matchmaking with joins","heading":"19.1 Join basics","text":"great explainer joins made previous MAIJ student, Andy Blye. sure watch :joins computer programming means adding columns data frame combining another data frame table. Reporters use many ways, intended people made data source, .22Many databases created expecting join tables (data frames) ’s efficient way store work large databases. ’s called “relational database”, ’re everywhere (least everywhere updated computer systems since 1980 ).’s example, using campaign finance information. Federal Elections Commission distributions campaign contribution related tables, referring different noun. One table lists donations, lists candidates political action committees. link together using common code:Campaign finance joinThe reason never worry changes candidate information – treasurer, address office sought – carries donation. ’s listed candidate table. large databases constructed way. example:school records held using student ID, means address home email needs changed , every class every account school.Inspection records, restaurants, hospitals, housing code violations workplace safety, typically least three tables: establishment (like restaurant workplace), inspection (event date), violation (something found). ’re linked together using establishment ID’s.court database usually many types records: master case record links information charges, defendants, lawyers, sentences court hearings.table, , described using different noun – candidates contributions; defendants cases; students courses. conforms tidy data principle different types information stored different tables.","code":""},{"path":"r-verb-join.html","id":"join-syntax","chapter":" 19 Verbs in depth: Matchmaking with joins","heading":"19.1.1 join syntax","text":"several kinds joins, syntax similar across .","code":"  old_table_1 %>%\n     inner_join (new_table , by=c(\"old table col. name\" = \"new table col. name\") )\n     "},{"path":"r-verb-join.html","id":"matchmaking-with-joins","chapter":" 19 Verbs in depth: Matchmaking with joins","heading":"19.2 Matchmaking with joins","text":"type join described often referred “lookup table”. ’ll match codes meanings way intended people made database.\nways reporters use joins:","code":""},{"path":"r-verb-join.html","id":"enterprise-joins","chapter":" 19 Verbs in depth: Matchmaking with joins","heading":"“Enterprise” joins","text":"Journalists taken calling specific kind join “enterprise”, referring enterprising reporters . , ’ll look needles haystack. famous data journalism investigations relied joining two databases started completely different sources, :Bus drivers DUI citationsDonors governor got contracts stateDay care workers criminal recordsSmall businesses defaulted government backed loans got PPP loan anyway.match kinds datasets, always error. always report suspected matches, time consuming stories.mid-2000s, politicians insisted dead people voting proposed measures restrict registration, almost every regional news organization sent reporters futile hunts dead voters. got lists people voter rolls, lists people died Social Security Death Index local death certificates. never met anyone found single actual dead voter, months reporter-hours spent tracking lead.’s common two people name city. fact, ’s common two people home name – ’ve just left “Jr.” “Sr.” database. case, ’ll find matches shouldn’t. false positives, Type errors statistics.Also, rarely get dates birth Social Security Numbers public records, join name sometimes location. someone moved, sometimes uses nickname, government recorded spelling incorrectly, join fail – ’ll miss possible matches. common company names, can change mergers changes management, can listed many different ways.false negatives, Type II errors statistics.23In different contexts, ’ll want minimize different kinds errors. example, looking something extremely rare, want examine every possible case – like child sex offender working day care center – might choose make “loose” match get lots false positives, can check. want limit reporting promising leads, ’ll willing live missing cases order sure joins find.’ll see stories kind write around lack precision – ’ll often say, “verified x cases ….” rather pretend know .","code":""},{"path":"r-verb-join.html","id":"find-cases-with-interesting-characteristics","chapter":" 19 Verbs in depth: Matchmaking with joins","heading":"Find cases with interesting characteristics","text":"’ll often want learn geographic area’s demographics voting habits characteristics, match data. Sometimes ’s simple: Find demographics counties switched Trump Biden way isolate places might want visit. Another example voting might find precinct highest percentage Latino citizens county, match precinct voter registration rolls get list people might want interview election day. instances, join used filter.also common data zip code geography, want find clusters interesting potential stories, PPP loans minority neighborhoods.","code":""},{"path":"r-verb-join.html","id":"summarize-data-against-another-dataset","chapter":" 19 Verbs in depth: Matchmaking with joins","heading":"Summarize data against another dataset","text":"previous examples result lists potential story people places. use join summarized data, can characterize broad range activity across new columns. Simplified, can write PPP money went predominantly white neighborhoods majority Black.","code":""},{"path":"r-verb-join.html","id":"simple-join-using-ppp-industry-codes","chapter":" 19 Verbs in depth: Matchmaking with joins","heading":"19.3 Simple join using PPP industry codes","text":"PPP data code called naics_code, standardized code identify industries. assigned company bank, government, good guide. data frame contains list industries PPP data. derived concordance package R, fully explained Census website.two tables: original PPP data, industry code “lookup”.example looking one sector – sector code “72” subsectors industry codes. digit code 72 refers different definition. tha end zero specific digit.:put together PPP data, “join” using column common – naics_code. example “inner join”, rows match kept result. result uses just columns saved data frame, picks random rows view:(case, column name, don’t . long CONTAIN thing, can different names. can also join using one column, county state together.)Think means: now another thing grouping, can see, instance, much went restaurants, restaurants block got loans.","code":"\nnaics_codes <- readRDS( url ( \"https://cronkitedata.s3.amazonaws.com/rdata/naics_lookup.RDS\"))\n\nppp_orig <- readRDS (url ( \"https://cronkitedata.s3.amazonaws.com/rdata/ppp_az_loans.RDS\"))\nnaics_codes %>% filter ( sector_code == \"72\") %>%\n  select (-sector_code, -subsector_code)\nloans_with_industry <- \n  ppp_orig %>%\n  inner_join ( naics_codes, by=c(\"naics_code\"=\"naics_code\"))  "},{"path":"r-verb-join.html","id":"joining-risks","chapter":" 19 Verbs in depth: Matchmaking with joins","heading":"19.4 Joining risks","text":"","code":""},{"path":"r-verb-join.html","id":"joining-tldr","chapter":" 19 Verbs in depth: Matchmaking with joins","heading":"19.4.1 joining tl;dr","text":"lots risks joining tables created , created outside big relational database system. Keep eye number rows returned every time join – know expect.","code":""},{"path":"r-verb-join.html","id":"double-counting-with-joins","chapter":" 19 Verbs in depth: Matchmaking with joins","heading":"19.4.2 Double counting with joins","text":"won’t go depth, just aware ’s easy double-count rows join. ’s made-example, zip code border two counties:Say want use data zip codes :match list restaurants zip code:match , ’ll get 4 rows:Now, every time try count restaurants, two double-counted.computing, called “many--many” relationship – many rows zip codes many rows restaurants. journalism, call spaghetti. ’s usually unintended mess.","code":""},{"path":"r-verb-join.html","id":"losing-rows-with-joins","chapter":" 19 Verbs in depth: Matchmaking with joins","heading":"19.4.3 Losing rows with joins","text":"opposite can occur aren’t careful items want keep missing reference table. ’s happened immunization data seven schools couldn’t find.","code":""},{"path":"r-verb-join.html","id":"resources-1","chapter":" 19 Verbs in depth: Matchmaking with joins","heading":"19.5 Resources","text":"“Relational data” chapter R Data Science textbook details exactly complex data set might fit together.“Relational data” chapter R Data Science textbook details exactly complex data set might fit together.example using superheroes dataset, Stat 545 University British ColumbiaAn example using superheroes dataset, Stat 545 University British Columbia","code":""},{"path":"r-recipes.html","id":"r-recipes","chapter":" 20 Recipes","heading":" 20 Recipes","text":"final chapter data wrangling R simply puts together lot code snippets easy forget, adds advanced code examples can adapt work. minimal explanation. Instead, look relevant chapter explanation. time, ’ll add section links examples.can copy paste RStudio’s snippets use directly program – just change references variables work.examples use data chapters, PPP program.","code":""},{"path":"r-recipes.html","id":"r-annoyances-and-errors","chapter":" 20 Recipes","heading":"R annoyances and errors","text":"several annoyances aren’t consistent one function R next. ’re trouble, look forQuoting issues - kind quotes, whether ’re needed, ’re matched open closed.Quoting issues - kind quotes, whether ’re needed, ’re matched open closed.Unmatched missing parentheses\nPutting words wrong side equal signs. create new column name, put left. identify column used argument, put right. filter column, use two equals signs, column name left.Unmatched missing parenthesesPutting words wrong side equal signs. create new column name, put left. identify column used argument, put right. filter column, use two equals signs, column name left.working list items? , need wrap c() function, “combine”working list items? , need wrap c() function, “combine”Case-sensitivity column names; back-ticks one word column name rather quotes.Case-sensitivity column names; back-ticks one word column name rather quotes.Missing hanging pipes (%>%)Missing hanging pipes (%>%)problems fix 80 percent code won’t run get used .","code":""},{"path":"r-recipes.html","id":"re-using-answers-from-a-previous-step","chapter":" 20 Recipes","heading":"20.1 Re-using answers from a previous step","text":"Assign code chunk new variable environment use later. usefule :complex filter want apply future steps.joining data frames columns names: select just columns need re-name ones , except join one.fixed column types adjusted values.assignment operator <-, means “pour answer variable name”can go one code chunk ’d like:","code":"\nselect_ppp <- \n  ppp_orig %>%\n  filter ( project_state == \"AZ\" & !is.na (project_county) ) %>%\n  mutate ( forgiveness_amount = if_else (is.na(forgiveness_amount),\n                                         0, \n                                         forgiveness_amount)) %>%\n  select ( borrower_name, borrower_city, \n           naics_code, \n           amount, forgiveness_amount,\n           date_approved, forgiveness_date)\n\n\n\nsectors <- \n  naics_codes %>%\n  select ( naics_code, sector_code, sector_desc)\n\n\nselect_ppp %>%\n  left_join ( sectors, by=\"naics_code\")  %>%\n  select ( borrower_name, forgiveness_amount, sector_desc) %>%\n  head(5)"},{"path":"r-recipes.html","id":"filtering-1","chapter":" 20 Recipes","heading":"20.2 Filtering","text":"One condition ’s number :number two valuesAn exact phrase wordOne several possible entries one column (exactly)Everything except missing valuesBetween two dates date[^sure ’s really date data glimpsing data frame. , turn date first]Phrases, words letters beginning columnPhrases, letters words end columnA word isn’t part another wordAll examples can used mutate statement create flags new values conditions met.","code":"  filter ( amount > 1000 )  filter ( between ( amount, 0, 1000))  filter ( project_county == \"MARICOPA\")    filter ( project_county %in% c(\"MARICOPA\", \"PIMA\", \"PINAL\" ))    filter ( ! is.na (project_county) )    filter ( approval_date >= \"2021-01-24\" & \n           approval_date <= \"2021-01-31\")    filter ( str_detect (borrower_type , \"^Non-Profit\"))    filter ( str_detect (borrower_type, \"Corporation$\"))    filter ( str_detect ( \"\\\\bNation\\\\b\"))"},{"path":"r-recipes.html","id":"aggregate-count-sum-rows-by-category","chapter":" 20 Recipes","heading":"20.3 Aggregate (count, sum rows by category)","text":"Counting (many?)Make sure don’t name new column containing count thing group_by() column.Shortcut counting:Counting unique entriesSometimes want know many items type, many rows, included category.Summing (much?)Shortcut summing:","code":"    group_by (project_county) %>%\n    summarise (loans = n() )  %>%\n    arrange ( desc ( loans ))     count( project_county, sort=TRUE, name=\"loans\")        group_by ( project_county) %>%\n        summarise ( number_of_loans = n(), \n                    number_of_industries = n_distinct ( naics_code )\n                    )    group_by (project_county) %>%\n    summarise ( total_amount = sum (amount, na.rm=T))    count ( project_county, weight=amount, name=\"total_amount\")"},{"path":"r-recipes.html","id":"recoding-categories","chapter":" 20 Recipes","heading":"20.4 Recoding categories","text":"’ll often want fewer categories, numbers categories, want use instead original values. done mutate statement. Don’t forget save output new data frame (<-), won’t access later .Create yes-categories . really “Yes”, “” NA, NA begin .Recode two categories, example using str_detect()’ll want check ’re done make sure:make sure coded properly. many NA values means likely misspelled something left something .Recode numbers categoriesIt’s often useful give numeric codes front sort properly:works first one finds used, value exactly 1,000 “low”, value 1,001 “Low”.24","code":"    mutate ( corp_yn = if_else  \n                      (str_detect (borrower_type, \n                                   \"Corporation\"), \n                       \"Yes\", \n                       \"No\")\n       )  mutate ( new_type = case_when \n           (str_detect (borrower_type, \n                        \"Corporation|Company\") ~     \"\n                        For-profit company\", \n          str_detect (borrower_type,\n                      \"(Non-Profit|Cooperative|Association)\") ~ \n                      \"Non profit\", \n          str_detect ( borrower_type, \n                      \"(Sole|Self-Employed|Independent)\") ~\n                      \"Individual\", \n          TRUE ~ \"Everyone else\")\n        )        new_dataframe %>%\n        count ( new_type, borrower_type)        mutate ( new_type = \n                 case_when  (\n                    amount <= 1000 ~ \"00-Very low\", \n                    amount <= 10000 ) ~ \"01-Low\", \n                    amount <= 100000) ~ \"03-Medium\", \n                    amount > 100000 ~ \"04-High\")\n              )"},{"path":"r-recipes.html","id":"working-with-grouped-data-for-subtotals-changes-percents","chapter":" 20 Recipes","heading":"20.5 Working with grouped data for subtotals, changes, percents","text":"Percent total groupDisplay results spreadsheet formTo see items across top, use pivot_wider.can add argument values_from know missing values zero, using values_fill=0You usually choose one column show side, one column spread across top, one column display value.Complex example: Get change year within county.\nannual_ppp <-\nmutate ( approve_year = year (approval_date ) ) %>%\ngroup_by ( project_county, approve_year) %>%\nsummarise ( loans = n() ,\namount = sum( amount, na.rm=T),\n.groups=“drop_last”)Complex example: Get change year within county.annual_ppp <-\nmutate ( approve_year = year (approval_date ) ) %>%\ngroup_by ( project_county, approve_year) %>%\nsummarise ( loans = n() ,\namount = sum( amount, na.rm=T),\n.groups=“drop_last”)Next, compare within groups. New functions introduced: complete(), fills missing information sequence. example, missing years county, create row fill . lag() refers previous item group. First, make new, summarized data frame just columns neePick last item group, columns. New verb introduced : slice_tail() . particularly useful chronological events, last thing happened court case, recent complaint police officer. example isn’t great one, gets name details recent loan lender\narrange ( lender, date_approved) %>%\ngroup_by ( lender) %>%\nslice_tail()Pick last item group, columns. New verb introduced : slice_tail() . particularly useful chronological events, last thing happened court case, recent complaint police officer. example isn’t great one, gets name details recent loan lender","code":"  group_by ( project_county, sector_desc ) %>%\n  summarise ( loans = n() , .groups=\"drop_last\") %>%\n  mutate ( pct_in_county = loans / sum(loans))  group_by ( project_county, new_type) %>%\n  summarise ( loan_count = n() ) %>%\n  pivot_wider ( names_from = new_type, \n                id_cols = c( project_county), \n                values_from = loan_count)    complete ( project_county, approve_year, \n              fill= list (amount=0, loans =0) )%>%\n    mutate ( change_loans = loans - lag(loans), \n             pct_change_loans = change_loans / lag(loans) * 100) arrange ( lender, date_approved) %>%\ngroup_by ( lender) %>%\nslice_tail()"},{"path":"r-recipes.html","id":"do-the-same-thing-on-many-columns-at-once","chapter":" 20 Recipes","heading":"20.6 Do the same thing on many columns at once","text":"examples use new concept, called across. ’s way thing columns time, replacing original value new one. can tricky write, ’m sure understand completely. can also really, really slow large datasets.Convert character columns upper case easier filteringStrip punctuation set columns easier filtering groupingNew functions introduced: str_squish() remove extra blanks, str_replace_all() replace punctuation nothing. ~ needed put expression use “across” refer bunch columns time.","code":"   mutate (across ( where (is.character) , toupper))  mutate ( across ( c(borrower_name, borrower_address, borrower_city),                 ~str_squish( \n                      str_replace_all ( ., \"[:punctuation:]\",\"\")\n                            )\n                  )\n        )"},{"path":"r-recipes.html","id":"better-looking-tables","chapter":" 20 Recipes","heading":"20.7 Better looking tables","text":"One big annoyances R results , well, unreadable. Numbers aren’t formatted, can’t see data want, ’s hard share results.Think quick tour options make better looking tables readable output. practice, use one three:reactable provides powerful way make sortable, searchable tables markdown. ’s great sharing data people just want explore . Just careful include many rows can’t opened effectively browser.reactable provides powerful way make sortable, searchable tables markdown. ’s great sharing data people just want explore . Just careful include many rows can’t opened effectively browser.gt makes professional looking static tables, might see book. ’re good labeling, footnotes details don’t want anyone change anything.gt makes professional looking static tables, might see book. ’re good labeling, footnotes details don’t want anyone change anything.reactable gt produce subtotals math , meaning can show multiple levels . examples use PPP data county Arizona month.","code":""},{"path":"r-recipes.html","id":"strategy","chapter":" 20 Recipes","heading":"Strategy","text":"Typically, ’ll data processing series steps culminate columns ’ll need table want make – include grouping, joining computations ’ve already made.can challenge get right sorting, otherwise works OK.","code":""},{"path":"r-recipes.html","id":"make-the-data-frame-you-want-to-display-and-save-it","chapter":" 20 Recipes","heading":"Make the data frame you want to display and save it","text":"example:Converts dates months converting character column formatted year-month keep sort order proper.Converts dates months converting character column formatted year-month keep sort order proper.Replaces missing counties “UNKNOWN” keeps Arizona.Replaces missing counties “UNKNOWN” keeps Arizona.Computes totals month.Computes totals month.Saves data frame called ppp_fortable.Saves data frame called ppp_fortable.","code":"\nppp_fortable <- \n  ppp_orig %>%\n  # sort in order so that the months aren't alphapbetized or dependent on the first county\n  arrange ( date_approved) %>%\n  mutate ( month = format(date_approved, \"%Y-%m\"), \n           project_county = replace_na(project_county, \"UNKNOWN\")) %>%\n  filter ( project_state == \"AZ\") %>%\n  group_by ( project_county, month) %>%\n  #this at least shows you commas in the values. I haven't had luck using currency on this.\n  summarise ( loans  =  n(), \n              total_amt = sum(amount),\n              .groups=\"drop\"\n  ) "},{"path":"r-recipes.html","id":"reactable-sortable-searchable-tables-with-formatted-numbers","chapter":" 20 Recipes","heading":"Reactable: Sortable, searchable tables with formatted numbers","text":"can make sortable, searchable table. syntax grammar completely different ’re used ’s implementation Javascript library:[react 1]{assets/images/r-recipes-react1.png}{width=100%}","code":"\nppp_fortable %>%\nreactable (  defaultPageSize = 15,\n             defaultColDef = colDef ( filterable=TRUE, \n                                      sortable=TRUE,\n                                      format = colFormat(digits = 0, separators=TRUE) \n                                       ), \n              columns  = list (\n                  project_county = colDef (\"County\"), \n                  month = colDef (\"Month\"), \n                  loans  = colDef (\"# of loans\", align=\"right\", filterable=FALSE), \n                  total_amt = colDef (\"$ amount\", \n                                       align=\"right\", \n                                      format = colFormat (\n                                              separators=TRUE, prefix=\"$\", digits=0)\n                                      )\n                  \n                 )\n            )"},{"path":"r-recipes.html","id":"pivoted-reactable-table","chapter":" 20 Recipes","heading":"Pivoted reactable table","text":"isn’t great example, turn monthly table pivoting data printing. also added formatting example can see reduce size, put scrollbars, etc. ’re optional.react_example2","code":"\nppp_fortable %>%\n  ungroup() %>%\n  arrange ( month) %>%\n  pivot_wider ( names_from = month, \n                values_from = total_amt, \n                values_fill = 0, \n                id_cols = project_county) %>%\n  reactable ( # these options make it scrollable and smaller print\n              wrap=FALSE,\n              width=700,\n              theme = reactableTheme( style=list(fontSize=\"smaller\", \n                                                 color=\"DimGray\", \n                                                 fontFamily=\"sans-serif\")),\n              #these options set the default column format.\n              defaultColDef = colDef ( format=colFormat ( \n                                                 separators=TRUE,\n                                                 digits=0, \n                                                 prefix=\"$\"\n                                                 ), \n                                       minWidth=150) , \n      # Here you'd list anything that defies the normal column defaults\n    columns = list(\n        project_county = colDef (\"County\", format=colFormat(prefix = \"\"))\n           )\n)"},{"path":"r-recipes.html","id":"static-table-with-subtotals-and-percentages-using-gt","chapter":" 20 Recipes","heading":"20.7.1 Static table with subtotals and percentages using gt","text":"include section gt, one option good-looking static tables. starts data frame containing totals sector county, just counties sectors picked .LOT typing get good looking static table, can worth . Consider saving simple example Rstudio snippets pull whenever need .","code":"\nlibrary(gt)\n\nppp_subtotals %>%\n  group_by (project_county) %>%\n  gt ( ) %>%\n  fmt_number ( columns = c(loans), decimals=0, sep_mark=\",\") %>%\n  fmt_currency ( columns = c(amount, forgiven), \n                           currency = \"USD\", \n                           decimals= 0) %>%\n  summary_rows ( columns = c(loans:forgiven),\n                  groups=TRUE, \n                  fns = list( Total=\"sum\"), \n                  formatter = fmt_number, \n                  decimals=0, \n                 use_seps=TRUE) %>%\n  grand_summary_rows ( \n       columns = c( amount:forgiven), \n       fns = list (`Grand Total` = \"sum\"), \n       formatter = fmt_currency,\n       decimals=0\n  )"},{"path":"viz-intro.html","id":"viz-intro","chapter":"Introduction","heading":"Introduction","text":"","code":""},{"path":"viz-intro.html","id":"in-this-section","chapter":"Introduction","heading":"20.8 In this section","text":"following chapters review ways looking data reporting. ’re leaving publication quality graphic alone – often depend using sites like <datawrapper.de> D3 javascript get high-performance visualizations, static graphics often depend using Adobe products make typography palettes acceptable publication.Much done R using package ggplot2, part tidyverse. want follow along interactive aspects, ’ll want install plotly package. may others noted individual sections.Working geography next section.Visualization reporting tool - principles using visualizations report storiesVisualization reporting tool - principles using visualizations report storiesVisualization demoVisualization demo","code":""},{"path":"viz-intro.html","id":"other-resources-1","chapter":"Introduction","heading":"20.9 Other resources","text":"sections just gets basics making plots R. Consider following resources want get detail:“Visualization R”, Kiernan Healy. excellent introduction concepts visualization R using ggplot (mainly).“Data Visualization Storytelling Discovery””, free online course given Knight Center 2018. videos assignments still available, Alberto Cairo. Parts book, Truthful Art, included free materials course.“Using data visualization find insights data”, Gregor Aisch, former New York Times assistant graphics editor. examples created Tidyverse became popular, R code may translate well .R graph gallery extensive examples code help - usually go find inspiration want examples . lot extra packages can add R create specialized graphs.","code":""},{"path":"viz-intro.html","id":"applications-for-visualization","chapter":"Introduction","heading":"Applications for visualization","text":"can use lot different types online free applications play around graphics instead R. ’re less reproducible, often come go free options, ’re sometimes easier:Datawrapper.de , used lot newsrooms. want publish visualization, can link directly R. ’s also easy use . want eventually publish visualizations, probably one compatible newsrooms.Flourish (recently purchased Canva, knows? can now create private visualizations without paying. )RAWGraphs, made designers sketch work digging deep Adobe Illustrator. ’s little hard use unless data just right form.Tableau Public, made mainly business intelligence, free version available. haven’t used reasons: Newsrooms don’t use much doesn’t scale well mobile; ’s hard save drafts free version; ’s little hard get used interface quick visualization.underlying D3 language graphics, written Javascript, powers lot products. ’s professional visual storyteller use. (Aside: javascript probably second language ’d want learn. helps scraping used extensively newsrooms ’s language web mobile, people help . ’s easy.)","code":""},{"path":"viz-reporting.html","id":"viz-reporting","chapter":" 21 Visualization as a reporting tool","heading":" 21 Visualization as a reporting tool","text":"NOTE: chapter adapted handout created IRE around 2012, used original data journalism handbook. updated.","code":""},{"path":"viz-reporting.html","id":"why-to-use-visualization","chapter":" 21 Visualization as a reporting tool","heading":"21.1 Why to use visualization","text":"launch trying chart map data, take minute think many roles static interactive graphic elements play journalism.reporting phase, visualizations can:Help identify themes questions rest reportingIdentify outliers – good stories, perhaps errors, dataHelp find typical examplesShow holes reportingVisualizations also play multiple roles publishing:Illustrate point made story compelling wayRemove unnecessarily technical information proseParticularly interactive allow exploration, provide transparency reporting process readersThese roles suggest start early often visualizations reporting, whether start electronic data paper records. Don’t consider separate step – something considered story largely written. Let work help guide reporting.Getting started sometimes means just putting visual form notes ’ve already taken. Consider graphic, ran Washington Post 2006:farm timelineIt shows portion farm income associated subsidies key events past 45 years, built series months. Finding data used time similar definitions similar meanings challenge. Investigating peaks troughs helped us keep context mind rest reporting. also meant one chore pretty much finished stories written.","code":""},{"path":"viz-reporting.html","id":"tips-for-exploration","chapter":" 21 Visualization as a reporting tool","heading":"21.2 Tips for exploration","text":"","code":""},{"path":"viz-reporting.html","id":"use-small-multiples-to-quickly-orient-yourself-in-a-large-dataset","chapter":" 21 Visualization as a reporting tool","heading":"Use small multiples to quickly orient yourself in a large dataset","text":"used technique Washington Post looking tip George W. Bush administration awarding grants political, substantive, grounds. aid programs done formula, others funded years, curious whether might see pattern looking nearly 1,500 different discretionary streams.grant listI created graph program, red dots indicating presidential election year green dots indicating congressional year. problem: Yes, spike six months presidential election several programs – red dots peak numbers next – ’s wrong election year. Instead George W. Bush’s re-election bid, peak consistently 2000 presidential election, Bill Clinton White House vice president, Al Gore, running office.really easy see series graphs rather table numbers, interactive form let us check various types grants, regions agencies. Maps small multiples can way show time place static image ’s easy compare – sometimes even easier interactive.example created short program written PHP, ’s now much easier Excel 2007 2010’s sparklines. Edward Tufte, visualization expert, invented “intense, simple, word-like graphics” convey information glance across large dataset. now see everywhere, little graphs stock market quotations win-loss records sports.","code":""},{"path":"viz-reporting.html","id":"look-at-your-data-from-all-directions","chapter":" 21 Visualization as a reporting tool","heading":"Look at your data from all directions","text":"’re trying understand story dataset, ’s wrong way look ; try every way can think , ’ll get different perspective. ’re reporting crime, might look one set charts change violent crimes year; another might percent change; might comparison cities; another might change time. Use raw numbers, percentages indexes.Look different scales. Try following rule x-axis must zero. break rule see learn . Try logarithms square roots data odd distributions.Keep mind research done visual perception. William Cleveland’s experiments showed eye sees change image average slope 45 degrees. suggests ignore admonitions always start zero instead work toward insightful graphic. research epidemiology suggested find target level boundary chart. ways helps see data different ways. ’ve stopped telling anything new, know ’re done.","code":""},{"path":"viz-reporting.html","id":"dont-assume","chapter":" 21 Visualization as a reporting tool","heading":"Don’t assume","text":"Now ’ve looked data variety ways, ’ve probably found records don’t seem right – may understand meant first place, outliers seem like typos, trends seem backwards.want publish anything based early exploration published visualization, resolve questions can’t make assumptions. ’re either interesting stories mistakes; interesting challenges common wisdom misunderstanding.’s unusual local governments provide spreadsheets filled errors, ’s also easy misunderstand government jargon dataset.First, walk back work. read documentation, caveats problem exist original version data? everything end seems right, ’s time pick phone. ’re going get resolved plan use , might well get started now.said, every mistake important. campaign finance records, ’s common several hundred postal codes don’t exist database 100,000 records. long ’re city within candidate, occasional bad data record just doesn’t matter.question ask : use , readers fundamentally accurate view data says?","code":""},{"path":"viz-reporting.html","id":"avoid-obsessiong-over-precision-and-presentation-details","chapter":" 21 Visualization as a reporting tool","heading":"Avoid obsessiong over precision and presentation details","text":"flip side asking enough questions obsessing precision matters. exploratory graphics generally correct, don’t worry various levels rounding, don’t add exactly 100 percent missing one two years’ data 20. part exploration process. ’ll still see big trends know collect ’s time publication.fact, might consider taking away labeling scale markers, much like charts , even better get overall sense data.","code":""},{"path":"viz-reporting.html","id":"create-chronologies-of-cases-and-events","chapter":" 21 Visualization as a reporting tool","heading":"Create chronologies of cases and events","text":"start complex story, begin building chronologies key events cases. can use Excel, Word document special tool like TimeFlow task, point find dataset can layer behind . Reading periodically show holes reporting filled .","code":""},{"path":"viz-reporting.html","id":"meet-with-designers-and-graphics-editors-early-and-often","chapter":" 21 Visualization as a reporting tool","heading":"Meet with designers and graphics editors early and often","text":"Brainstorm possible graphics artists designers newsroom. good ways look data, suggestions might work interactively, know connect data stories. make reporting much easier know collect early , can alert team graphic isn’t possible can’t collect .","code":""},{"path":"viz-demo.html","id":"viz-demo","chapter":" 22 Visualization demo","heading":" 22 Visualization demo","text":"chapter walks built-dataset R show concepts creating visualizations. works data behaves quite well demo – something can’t count actual journalism datasets.make sense watch videos Knight Center course Module 1, parts 2 part 3, refer “visual encodings”.","code":""},{"path":"viz-demo.html","id":"intro-to-visualization-in-r","chapter":" 22 Visualization demo","heading":"22.1 Intro to visualization in R","text":"’ll need additional packages installed work:gapminder - example data used throughout, even though ’s little boringplotly - make interactive charts.can use command Console install time:, load packages, including new ones just installed:","code":"    install.packages(c(\"plotly\", \"gapminder\"))\nlibrary(gapminder)\nlibrary(tidyverse)\nlibrary(ggplot2)\nlibrary(plotly)\n\nknitr::opts_chunk$set(cache=FALSE)\n\noptions(digits=2, scipen=99)"},{"path":"viz-demo.html","id":"the-grammar-of-graphics","chapter":" 22 Visualization demo","heading":"22.2 The Grammar of Graphics","text":"package ’re going use graphing called ggplot2, part tidyverse. Conceptually, follows principles Leland Wilkinson’s “Grammar Graphics”, written 1999 framework thinking visualizations. purposes, just need understand visualization made several fundamental pieces. ggplot2, :aesthetics (called “aes”) : data plotting? can two dimensions, x-axis, y-axis, column used color another used size. things can see graphic, including values.geometry refers shape column take.scale - transformation might make.facets - creating small multiples splitting one graph many similar graphs, based variable.layers - adding multiple geometries top one another reveal new information, add annoations.’ve used Photoshop Adobe products, idea layering data, annotation, style elements familiar .One quirk ggplot instead %>% pipe command , uses + instead. technical reasons , ’s worth getting …basic structure plot :’re going skip labeling annotation parts now. come layering legends. practice, options can mixed througout command.","code":"      ggplot (  data = df_name, \n                aes (\n                  x = column_name,\n                  y = column_name,\n                  fill = color inside color,\n                  color = border color,\n                  size = size if relevant\n                  )\n                ) +\n                a geometry (eg, geom_point, geom_bar, etc.) with options such as color, fill and size +\n                facet_wrap ( column ~ column ) +\n                any scale information"},{"path":"viz-demo.html","id":"good-resources","chapter":" 22 Visualization demo","heading":"22.2.1 Good resources","text":"R Graphics Cookbook , done entirely ggplot2.R Graphics Cookbook , done entirely ggplot2.data visualization entries R Data Science, Hadley WickhamThe data visualization entries R Data Science, Hadley WickhamData Visualization, Practical Introduction, Kiernan HealyData Visualization, Practical Introduction, Kiernan Healy","code":""},{"path":"viz-demo.html","id":"building-you-graph-in-pieces-using-gapminder","chapter":" 22 Visualization demo","heading":"22.3 Building you graph in pieces using gapminder","text":"Gapminder datast made famous viral 2010 TED talk. contains life expectency income (GDP per capita) country 200 years. data 5-year increments, 2007.","code":""},{"path":"viz-demo.html","id":"subset-to-just-the-latest-years","chapter":" 22 Visualization demo","heading":"22.3.1 Subset to just the latest years","text":"Just pull latest year (2007) practice","code":"\n#what is gapminder? Life expectancy by country, only goes to 2007. Take the latest year.\ngapminder_2007 <-\n  gapminder %>%\n  filter ( year == 2007)\n\nglimpse(gapminder_2007)## Rows: 142\n## Columns: 6\n## $ country   <fct> \"Afghanistan\", \"Albania\", \"Algeria\", \"Angola\", \"Argentina\", …\n## $ continent <fct> Asia, Europe, Africa, Africa, Americas, Oceania, Europe, Asi…\n## $ year      <int> 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, …\n## $ lifeExp   <dbl> 44, 76, 72, 43, 75, 81, 80, 76, 64, 79, 57, 66, 75, 51, 72, …\n## $ pop       <int> 31889923, 3600523, 33333216, 12420476, 40301927, 20434176, 8…\n## $ gdpPercap <dbl> 975, 5937, 6223, 4797, 12779, 34435, 36126, 29796, 1391, 336…"},{"path":"viz-demo.html","id":"the-histogram","chapter":" 22 Visualization demo","heading":"22.3.2 The histogram","text":"One first pieces information often want dataset distribution. values cluster around center? spread ? Let’s histogram life expectency variable.Start plot commmand ggplot, add aesthetics geometry:’ll add options plot make little easier readBut ’m interested different continents look. Try “faceting” continent.","code":"\nggplot( \n        data=gapminder_2007,\n        aes (x = lifeExp )\n      ) +\n      geom_histogram()## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n#make it an outline, with smaller piles.\nggplot ( data= gapminder_2007,\n         aes (x= lifeExp)\n        ) +\n        geom_histogram (binwidth=5, color=\"black\", fill=\"white\")   \nggplot ( data= gapminder_2007,\n         aes (x= lifeExp)\n        ) +\n        geom_histogram (binwidth=5, color=\"black\", fill=\"white\")   +\n        facet_wrap ( ~ continent)"},{"path":"viz-demo.html","id":"try-a-scatter-or-dot-plot","chapter":" 22 Visualization demo","heading":"22.3.3 Try a scatter, or dot plot","text":"","code":""},{"path":"viz-demo.html","id":"save-a-plot-and-add-to-it","chapter":" 22 Visualization demo","heading":"22.3.3.1 Save a plot and add to it","text":"can save plot object rather print immediately, making little easier troubleshoot.doesn’t look like anything! reason didn’t include geometry, shape, values.\nAdd point :built-themes take best practices mixes colors styles, ’ll add one .Let’s add color. Remember, keep adding elements existing plot, don’t start time.now add population size countryLet’s build scratch, also make sure big points don’t overlap little ones much. Note ’ve added scale_x_log10 make x-axis go factors 10 rather 1. (age coronavirus, ’ve gotten used log scales!)","code":"\nmy_plot <-\n  ggplot (\n    data = gapminder_2007,\n    aes (x= gdpPercap , y = lifeExp)\n  )\n#what does this look like?\nmy_plot\nmy_plot <-\n  my_plot +\n  geom_point()\nmy_plot\nmy_plot <-\n  my_plot +\n  theme_minimal()\nmy_plot\nmy_plot <- \n  my_plot +\n  aes (color = continent)\nmy_plot\nmy_plot <- \n  my_plot +\n  aes (size=pop)\n    \nmy_plot\nmy_plot <- \n  ggplot (  data= gapminder_2007 , \n            aes ( x= gdpPercap, \n                  y = lifeExp, \n                  color = continent,\n                  size = pop)\n            ) +\n  geom_point (alpha = 0.7) +\n  theme_minimal() +\n  scale_x_log10()\n  \n  \nmy_plot"},{"path":"viz-demo.html","id":"facet","chapter":" 22 Visualization demo","heading":"22.3.3.2 Facet","text":"Now let’s make little chart continent","code":"\nmy_plot <- \n  my_plot + \n  facet_wrap (~continent)\n\n\nmy_plot"},{"path":"viz-demo.html","id":"adding-interactivity","chapter":" 22 Visualization demo","heading":"22.3.4 Adding interactivity","text":"GGPLOT2 interactive, install different library allow us hover points. case, ’re going use function called paste, puts words together, column aes called “text”:","code":"\n#install.packages(\"plotly\")\nlibrary(plotly)\n\nmy_plot <-\n  ggplot (data = gapminder_2007,\n          aes(text = paste(\"country: \", country),\n              x= gdpPercap ,\n              y = lifeExp,\n              color= continent,\n              size=pop)\n        ) +\n    geom_point( alpha= 0.7) +\n    theme_minimal() +\n    facet_wrap (~continent) +\n    scale_x_log10()\n#We have to make it a ggplotly to get it interactive.\nmy_plot <- ggplotly(my_plot)\n\nmy_plot"},{"path":"viz-demo.html","id":"adding-animation","chapter":" 22 Visualization demo","heading":"22.4 Adding animation","text":"far, ’ve looked year 2007 – wanted look time, say 50 years?\nLet’s take years 1957 2007:Let’s just repeat get original interactive plot, one change: plotly package lets specify “frame” aesthetic, create animation whatever column specify. , ’ve specified year frame:","code":"\ndf_gap <- \n  gapminder %>%\n  filter (between (year, 1957, 2007))\n# and let's just check it\n\ndf_gap %>% \n  group_by (year) %>%\n  summarise (n() ) %>%\n  arrange (year)\nlibrary(plotly)\n#this option forces it to show real numbers, not the 1e things.\noptions (scipen=99)\nmy_plot <-\n  ggplot (data = df_gap,\n          aes(text = paste(\"country: \", country),\n              x= gdpPercap ,\n              y = lifeExp,\n              color= continent,\n              size=pop, \n              frame = year)\n        ) +\n    geom_point( alpha= 0.7) +\n    theme_minimal() +\n    facet_wrap (~continent) +\n    scale_x_log10()\n#We have to make it a ggplotly to get it interactive.\nmy_plot <- ggplotly(my_plot)\nmy_plot"},{"path":"advanced-intro.html","id":"advanced-intro","chapter":"Introduction","heading":"Introduction","text":"section includes miscellaneous tutorials special skills, ranging simple scraping understanding regular expressions. aren’t written yet, things included:Regular Expressions depth : looked simple regular expressions using str_detect R, go -depth, including appendix extract phrases R find using regular expressions. (’s arcane . )Regular Expressions depth : looked simple regular expressions using str_detect R, go -depth, including appendix extract phrases R find using regular expressions. (’s arcane . )Scraping 101: Looking hood HTML page extracting just want dataset.Scraping 101: Looking hood HTML page extracting just want dataset.Cleaning data OpenRefineCleaning data OpenRefine","code":""},{"path":"advanced-regex.html","id":"advanced-regex","chapter":" 23 Regular Expressions for pattern matching","heading":" 23 Regular Expressions for pattern matching","text":"Regular expressions used find replace text based patterns rather characters. ’re particularly useful trying pull apart standardize variables database names, phone numbers addresses make grouping joining effective.human can easily discern name John W. Smith, Jr. Smith, John W Jr probably . computer sees completely different – don’t start characters, commas different places, etc. regular expression can help pull apart names based pieces put back together another form.two three parts regular expression:pattern trying find.optional replacement, use part ’ve found original seeking phase.Options - big one R negate=TRUE, means match everything EXCEPT found.practice, ’ll usually save pieces pattern ’ve found variable, put back together differently.two good tutorials regular expressions:Justin Meyer recent IRE conference can serve guide.Prof. Christian McDonald UT-AustinIf ’re using R, can use regex using stringr package (part tidyverse) using functions str_detect , str_extract cousins. look like :","code":"    str_detect(var_name, regex(\"pattern\")) "},{"path":"advanced-regex.html","id":"types-of-regular-expression-patterns","chapter":" 23 Regular Expressions for pattern matching","heading":"23.1 Types of regular expression patterns","text":"","code":""},{"path":"advanced-regex.html","id":"literal-strings","chapter":" 23 Regular Expressions for pattern matching","heading":"23.1.1 Literal strings","text":"just letters, like “abc” “Mary”. case-sensitive different using text filter.can tell regex want find pattern beginning end line:","code":"  ^   = \"Find only at the beginning of a line\"\n  $   = \"Find only at the end of a line\""},{"path":"advanced-regex.html","id":"wild-cards","chapter":" 23 Regular Expressions for pattern matching","heading":"23.1.2 Wild cards","text":"wild card character use indicate word “anything”. ways use wild cards regex:Regular expressions also wild cards specific types. R, “escaped” using two backslashes. languages example https://regex101.com site use one backslash:upper-case , ’s opposite:","code":"    .      = \"any single character of any type\"\n    .?     = \"a possible single character of any type (but it might not exist)\"\n    .*     = \"anything or nothing of any length\"\n    .+     = \"anything one or more times\"\n    .{1,3} = \"anything running between 1 and 3 characters long\"      \\\\d   = \"Any digit\"\n      \\\\w   = \"Any word character\"\n      \\\\s   = \"Any whitespace (tab, space, etc.)\"\n      \\\\b   = \"Any word boundary\" (period, comma, space, etc.)      \\\\D = \"Anything but a digit\""},{"path":"advanced-regex.html","id":"character-classes","chapter":" 23 Regular Expressions for pattern matching","heading":"23.1.3 Character classes","text":"Sometimes want tell regex characters allowed accept. example, say don’t know whether alternative spelling name – can tell regex either ignore character, take one several.R, saw alternative spellings words like “summarize” – British American spellings. , example, use pattern pick either spelling:bracket tells regex ’s allowed take either one characters. can also use ranges:means lower case, upper case numeric character allowed.","code":"        summari[sz]e  [a-zA-Z0-9]"},{"path":"advanced-regex.html","id":"escaping","chapter":" 23 Regular Expressions for pattern matching","heading":"23.1.4 Escaping","text":"’re already used special purposes, characters “escaped” can search . Notably, parentheses (), periods, backslashes, dollar signs, question marks, dashes carets.means find period question mark, use patternIn Regex101, biggest difference among flavors regex – Python generally requires least amount escaping.","code":"    \\\\. or\n    \\\\?"},{"path":"advanced-regex.html","id":"match-groups","chapter":" 23 Regular Expressions for pattern matching","heading":"23.1.5 Match groups","text":"Use parentheses within pattern pick pieces, can use . end chapter shows R, little complicated haven’t done much lists.","code":""},{"path":"advanced-regex.html","id":"sample-data","chapter":" 23 Regular Expressions for pattern matching","heading":"23.2 Sample data","text":"three small text files can copy paste browser regex101.com site. ’s site lets test regular expressions, explaining ’s happening .list phone numbers different formatsA list dates need convert different form.list addresses multiple lines, need pull pieces. (Courtesy IRE)small chunk H2B visa applications Arizona companies worksites kind messed demonstration, tab-delimited format.","code":""},{"path":"advanced-regex.html","id":"testing-and-examining-patterns-with-regex101","chapter":" 23 Regular Expressions for pattern matching","heading":"23.3 Testing and examining patterns with Regex101","text":"Regex 101 website lets copy part data box, test different patterns see get applied. Regular expressions difficult write read, Regex101 lets little piece time. Just remember every time use ‘' regex101, need’\\` R.","code":""},{"path":"advanced-regex.html","id":"looking-for-specific-words-or-characters","chapter":" 23 Regular Expressions for pattern matching","heading":"23.3.1 Looking for specific words or characters","text":"easiest regex one just characters ’re looking know right case. ’re called literals literally looking letters characters.","code":""},{"path":"advanced-regex.html","id":"practice-1-extract-date-parts","chapter":" 23 Regular Expressions for pattern matching","heading":"23.4 Practice #1: Extract date parts","text":"Regex 101, change “Flavor” “Python” – otherwise, escape characters.25We want turn dates look like :something looks like :Copy paste numbers regex 101 window:First, can use digit using pattern “. Try pieces. First, see can find one two digits beginning line.Try coming rest type answer:(works regular expressions normally “greedy”. , tell “one two digits”, always take two exist.)Put parentheses around pieces want use later:Now piece section, numbered 0 whole match, 1-3 pieces.","code":"  1/24/2018 2008-1-249/7/2017\n9/11/1998\n9/11/2017\n9/19/2018\n9/15/2017\n10/13/2019\n11/3/2017  ^\\d{1,2}  ^\\d{1,2}.\\d{1,2}.\\d{4}"},{"path":"advanced-regex.html","id":"practice-2-extract-pieces-of-phone-numbers","chapter":" 23 Regular Expressions for pattern matching","heading":"23.5 Practice #2: Extract pieces of phone numbers","text":"phone numbers different formats:little complicated looks, try piecing together one says:(won’t work “substitute” area – easier create new variable results replace originals.)Anything within parentheses “captured” block.","code":"    623-374-1167\n    760.352.5212\n    831-676-3833\n    (831)-676-3833\n    623-374-1167 ext 203\n    831-775-0370\n    (602)-955-0222  x20\n    928-627-8080\n    831-784-1453      (\\d{3})[-.\\)]+(\\d{3})[-.]+(\\d{4})"},{"path":"advanced-regex.html","id":"practice-3-extract-address-pieces","chapter":" 23 Regular Expressions for pattern matching","heading":"23.6 Practice #3: Extract address pieces","text":"lines data Prof. McDonald’s tutorial, can copy paste go exercise. (uses Javascript version regular expressions, purposes exercise, doesn’t matter one use. choose Python, ’ll one extra step, putting slash () quotes. colors work little better leave default PHP method.)","code":"    \"10111 N LAMAR BLVD\n    AUSTIN, TX 78753\n    (30.370945933000485, -97.6925542359997)\"\n    \"3636 N FM 620 RD\n    AUSTIN, TX 78734\n    (30.377873241000486, -97.9523496219997)\"\n    \"9919 SERVICE AVE\n    AUSTIN, TX 78743\n    (30.205028616000448, -97.6625588019997)\"\n    \"10601 N LAMAR BLVD\n    AUSTIN, TX 78753\n    (30.37476574700048, -97.6903937089997)\"\n    \"801 E WILLIAM CANNON DR Unit 205\n    AUSTIN, TX 78745\n    (30.190914575000477, -97.77193838799968)\"\n    \"4408 LONG CHAMP DR\n    AUSTIN, TX 78746\n    (30.340981111000474, -97.7983147919997)\"\n    \"625 W BEN WHITE BLVD EB\n    AUSTIN, TX 78745\n    (30.206884239000487, -97.7956469989997)\"\n    \"3914 N LAMAR BLVD\n    AUSTIN, TX 78756\n    (30.307477098000447, -97.74169675199965)\"\n    \"15201 FALCON HEAD BLVD\n    BEE CAVE, TX 78738\n    (30.32068282700044, -97.96890311999965)\"\n    \"11905 FM 2244 RD Unit 100\n    BEE CAVE, TX 78738\n    (30.308363203000454, -97.92393357799966)\"\n    \"3801 JUNIPER TRCE\n    BEE CAVE, TX 78738\n    (30.308247975000484, -97.93511531999968)\"\n    \"12800 GALLERIA CIR Unit 101\n    BEE CAVE, TX 78738\n    (30.307996778000472, -97.94065088199966)\"\n    \"12400 W SH 71 Unit 510\n    BEE CAVE, TX 78733\n    (30.330682136000462, -97.86979886299969)\"\n    \"716 W 6TH ST\n    AUSTIN, TX 78701\n    (30.27019732500048, -97.75036306299967)\"\n    \"3003 BEE CAVES RD\n    ROLLINGWOOD, TX 78746\n    (30.271592738000436, -97.79583786499967)\""},{"path":"advanced-regex.html","id":"on-your-own","chapter":" 23 Regular Expressions for pattern matching","heading":"23.7 On your own","text":"small list H2A visa applications, requests agricultural seasonal workers, companies worksites Arizona. Try importing Excel, copying cells practice regular expression skills.might try:Finding LLC’s list (limited liability companies) names. (turn case-insensitive flag Regex 101 set flag program .)See far can get standardizing addresses.Split city, state zip code worksite.Find jobs related field crops lettuce celery.","code":""},{"path":"advanced-openrefine.html","id":"advanced-openrefine","chapter":" 24 Open refine walkthrough","heading":" 24 Open refine walkthrough","text":"OpenRefine program designed help clean standardize data. OpenRefine can little hard computer – doesn’t handle large datasets well, seems work much better Chrome browsers.walkthrough goes PPP data ) clean city names, b) standardize borrower names, c) split suite detailed address street addresses.Right-click download data walkthrough save projects folder","code":""},{"path":"advanced-openrefine.html","id":"installing-openrefine","chapter":" 24 Open refine walkthrough","heading":"24.1 Installing OpenRefine","text":"Download latest version OpenRefine website follow instructions install.","code":""},{"path":"advanced-openrefine.html","id":"mac-users-unidentified-developer","chapter":" 24 Open refine walkthrough","heading":"Mac users: Unidentified developer","text":"Mac users, try open , may tell can’t ’s unidentified developer. Go Applications folder computer, use CTL button click OpenRefine diamond. successfully open , program whitelisted computer shouldn’t .","code":""},{"path":"advanced-openrefine.html","id":"windows-users","chapter":" 24 Open refine walkthrough","heading":"Windows users","text":"Windows users take “Windows kit embedded Java” rather trying install right version Java . may go Windows Defender settings set exclusion allows Windows run , get system administrator allow use . set .","code":""},{"path":"advanced-openrefine.html","id":"limitations","chapter":" 24 Open refine walkthrough","heading":"Limitations","text":"OpenRefine works entirely memory, start choking pretty quickly reach 100,000 200,000 row range. might need partition data pull just columns want work order clean large dataset.","code":""},{"path":"advanced-openrefine.html","id":"following-the-walkthrough","chapter":" 24 Open refine walkthrough","heading":"Following the walkthrough","text":"Steps take shown bullet points. rest explanation.","code":""},{"path":"advanced-openrefine.html","id":"starting-openrefine","chapter":" 24 Open refine walkthrough","heading":"24.2 Starting OpenRefine","text":"OpenRefine Java-based program runs inside browser, lives computer instead internet. runs much better Chrome Safari.Find OpenRefine app computer, double-click. first start , open default browser.Find OpenRefine app computer, double-click. first start , open default browser.’s Chrome, open Chrome window type local address address bar: localhost:3333 127.0.0.1:3333If ’s Chrome, open Chrome window type local address address bar: localhost:3333 127.0.0.1:3333Once ’s open browser, ’ll see something looks like :first screen","code":""},{"path":"advanced-openrefine.html","id":"importing-data","chapter":" 24 Open refine walkthrough","heading":"24.3 Importing data","text":"OpenRefine works best comma- tab-delimited data. create dataset like R, use function write_csv(\"path--csv-file.csv\") , can used like verb continuation pipe.follow along tutorial, download sample data file save R project folder .follow along tutorial, download sample data file save R project folder .OpenRefine, look left screen choose Create Project->Choose files, navigate folder saved . Choose file just saved, consider changing name project something file name. called mine “ppp refined”.26In OpenRefine, look left screen choose Create Project->Choose files, navigate folder saved . Choose file just saved, consider changing name project something file name. called mine “ppp refined”.26import screenUsually, default selections bottom work. ’re pretty self-explanatory, data looks weird imported, take look options .usually keep everything “text” OpenRefine doesn’t work well dates numbers text. case, ’ve removed amounts dates data ’re working .Click “Create Project” button continue.","code":""},{"path":"advanced-openrefine.html","id":"returning-to-your-project","chapter":" 24 Open refine walkthrough","heading":"Returning to your project","text":"can also use startup screen re-open project ’ve previously worked . don’t need save – OpenRefine saves background. Use Open tab find projects. need move project another computer, can use Export options ’s open.","code":""},{"path":"advanced-openrefine.html","id":"rename-or-copy-columns","chapter":" 24 Open refine walkthrough","heading":"Rename or copy columns","text":"Eventually, ’ll want re-import results cleaning R programming environment, cause end trouble can’t match original data, columns names.work column, sure either rename copy new column. Someday ’ll thank .rename something relatively simple clean, project_county PPP data, use dropdown menu, choose Edit column->Rename column . usually call whatever column name started suffix _refined.Rename columns project_county project_state now.make copy, use dropdown menu Edit column->Add column based column give name.","code":""},{"path":"advanced-openrefine.html","id":"facets","chapter":" 24 Open refine walkthrough","heading":"24.4 Facets","text":"many text columns, can use facets edit data. newly named project_state_refined, choose Facet->Text facet get menu left. show values found column, number times one appears, much like group_by query.OpenRefine acts rows selected, makes using facets filtering powerful. never worry ’re changing something don’t see.facetTo edit one one, click state name want change, choose Edit option. might combine states “” state.faster way change everything selected column’s menu.Select “AZ” facet list, choose invert top box select everything except AZ.Select “AZ” facet list, choose invert top box select everything except AZ.column dropdown, choose Facet->Edit Cells->Transform, type “” (quotes) value box. (forget quotes, ’ll see come Null answer ’s looking variable called , word “”)column dropdown, choose Facet->Edit Cells->Transform, type “” (quotes) value box. (forget quotes, ’ll see come Null answer ’s looking variable called , word “”)selection , change county name “STATE” using method.selection , change county name “STATE” using method.","code":""},{"path":"advanced-openrefine.html","id":"clustering","chapter":" 24 Open refine walkthrough","heading":"24.5 Clustering","text":"One reason lot reporters use OpenRefine take advantage fuzzy-matching clean items like names addresses. provides dozen different algorithms provide suggestions ways change unstandardized values column often make lot sense.walkthrough work city name.Make copy city call borrower_city_refined using dropdown Edit column->Add column based column . Otherwise risk -writing things incorrectly, ’ll try figure went wrong.add columnNow create facet new column.see bad values entered column lenders applicants. one cared whether valid city name.","code":""},{"path":"advanced-openrefine.html","id":"clustering-details","chapter":" 24 Open refine walkthrough","heading":"Clustering details","text":"’ll often use many clustering approaches, finish filters facets clustering doesn’t work.algorithms work better others – don’t catch natural clusters, others find lot things cluster shouldn’t combined. ’s unimportant us actually behind scenes. Insetad, just know different methods find near-exact matches among character values.One might look words letters order, another might look everything matches shortest phrase, another might look 2 words common. order suggested OpenRefine generally goes strict forgiving method, easiest computer resource-intensive. 27On facet, press button says “Cluster”. first one chosen, called “key collision” “fingerprint”, doesn’t come suggestions.facet, press button says “Cluster”. first one chosen, called “key collision” “fingerprint”, doesn’t come suggestions.Use dropdown menu Keying Function box choose next option, “ngram-fingerprint”, leave option 2.Use dropdown menu Keying Function box choose next option, “ngram-fingerprint”, leave option 2.clusterNow can see close choices .Look choices, select want combine. OpenRefine change least popular entry popular, can change want box provided. (first, ’ll probably “Select ” just un-select bad ones.)Look choices, select want combine. OpenRefine change least popular entry popular, can change want box provided. (first, ’ll probably “Select ” just un-select bad ones.)Keep going clustering methods, turning ones ’re sure combined editing value want . exploring options, often end going back ngram-fingerprint method changing Ngram size 1. often catches last remnants one-word cities.Keep going clustering methods, turning ones ’re sure combined editing value want . exploring options, often end going back ngram-fingerprint method changing Ngram size 1. often catches last remnants one-word cities.ngramSpend 10-15 minutes cleaning cities, see close can get good list.Pro tip: Don’t try everything clustering. can’t really fine-tune choices, just stop ’s getting close. can remaining things care manually. Try get obsessed getting perfect. ’ll spend days things won’t matter, especially early stages reporting don’t know care .","code":""},{"path":"advanced-openrefine.html","id":"facet-for-long-entries","chapter":" 24 Open refine walkthrough","heading":"Facet for long entries","text":"list, though, addresses listed cities. may just want remove city names entirely, since don’t really know . several ways might :Use Facet->Customized facets->Text length facet menu item create facet string length. Use scrollbar choose, say, 20 25 characters.Go list select ones changed, thenInvert selection use Transform menu change city “Unknown”.got rid . can go back original facet select ones top change well.list isn’t perfect, ’s much better started .","code":""},{"path":"advanced-openrefine.html","id":"filtering-2","chapter":" 24 Open refine walkthrough","heading":"24.6 Filtering","text":"Even fixing cities can clustering faceting, usually bad entries left .","code":""},{"path":"advanced-openrefine.html","id":"simple-filter","chapter":" 24 Open refine walkthrough","heading":"24.6.1 Simple filter","text":"Instead Text Facet, choose Text filter dropdown menu. Generally, use regular expressions box can control column target word letters falls.Instead Text Facet, choose Text filter dropdown menu. Generally, use regular expressions box can control column target word letters falls.Try filtering ^Phoe checking “regular expression” box, ’ll see stray entries Phoenix can change facet window.Try filtering ^Phoe checking “regular expression” box, ’ll see stray entries Phoenix can change facet window.tend anything really care getting right, larger cities towns going report . ’s often worth time get large list 100% accurate.","code":""},{"path":"advanced-openrefine.html","id":"complex-filter","chapter":" 24 Open refine walkthrough","heading":"Complex filter","text":"complex filter help tag items later use. One example tag items contain apartment numbers, suite numbers floor numbers address. Eventually, may want split address column two – one piece street address, one piece detailed location.Filtering first ensures won’t inadvertently split something hasn’t met condition first place.Regular expressions work way str_detect R, except one backslash rather two special characters.example find anything word Suite Ste least 10 characters: .{10,}\\bS(ui)?te\\bexample regexUsing filters, can start splitting values pieces.","code":""},{"path":"advanced-openrefine.html","id":"split-by-regex","chapter":" 24 Open refine walkthrough","heading":"Split by regex","text":"Choose Edit column->Split several columns… dropdown menu, use regular expression “split” character. Make sure un-check “Guess cell type” “Remove column” boxes.can go back look entries “floor” “apt” way, split subsequent steps.","code":""},{"path":"advanced-openrefine.html","id":"split-using-openrefine-programming-language","chapter":" 24 Open refine walkthrough","heading":"Split using OpenRefine programming language","text":"took care ones Suite numbers . Now get ones Apartment numbers . Use regular expression filter apartment numbers, Customized Facet->Facet null pick ones haven’t already split previous step.OpenRefine special language called GREL, really hard use. ’ll use set ’ve already split something else. time, put value two columns based pieces regular expression.filter , choose borrower_address_refined_2’s Transform menu. ’ll just show , since ’s hard explain:-“Expression” box, copy paste code:cells[\"borrower_address_refined\"].value.match(/(.+)?\\b(Apt .*)\\b$/)[1]tells OpenRefine extract two pieces original address column: beginning (.+)?, word “Apt” followed anything end. [1] tells OpenRefine take 2nd (counting starts zero, one) put column used Suite numbers. (NOTE: GREL regular expressions indicated two slashes beginning end phrase (/). typical regular expressions, distinguishes plain text.)Repeat process, borrower_address_refined_1 column’s transformation, use index [0] end get cleaned street address.","code":""},{"path":"advanced-openrefine.html","id":"finishing-up","chapter":" 24 Open refine walkthrough","heading":"24.7 Finishing up","text":"Try using clustering transformation options clean borrower names. change ones sure combined.’re done, export project new .csv file, import R. can select cleaned columns loan_id , join back original PPP data frame. Now good set cities, better ways look popular addresses, etc.want try another exercise, old workshop IRE 2016.","code":""},{"path":"advanced-scrape1.html","id":"advanced-scrape1","chapter":" 25 Scraping without programming","heading":" 25 Scraping without programming","text":"book introduce scraping websites three sections.section contains vocabulary need strategies avoid scraping altogether finding data already computer using Google Sheets simple lists.next chapter reviews t o pick apart page using R library rvest, used parse web pages.last chapter shows programmatically walk lot pages recompile detailed larger dataset. chapter also introduce concept looping, briefly mentioned inth introduction programming.","code":""},{"path":"advanced-scrape1.html","id":"where-reporters-get-data","chapter":" 25 Scraping without programming","heading":"25.1 Where reporters get data","text":"Reporters can get data people, using FOIA, asking nicely finding whistleblower leak . often also get data publicly published sources, usually web.three ways get data web:Download , use API28. cases, makers data specifically offered use useful format. ’ll cover API’s later, don’t forget study site download link option. isn’t one government site, might call agency ask add one. might just . ’ve using downloadable data throughout book.Download , use API28. cases, makers data specifically offered use useful format. ’ll cover API’s later, don’t forget study site download link option. isn’t one government site, might call agency ask add one. might just . ’ve using downloadable data throughout book.Find browser. Often person making website delivers structured data browser convenience. ’s easier make interactive items page using data ’ve already delivered visualizations tables. also reduces loads servers. usually JSON format. might able find right computer. ’s miracle!Find browser. Often person making website delivers structured data browser convenience. ’s easier make interactive items page using data ’ve already delivered visualizations tables. also reduces loads servers. usually JSON format. might able find right computer. ’s miracle!Scrape . set chapters goes scrape content delivered HTML form – web page. methods scrape PDFs, can easy hard.Scrape . set chapters goes scrape content delivered HTML form – web page. methods scrape PDFs, can easy hard.","code":""},{"path":"advanced-scrape1.html","id":"a-json-miracle-walkthrough","chapter":" 25 Scraping without programming","heading":"25.2 A json miracle walkthrough","text":"walkthrough shows find json browser. Use Chrome browser - Firefox Safari also similar features, look different.simple page show json looks like extract . human sees:table presidents actually produced using small javascript program inside HTML walks item lists row.Open page Chrome, right-click anywhere page choose “Inspect”. may appear just two items - “head” “body”. notice little arrows - show content underneath. now, ’ll ignore , important later.Open page Chrome, right-click anywhere page choose “Inspect”. may appear just two items - “head” “body”. notice little arrows - show content underneath. now, ’ll ignore , important later.Choose Network tab, re-load page.Choose Network tab, re-load page.inspect networkThis shows everything browser attempting load browser. (may see “favicon” item. idea ’s showing mine - ’s requested!)can ignore . Importantly, “simple-page.html” actual page, “simple.json” data! Click simple.json row, choose “Response” tab:simple jsonThat’s json looks like - list rows within item called “presidents”, identified name column ’ll become.29Right-click simple.json file name, ’ll see lot options. Choose one says Copy->Copy link address.Right-click simple.json file name, ’ll see lot options. Choose one says Copy->Copy link address.Go new browser window search “json csv”. one one often see first.Go new browser window search “json csv”. one one often see first.Paste copied link tab says, “Enter URL” press “Load URL”. ’ll see option copy result csv file!Paste copied link tab says, “Enter URL” press “Load URL”. ’ll see option copy result csv file!json csv","code":""},{"path":"advanced-scrape1.html","id":"a-harder-example","chapter":" 25 Scraping without programming","heading":"25.2.1 A harder example","text":"easy! ’s also trivial. However, method can often save page results page. One example Maricopa County nightly list mugshots, may several hundred new entries day. ’s today’s looked like desktop browser (looks different smaller screen).30:mcso listIt looks like ’d go five pages get names people booked jail night, often json file contains – ’re just showing one page time.page won’t let right-click get inspector. Instead, Mac, press Opt-Cmd-C open inspector window. (think ’s Shft-Ctl-C Windows, ’m sure.)looks like mess! Don’t worry. Switch Network tab, re-load page. time, dozens different things get loaded page, none obviously json. strategies find .Press “Fetch/XHR” tab see shows . Use “Preview” tab look , , miracle miracles, ’s third one list! Even better, 425 entries! (looks like ’re split groups 100, really aren’t.)miracle 1Right-click name file, choose Copy->Copy link, repeat process convert CSV file.","code":""},{"path":"advanced-scrape1.html","id":"an-even-harder-example","chapter":" 25 Scraping without programming","heading":"25.2.2 An even harder example","text":"New York Times maintains map vaccination rates various demographic groups county website. first, Times didn’t provide Github repo data. can extract data map?easiest way see contains json miracle!Open inspector panelCopy paste link map page, open Chrome browser inpsectors showing.Switch network tab. (opened map opening inspector, reload now. )Yikes! “Fetch /XHR” button doesn’t help us much . many different json files check. look one one see ’re right, sometimes ’s just hard. Instead,Open “Search” button inspector (’s different Filter), type county name (one “Maricopa”). see . promising “doses_county.json”, try one first:nyt exampleThis time, ’s hard find item list files browser. Instead, right-click “Preview” area, copy object. can paste box JSON csv converter instead entering URL.","code":""},{"path":"advanced-scrape1.html","id":"no-json-no-problem-maybe","chapter":" 25 Scraping without programming","heading":"25.3 No json? No problem (maybe)","text":"may able find json file – either ’s hard find, ’s useful, doesn’t exist. simple page, ’s problem getting data Google Sheets. (one area Excel lags behind Google Sheets.) ’ll go HTML tags depth next chapter, data held table structured list, can import directly Google sheets.Note trick really useful page doesn’t change lot, just want one-time snapshot. doesn’t automatically update, don’t know capture changes – involve Google scripting program, don’t know . ’ve never learned usually gather data use, ’s easier program finagle Google Sheets.trick using Google Sheets find table tag (<table>) list tag (<ul> <ol>) contains data want.’s example, taken previous year’s MAIJ cohort: Reporters wanted know whether Scottsdale relatively unique city council structure, districts. members -large. research suggests disempowers non-white less wealthy areas, privileged residents often active local politics.reporters knew rare, one question nagged : Scottsdale largest city nation purely -large council? make nice tidbit story, wasn’t worth major data collection endeavor.Ballotpedia, crowdsourced website information local governments, collected page city council officials 100 largest cities US. Extracting information structured table, using regular expressions, help make relatively simple job. even done Google Sheets, also regular expression implementation. ’s rare, just getting list cities district ward membership give place start looking populations.” element.Right-click page, open inspector. looks like mess, can search tables using simple “Find” using Cmd (Ctl) -F.may notice says can find string, selector XPath.box, enter “<table” (opening “<”, closing one.). see “1 12” result box. go list, currently selected table highlighted. hit “3 12”, ’ll notice browser selected table want. ’s information need.box, enter “<table” (opening “<”, closing one.). see “1 12” result box. go list, currently selected table highlighted. hit “3 12”, ’ll notice browser selected table want. ’s information need.Open Google Sheet, copy page URL cell A1. just makes easier construct formula extract table.Open Google Sheet, copy page URL cell A1. just makes easier construct formula extract table.cell A3, enter following formula:cell A3, enter following formula:means, “Go web address listed cell A1, look ”table” tags, return whatever third one.”googlesheetWhen hit “enter” whole table populate Google Sheet. Unfortunately, can’t get link city method, means don’t good way extract city name. ’ll come back go scraping R. (way get Google Sheets, ’s reliable – choke soon encounters missing URL.)just need text table list spreadsheet, easy way get . (get list “ol” “ul” (ordered unordered lists) tag, use “list” instead “table”.)Sometimes – especially modern websites create interactive elements fly – data need already sitting computer. fact, ’s quite hard scrape ways HTML created ’s loaded browser.’s , may another simple way get content.problem getting content without programming can leave unsatisfied can get text, underlying information. next chapter shows one method getting information web page using CSS selectors.sometimes use Chrome extension called “Chrome Scraper” get slightly complex information website, uses language called XPath parse web page. ’s harder CSS selector method, though, ’m skipping now.\"Data Reporting, Spring 2022\" written Sarah Cohen. last built 2022-03-31.book built bookdown R package.","code":"      \n      =ImportHTML(A1, \"table\", 3)"},{"path":"advanced-scrape1.html","id":"recap","chapter":" 25 Scraping without programming","heading":"25.4 Recap","text":"Sometimes – especially modern websites create interactive elements fly – data need already sitting computer. fact, ’s quite hard scrape ways HTML created ’s loaded browser.’s , may another simple way get content.problem getting content without programming can leave unsatisfied can get text, underlying information. next chapter shows one method getting information web page using CSS selectors.sometimes use Chrome extension called “Chrome Scraper” get slightly complex information website, uses language called XPath parse web page. ’s harder CSS selector method, though, ’m skipping now.","code":""},{"path":"advanced-scrape2.html","id":"advanced-scrape2","chapter":" 26 Introduction to scraping in R","heading":" 26 Introduction to scraping in R","text":"chapter introduces rvest – short “harvest” - library R. See glossary Appendix terms used tutorial.lot really good tutorials web rvest. :chapter advanced data wrangling textbook used Stanford. (whole book pretty good, good now ’re longer beginners.) uses page World Data famines example.chapter advanced data wrangling textbook used Stanford. (whole book pretty good, good now ’re longer beginners.) uses page World Data famines example.free chapter DataQuest basics scrapingA free chapter DataQuest basics scrapingCronkite students: also posted PDF’s Canvas DataCamp’s scraping course, can’t shared publicly. ’re clearer lot tutorials can used reference. next weeks, ’ll get 6 months’ access site send link join.chapter assumes , now, relatively comfortable R code chunks. particular, ’s assumed know assign output piece code new variable, understand pipe structure key verbs tidyverse.","code":""},{"path":"advanced-scrape2.html","id":"understanding-a-web-page-and-its-structure","chapter":" 26 Introduction to scraping in R","heading":"26.1 Understanding a web page and its structure","text":"Web pages written HTML, even don’t “html” end file name.HTML like upside-tree. trunk, <html> tag, two main branches: <head> <body>. content page branches body tag:Datacamp html treeAll HTML just text. tags tell browser render element, attributes give extra information, like URL link, formatting class.can navigate tree using RVest.Open create project RStudio, create new document. can new markdown document, R Script.Open create project RStudio, create new document. can new markdown document, R Script.code load two libraries:code load two libraries:Select lines, either press Ctl-Enter choose “Run” top screen run lines selected.library rvest parses tree distinct elements, retaining structure tree. read_html() function takes chunk text, page saved computer, page internet parses pieces.’re going parse page using “css selectors”, tells program navigate page. css selector can use tag , attribute, find elements page. case, one table, can just find one element using “table” tag.method scraping doesn’t work page created fly executing Javascript program browser, way simple page last chapter . pages usually json dataset can grab easily.’s page looks like rendered, full tree shown right.full pageParse simple page address shown pieces, save result my_htmlYou may notice ’ve broken code one thing time. First, saves address variable called “url”. uses piping used data work.31This complex object, ’re seeing beginning – two elements top tree. ’ll notice new object (new word “variable”) list rather data frame environment. Lists used store complicated structures don’t fit neatly rectangle.find element, like table, use tag html_node() . find elements type, make plural, like html_nodes().32Use tag name CSS selector get just piece page.get paragraphs, make command plural. Note now get HTML selected elements entirety.get everything class “intro”, use period indicate class, convert text using html_text function, asking R remove extra whitespace “trim” argument.","code":"\nlibrary(tidyverse)\nlibrary(rvest) \nurl <- \"https://cronkitedata.s3.amazonaws.com/docs/presidents.html\"\n\nmy_html <-\n  url %>%  \n  read_html\n\n\nprint(my_html)## {html_document}\n## <html>\n## [1] <head>\\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8 ...\n## [2] <body>\\n   <h1>A heading<\/h1>\\n   <p class=\"intro\"> This is  a paragraph  ...\nmy_html %>%\n html_node(\"body\") ## {html_node}\n## <body>\n## [1] <h1>A heading<\/h1>\n## [2] <p class=\"intro\"> This is  a paragraph with italic<\/p>\n## [3] <div>\\n     <p> This is a simple table<\/p>\\n     <table>\\n<thead><tr>\\n<t ...\nmy_html %>%\n  html_nodes (\"p\")## {xml_nodeset (2)}\n## [1] <p class=\"intro\"> This is  a paragraph with italic<\/p>\n## [2] <p> This is a simple table<\/p>\nmy_html %>%\n  html_nodes (\".intro\") %>%\n  html_text (trim=T)## [1] \"This is  a paragraph with italic\""},{"path":"advanced-scrape2.html","id":"a-special-type-table","chapter":" 26 Introduction to scraping in R","heading":"A special type: table","text":"Tables commonly scraped rvest special way extract values, just Google Sheets, puts right data frame:singular version html_node picks first piece matches selector. plural version result list , can select number want using odd syntax .[[n]], “n” table number.","code":"\nmy_html %>%\n  html_node (\"table\")  %>%\n  html_table"},{"path":"advanced-scrape2.html","id":"a-harder-example-ballotpedia","chapter":" 26 Introduction to scraping in R","heading":"A harder example: Ballotpedia","text":"’s example using ballotpedia page used last section:Looking , several ways get proper table. can pick third element just got:, might notice “id” attribute called ‘officeholder-table’.print , ’ll see something like :office image","code":"\nurl <-\"https://ballotpedia.org/List_of_current_city_council_officials_of_the_top_100_cities_in_the_United_States\"\n\nballotpedia <- \n  url %>%\n  read_html %>%\n  html_nodes (\"table\")\n\nprint (ballotpedia)## {xml_nodeset (12)}\n##  [1] <table class=\"infobox\" style=\"text-align: center; width:200px\"><tbody>\\n ...\n##  [2] <table class=\"bptable sortable collapsible collapsed\" style=\"background: ...\n##  [3] <table class=\"bptable gray sortable\" id=\"officeholder-table\" style=\"widt ...\n##  [4] <table class=\"wikitable;\" style=\"width=100%\"><tbody>\\n<tr>\\n<th colspan= ...\n##  [5] <table class=\"navbox\" cellspacing=\"0\" style=\";\"><tbody><tr><td style=\"pa ...\n##  [6] <table cellspacing=\"0\" class=\"nowraplinks collapsible autocollapse\" styl ...\n##  [7] <table class=\"navbox\" cellspacing=\"0\" style=\";\"><tbody><tr><td style=\"pa ...\n##  [8] <table cellspacing=\"0\" class=\"nowraplinks collapsible autocollapse\" styl ...\n##  [9] <table class=\"navbox\" cellspacing=\"0\" style=\";\"><tbody><tr><td style=\"pa ...\n## [10] <table cellspacing=\"0\" class=\"nowraplinks collapsible autocollapse\" styl ...\n## [11] <table class=\"navbox\" cellspacing=\"0\" style=\";\"><tbody><tr><td style=\"pa ...\n## [12] <table cellspacing=\"0\" class=\"nowraplinks collapsible autocollapse\" styl ...\nballotpedia[[3]]## {html_node}\n## <table class=\"bptable gray sortable\" id=\"officeholder-table\" style=\"width:auto; border-bottom:1px solid #bcbcbc;\">\n## [1] <thead><tr colspan=\"5\" style=\"background:#4c4c4c!important;color:#fff!imp ...\n## [2] <tbody>\\n<tr>\\n<td style=\"padding-left:10px;\"><a href=\"https://ballotpedi ...\noffice_holders <-\n  url %>%\n  read_html %>%\n  html_node(\"#officeholder-table > tbody\")"},{"path":"advanced-scrape2.html","id":"getting-the-link","chapter":" 26 Introduction to scraping in R","heading":"26.1.1 Getting the link","text":", Google Sheets, way pick list links tell us city member . tried, Google Sheets choked missing links. ’s also true use html_table() function turn data frame:now can get list names cities extracting “attribute” tag. (little harder ’d intended every row link, meaning rejigger formula create empty rows link doesn’t exist.)’ve never done , can add list column data frame using tidyverse add_column syntax. time, can put regular expression muscles work “extracting” rather “detecting” pattern:(str_extract () function matches everything last slash , character class negated. means “take everything end slash .”)","code":"\noffice_table <- \n  url %>%\n  read_html %>%\n  html_node(\"#officeholder-table\") %>%  # keep the whole table to get headings \n  html_table\ncity_links <-\n  ballotpedia[[3]] %>%  # the third table in our list\n  html_nodes (\"tbody > tr\") %>%  # all rows\n  html_node (\"td > a\") %>%  # justlink tag in the first column \n  html_attr(\"href\")  # the URL\noffice_table %>%\n  add_column (city=city_links, .before=\"Office\") %>%\n  mutate (city = str_extract(city, \"[^/]+$\")) %>%\n  head()"},{"path":"advanced-scrape2.html","id":"your-turn-1","chapter":" 26 Introduction to scraping in R","heading":"26.2 Your turn","text":"lot people use IMDB pages practice scraping HTML little primitive. Try extracting name, year, rating, rank item list https://www.imdb.com/chart/toptv/?ref_=nv_tvv_250Hints:right-click table, ’ll see table attribute class=\"chart full-width\" . means can use class selector .chart > table . use plural, list one item . use singular, table .right-click table, ’ll see table attribute class=\"chart full-width\" . means can use class selector .chart > table . use plural, list one item . use singular, table .get three columns data frame text, html_table(trim=T)get three columns data frame text, html_table(trim=T)year held span element class “secondaryInfo” first column. See can figure get . 33The year held span element class “secondaryInfo” first column. See can figure get . 33To extract title link, use tagTo extract title link, use tagTo get full information rating column, including number votes ’s based , use strong tag title attribute. See can figure one .get full information rating column, including number votes ’s based , use strong tag title attribute. See can figure one .put together, use add_column() verbTo put together, use add_column() verb","code":""},{"path":"advanced-scrape2.html","id":"cheat-sheet","chapter":" 26 Introduction to scraping in R","heading":"26.3 Cheat sheet","text":"","code":""},{"path":"advanced-scrape2.html","id":"html-tags-elements","chapter":" 26 Introduction to scraping in R","heading":"HTML tags / elements","text":"tag opening closing . “p” open close tag looks like, text inside shown page:list common tags ’ll use scraping:Modern websites might sections, used instead “div” tag:Tables structured like :can nested within others. Typically, page starts “h1” tag, “div” tags different sections, sidebar main content. “” tag typically nested within others.Standalone tags:tags don’t opening closing versions - just stand alone:img - image show. src attribute link, alt attribute text show accessibility. example: <img src=\"path---image\" alt=\"picture ...\">br - hard line break.","code":"<p> This is a paragraph <\/p>\n"},{"path":"advanced-scrape2.html","id":"common-attributes-for-tags","chapter":" 26 Introduction to scraping in R","heading":"Common attributes for tags","text":"People can also make attributes - ’re arbitrary.","code":""},{"path":"advanced-scrape2.html","id":"rvest-functions","chapter":" 26 Introduction to scraping in R","heading":"Rvest functions","text":"Use pipes, example:(’ll often see operations cbind rbind - ’re similar. way just tidyverse way.)","code":"\nurl %>% \n  read_html %>%\n  html_nodes ( \"table\") %>%\n  .[[3]] %>%\n  html_table(trim=T)\n  \nNB: In the fourth line, you need a period before the [[3]] . \nI don't know why. \nIt stands for \"whatever came before this\", and is usually implied when we use the pipe.\n  "},{"path":"advanced-scrape2.html","id":"examples-of-common-css-selectors","chapter":" 26 Introduction to scraping in R","heading":"Examples of common CSS selectors","text":"uses example assuming tag “p” , class “myclass” id “myid” used. substitute tags, classes, id’s want. See https://www.scraperapi.com/blog/css-selectors-cheat-sheet/ -depth cheat sheet.go whole path element need , look inspector section browser use CSS Selector Gadget (chrome extension ’ve never able work properly!)[]","code":""},{"path":"appendix-math.html","id":"appendix-math","chapter":"A Newsroom numbers cheat sheet","heading":"A Newsroom numbers cheat sheet","text":"(Selected edited drafts “Numbers Newsroom”, 2nd edition, 2014, Sarah Cohen. Full book available IRE)Virtually every number use must compared something – another time, another place total. newsroom math guide helps put numbers perspective using three devices: “Per” something, change, averages.arithmetic problems – formulas many us learned sometime around fourth grade. Unfortunately, another decade forget got reporting – got caught trap math phobia – tools became second nature.good news news stories don’t depend fancy math. Master arithmetic , ’ll able tackle reporting jobs.NOTE READERS MOBILE DEVICES: going look incomprehensible. Don’t even try get bigger screen.","code":""},{"path":"appendix-math.html","id":"the-pers-fractions-rates-percents-and-per-capita","chapter":"A Newsroom numbers cheat sheet","heading":"A.1 The PERS: Fractions, rates, percents and per capita","text":"can usually simplify story can re-jigger numbers rate, ratio percentage. “One four” fraction, rate. “Forty percent” another ratio rate. 235 deaths per 100,000 people another.Percents fractions used scale large small numbers putting perspective.Rates also used level playing field – compare two items different base.see lot numbers copy, examine see simple rate – “one four” 25 percent – simplify story.","code":""},{"path":"appendix-math.html","id":"fractions-and-percents","chapter":"A Newsroom numbers cheat sheet","heading":"A.1.1 Fractions and percents","text":"Repeat : “Percents fractions. Fractions percents.”\nRemembering time keep focused key element percentages: ’re ratios, rates, expressed fraction 100.Figuring percent:Step 1: Know base. Think words “.” ’s total groups.Step 2: Divide category care base.\nRemember fraction sign (/) means “divided ” (÷).Step 3: Move decimal point two places right\n(multiply 100) get rate per hundred, percent.Step 4: Round answer one decimal place. Better\nyet, look easier fraction readers understand.FormulaStep 1: Total = baseStep 2: (Category / Total) = ProportionStep 3: Proportion x 100 = PercentStep 4: Round simplify.ExampleIf 58 people say vote upcoming election 92 say won’t, compute percent people claim vote:Step 1: Base = number people asked = 92 + 58 = 150Step 2: Rate = 58 150 = 58/150 = .386666..Step 3: Percent = .38666… x 100 = 38.666666….Step 4: Round simplify: = nearly 40 percentYou probably know 1 4 one-quarter, ’s also 25 percent. may know get one another.fractions percents:1/4 = 1 ÷ 4 = 0.25. Move decimal place two places, multiply 100, get 25%percents fractions:Write percent fraction: 25/100Write percent fraction: 25/100Try find “least common denominator:” 25 case goes top bottom. might want round either number come simple denominator.Try find “least common denominator:” 25 case goes top bottom. might want round either number come simple denominator.Simplify: (25 / 25) / (100 / 25) = 1 / 4Simplify: (25 / 25) / (100 / 25) = 1 / 4To get “One “ numbers:Express percentage proportion dividing 100, 25% 0.25.Express percentage proportion dividing 100, 25% 0.25.Now divide one number: 1 / .25 = 4, answer one-fourth.Now divide one number: 1 / .25 = 4, answer one-fourth.Tip spreadsheet users: Excel allows format number fraction percent. Play around formats see number easily described.","code":""},{"path":"appendix-math.html","id":"rates-and-per-capita","chapter":"A Newsroom numbers cheat sheet","heading":"A.1.2 Rates and per capita","text":"percentages, per person per capita rates used level playing field.’re often used need compare two dissimilar places events: Crimes cities different populations, deaths various diseases Gross Domestic Product across countries.Rates also often used big small numbers change something can understand.Sometimes, though, rate makes things complicated, especially events rare consensus shouldn’t ever happen. examples include 32 crashes attributed GM’s faulty ignition switch, 64 deaths Centers Disease Control associated pharmacy compounding errors 2012.One rule thumb use raw numbers 100, revert kind fraction rate grow bigger.","code":""},{"path":"appendix-math.html","id":"rates-for-large-numbers","chapter":"A Newsroom numbers cheat sheet","heading":"Rates for large numbers","text":"raw per-person figure average usually used big numbers.Gross Domestic Product $17 trillion hard digest. reduce number can understand. divide 317 million, get $54,000 every man, woman child country. doesn’t mean person earned $54,000 – fact, almost half families earned less altogether writing. Instead, includes income generated companies well people.device turns incomprehensible number something can picture. also helps want compare countries – levels playing field adjusting size country.","code":""},{"path":"appendix-math.html","id":"rates-for-small-numbers---crime-death-and-other-rare-events","chapter":"A Newsroom numbers cheat sheet","heading":"Rates for small numbers - crime, death, and other rare events","text":"Rates 23 per 1,000 people something like – percentages, multiply something bigger 100 move decimal place right. Use small numbers.2.5 million people die country every year, percentage people die really small number: 0.789 per 100, percent.number little hard digest. experts ante express figure 789 deaths per 100,000 people.careful rates based small numbers. One example number police shootings per 100,000 people. police departments country small likely serve 5,000 people. means just one shooting department can lift one lowest rates nation one highest. Expect rates based small numbers unstable potentially misleading.34Figuring rateStep 1: Choose base. often difficult. reporting fatalities make car, use number cars road, number sold, total miles driven year? ’ll decide.Step 2: Divide number care base. Choosing numerator can also tricky. Going back automobile fatality example, use total number deaths number driver deaths? Take hint using reports see topic. Experts often come informal agreement telling number .Step 3: Multiply nice round number, 1,000, 100,000 1 million.Step 4: Round answer simplify.FormulaStep 1: Choose base, “total”Step 2: (Category / Total) = Proportion RateStep 3: Proportion x 1,000 = Rate per thousandStep 4: Round zero decimal placesExampleAccording FBI Crime United States 2012, 13,000 violent property crimes Pittsburgh population 312,000. 8,870 crimes Tucson population 531,000. Figuring rate per thousand residents lets compare two cities:crime rate Pittsburgh nearly 2 1/2 times Tucson year , 47/17 = 2.4Some people feel changing multiplier 100 something bigger cheating., 0.2 percent rate becomes big number – 200 – change base 100 100,000!practice, though, ’s nothing magical using base 100 (percent). Instead, use number makes sense comparison ’re making.Choose round number – 1,000, 1 million 100,000.Choose round number – 1,000, 1 million 100,000.Choose number experts use: Crimes per 1,000 people, deaths per 100,000, crashes per million miles driven, example.Choose number experts use: Crimes per 1,000 people, deaths per 100,000, crashes per million miles driven, example.Choose base give easy way express readers. one results number generally 1 1,000 .Choose base give easy way express readers. one results number generally 1 1,000 .Try avoid using outrageously large base. instance, avoid expressing local number terms 1 million people. handful cities million people.Try avoid using outrageously large base. instance, avoid expressing local number terms 1 million people. handful cities million people.Keep base throughout story. Don’t shift 100,000 1,000 crime statistics, instance, move murders total crime rates.Keep base throughout story. Don’t shift 100,000 1,000 crime statistics, instance, move murders total crime rates.often balance rules thumb come compromise allows write gracefully keeping sense scale appropriate comparisons ’re making.","code":""},{"path":"appendix-math.html","id":"measuring-change","chapter":"A Newsroom numbers cheat sheet","heading":"A.2 Measuring change","text":"often write change difference, usually difference place time.","code":""},{"path":"appendix-math.html","id":"simple-differences","chapter":"A Newsroom numbers cheat sheet","heading":"A.2.1 Simple differences","text":"simple difference just result subtracting one number another. measuring differences time, ’s newer number minus older number.One time use simple difference number understandable without calculations. Prices common household goods, salaries home prices examples numbers needn’t always put perspective using percentage changes.end, work news. means sometimes ’ll use raw number ’s newsworthy. doesn’t necessarily mean number alarming – just meaningful.Figuring difference:Subtract older number newer number.subtracting little number big number.number fallen get negative number. number risen get positive number.FormulaNew – Old.Example executive made $2.4 million last year. made $2.9 million year.raise :\n$2.9 – $2.4 = 0.5 million, $500,000, half million dollars.","code":""},{"path":"appendix-math.html","id":"percent-change-percent-difference","chapter":"A Newsroom numbers cheat sheet","heading":"A.3 Percent change / Percent difference","text":"butchered form newsroom math percent difference, percent change.Part problem folks found five six different ways compute . Unfortunately, two work every time. ’ll show sometimes – especially want compare rates – one easier .Note methods work whether number going going . number fallen, ’ll get negative answer. number risen, ’ll get positive one. still comes right increase bigger 100 percent.35In practice, use Method 1 ’m working spreadsheets can look simple difference one column use formula percentage difference. use Method 2 want compare percent changes one another working annual rates.\nMethod 1: Subtract divide\nMethod 2: Divide subtract\nFiguring percent change\n\nStep 1: Get simple difference numbers subtracting older number newer number. doesn’t matter one bigger!Step 2: Divide answer older number.Step 3: Multiply 100, move decimal point two places right.\nStep 1: Get proportion new number compared old number. percent total , except old number base.Step 2: Subtract 1 ratioStep 3: Multiply 100, move decimal point two places right.\nFormula\n\nStep 1: New – Old = DifferenceStep 2: Difference / Old = Decimal answerStep 3: Decimal x 100 = percentage difference\nStep 1: New / Old = RatioStep 2: Ratio - 1 = Decimal answerStep 3: Decimal x 100 = percentage difference\nExample\nexecutive made $2.4 million last year. made $2.9 million year.Step 1: Difference = 2.9 – 2.4 = 0.5Step 2: Difference / Original number =  0.5 / 2.4 = .208Step 3: Move decimal point = 20.8%Step 1: Ratio = 2.9/2.4 = 1.208Step 2: Decimal answer = 1.208 - 1 = .208Step 3: Move decimal point = 20.8%executive got raise equivalent one-fifth original salary.Remember number can grow many times, can fall 100 percent zero. rough concept think . double price $20, increasing 100%, ’s $40. triple , ’s $60. reduce $40 back $20, ’s 50 percent drop, one-half level, 100 percent decrease. words, percent changes can’t reversed.means ads claiming ’ll use three times less detergent food contains three times less salt wrong impossible. probably mean three times much used brand ate food, brand one third much. two ways makes difference:need two three numbers reverse predict percent change:number startedWhere endedWhat percent change () beAny two give need. ’s easiest use Method 2 get . example assumes know started ended. ’s either two:starts percent changeExample: started $100 grew total 12%. , started $100 fell total 12% (percent change -12%)Step 1: Convert percent change ratio moving decimal place back : .12 () -.12 ()Step 2: Add 1, resulting 1.12 () .88 ()Step 3: Multiply beginning number amount : $100 x 1.12 = $112 (), $100 x .88 = $88 ()ends total percent changeFor example, say house worth $330,000, appreciated total 15% past years. ’s figure started:Step 1: Convert percent change decimal, : 0.15Step 2: Divide current value amount = $330 / .15 = $287This isn’t intuitive, differs ’re starting bigger base. 15 percent 330 isn’t 15 percent 287.","code":""},{"path":"appendix-math.html","id":"going-further-with-percents-and-rates","chapter":"A Newsroom numbers cheat sheet","heading":"Going further with percents and rates","text":"three common problems changes rates probably encounter aren’t part guide. get help look situations come : 36Relative risk: ’s technical term dividing two percentages. mortgage denial rate Black homeowners 10 percent, denial rate white homeowners 5 percent, means Black homeowners twice likely denied loan. can used rates changes.Relative risk: ’s technical term dividing two percentages. mortgage denial rate Black homeowners 10 percent, denial rate white homeowners 5 percent, means Black homeowners twice likely denied loan. can used rates changes.Annual rates: know something grown, say, 2 percent year 10 years, ’s thing 20 percent. annualize .Annual rates: know something grown, say, 2 percent year 10 years, ’s thing 20 percent. annualize .Adjusting inflation: Comparing values across two points time – especially today – means putting footing. Generally, want convert old values buying power today. example, ’s hard compare salaries teachers today 50 years ago, money isn’t worth much today.Adjusting inflation: Comparing values across two points time – especially today – means putting footing. Generally, want convert old values buying power today. example, ’s hard compare salaries teachers today 50 years ago, money isn’t worth much today.","code":""},{"path":"appendix-math.html","id":"average-and-typical-values","chapter":"A Newsroom numbers cheat sheet","heading":"A.4 Average and typical values","text":"Averages37 just summaries. quote sums event, anecdote sums person using actions instead words, average sums human condition kind – money, congestion, death disease – single number.Choosing average carefully deciding may another number method sum situation can mean difference accurately inaccurately describing story.Understanding different kinds “measures central tendency” – tell us don’t – first thing learn basic statistics classes. doesn’t describe data well, ’s productive move forward many kinds analysis.Trying compare populations time particularly tricky using averages giant demographic shifts. Baby Boom Millennials came people call Baby Bust. Getting average spending education, example, across generations really misleading – boom, bust, boom one number describe pattern.38Two types averages reviewed . Consult introductory statistics book work depends average.","code":""},{"path":"appendix-math.html","id":"the-average-or-mean","chapter":"A Newsroom numbers cheat sheet","heading":"A.4.1 The average or mean","text":"“mean” people mean say word “average”.\n’s descriptive summarizes numbers don’t vary much either top bottom ends. averages often misleading refer items measured dollar amount like incomes, housing costs like.Figuring simple average meanStep 1: Add list numbers.Step 2: Divide answer number numbers ’ve added .FormulaStep 1: Sum numbersStep 2: Sum / Count numbersFor spreadsheet users: =AVERAGE(list numbers)ExampleHere six home prices block:Step 1: 275 + 275 + 200 + 1,200 + 500 + 395 = 2,845 $2,845,000Step 2: $2,845,000 / 5 = $569,000.average home price one list.","code":"$275,000          $1,200,000\n$275,000            $500,000\n$200,000            $395,000\n"},{"path":"appendix-math.html","id":"the-median","chapter":"A Newsroom numbers cheat sheet","heading":"A.4.2 The median","text":"Medians often used summarize value things measured dollars, especially home prices incomes. sensitive one two unusually high low values way average previous example .’s harder get median need list values. example, know total income metropolitan area number people area, can compute average – per capita income – median.One way express median call “typical” value. Another way say ’s “middle” value.Figuring median:Step 1: List numbers order, beginning lowest ending highest.Step 2: Count many numbers divide two.Step 3: Add 0.5. comes whole number (like 13), count list many values.’s (like 12.5), take average two numbers surrounding number. 39In words, closest can get middle list. sorting counting job, calculator job.spreadsheet, use =MEDIAN() function.Example:Step 1:list, listed lowest highest, extra expensive homeStep 2: 6/2 = 3Step 3: 3 + .5 = 3.5Step 4: Average 3rd 4th items list: (275 + 395) / 2 = $335,000As rule thumb, median telling average ’re different example. word “median” sounds technical readers average encompasses values list, use ’re different.","code":"1.    $200,000\n2.    $275,000      \n3.    $275,000      \n4.    $395,000\n5.    $500,000\n6.  $1,200,000"},{"path":"appendix-program.html","id":"appendix-program","chapter":"B A gentle intro to programming","heading":"B A gentle intro to programming","text":"\nchapter\none born knowing code. takes practiceAll programming languages certain things common: variables, operators, functions loopsThey also ways read data, import, files internet.algorithm just set instructions carried order.examples shown mainly using R syntax. Another language might look little different.","code":""},{"path":"appendix-program.html","id":"building-blocks","chapter":"B A gentle intro to programming","heading":"B.1 Building blocks","text":"learn program one language, learning others much simpler. ’s basic concepts : assign values variables, loop lists, import data. chapter walks universal concepts programming.","code":""},{"path":"appendix-program.html","id":"variables","chapter":"B A gentle intro to programming","heading":"Variables","text":"Variables just containers names. Variables simple, variable holds value, “Sarah”. can quite complex, multi-level data frame containing details Spotify playlist. people call objects.40Literals\nbasic kind object single variable contains single value specific type:\n \"Sarah\"\n 1.0\n TRUE\n 2017-01-24\ncalled “literals”, usually include text, numeric, logical (usually true/false sometimes yes/1/0) date date/time. want use actual letters text, enclose quotes. want use named variable, don’t enclose quotes. 41LiteralsThe basic kind object single variable contains single value specific type:called “literals”, usually include text, numeric, logical (usually true/false sometimes yes/1/0) date date/time. want use actual letters text, enclose quotes. want use named variable, don’t enclose quotes. 41Lists / arrays / vectors\nlanguages concept list items called array, vector dictionary. R, create vector using “c” operator, short “combine”. items list vector, can apply function across work order.\nc(1, 2, 3, 4, 5) \n  creates vector values 1 5 RLists / arrays / vectorsMost languages concept list items called array, vector dictionary. R, create vector using “c” operator, short “combine”. items list vector, can apply function across work order.Data frames tables\ndata frame special version list, equivalent spreadsheet: tabular, rectangular data columns rows. don’t need know much yet, just understand become important part vocabulary.Data frames tablesA data frame special version list, equivalent spreadsheet: tabular, rectangular data columns rows. don’t need know much yet, just understand become important part vocabulary.","code":" \"Sarah\"\n 1.0\n TRUE\n 2017-01-24c(1, 2, 3, 4, 5) \n  creates a vector of the values 1 through 5 in R"},{"path":"appendix-program.html","id":"operators-assignment","chapter":"B A gentle intro to programming","heading":"Operators & assignment","text":"Operators simple arithmetic similar operations, like adding, subtracting, dividing multiplying. common operators :“Assignment” means pushing value variable name using “<-”. ’s amazing many different ways think . might call “naming value”, others might consider “setting variable”.","code":"   Arithmethic: add (+), subtract (-), multiply (*), or divide (/).\n\n   Comparison: Greater than (>) , less than (<), \n                equal to (often == ),\n                not equal to (often !=).  my_name <- \"Sarah\"\n  my_value <- 1.0"},{"path":"appendix-program.html","id":"functions","chapter":"B A gentle intro to programming","heading":"Functions","text":"function set instructions. use function, use name, followed parentheses. requires information , arguments go inside parentheses.think sentence, function verb, arguments nouns. used function Excel:Functions usually categorized type data element act upon. example R function tolower(), converts text character variable inside parentheses lower case.Many functions use already built R, libraries borrow – someone else already written, tested packaged .Examples include:importing text Excel datacalculating average sumcountingfinding phrases within text","code":"=SUM(A1:A15)"},{"path":"appendix-program.html","id":"loops","chapter":"B A gentle intro to programming","heading":"Loops","text":"loop way repeat instructions without re-write every time. usually work stepping kind list, like directory files, using counter, every year 2005 2018.Excel Google Sheets don’t really loops, unless learn complicated programming language behind . many people move programming langugate – get power loops.One type loop commonly used programs “loop”, says, “every one something, follow instructions”:\nloops always scary monsters. Conceptual intro (, code run…) loops. Thanks @ChelseaParlett brainstorming w/ one! pic.twitter.com/TySFHogG2d\nCommon tasks reporters loops include combining annual spreadsheets government website downloading importing many files ; scraping web pages require clicking link one one. ’ll get end semester.\nIngredients Katie Smith via Unsplash\n","code":""},{"path":"appendix-program.html","id":"an-algorithm-to-make-an-omelet","chapter":"B A gentle intro to programming","heading":"B.2 An algorithm to make an omelet","text":"Algorithms just instructions get followed order. brush teeth way every morning, can probably write steps algorithm.Suppose want make omelet. even start, need know least two things: ingredients hand, kind omelet want make.function algorithm creates omelet might look something like . first row creates function called make_omelet(), requires two pieces information arguments. ’ve made function, can refer set instruction name giving arguments needs.(examples called “pseudo-code”. won’t actually work program, lay logic translated specific computer language ’re using.)Now, want make omelet, can just make list ingredients kind omelet want, execute function:ingredients already :want spinach cheese omelet:Now, use function created make using two lists required arguments:use built-function R, show arguments required optional type.","code":"function make_omelet (ingredients_on_hand, what_kind) {\n\n     check for necessary ingredients (are all elements of what_kind in ingredients_on_hand?)\n         quit now if you don't have them all.\n         return the error message\n\n     prepare the ingredients for (what_kind)\n\n     whisk the eggs\n\n     melt some butter in a pan\n\n     pour in the eggs\n\n     add ingredients for what_kind\n\n     flip the omelet\n\n     remove from pan\n\n     give me the omelet \n\n}ingredients <-\n        c(\"butter\", \"eggs\", \"cheese\", \"spinach\", \"tomatoes\")kind <-\n        c(\"spinach\", \"cheese\")make_omelet (ingredients, kind)"},{"path":"appendix-program.html","id":"open-a-restaurant-with-loops","chapter":"B A gentle intro to programming","heading":"Open a restaurant with loops","text":"Now, ’d repeat restaurant. might look like :’d program hundreds lines long – one customer. Instead, loop customers thing:","code":"  make_omelet (ingredients,kind)\n  ** make a new list of ingredients left and the kind**\n  make_omelet (ingredients2, kind2)\n  ** make a new list...**\n  make_omelet (ingredients3, kind3)\n  ... and so on.customers <- c(\"Bob\", \"Jamal\", \"Christine\", \"Lauren\")\n\nfor each customer in the list of customers {\n  request what kind they want\n  make_omelet (ingredients_on_hand, kind_this_customer_wants)\n  give omelet to customer\n  update your ingredients list if you ran out of something or went shopping\n}"},{"path":"appendix-program.html","id":"more-resources","chapter":"B A gentle intro to programming","heading":"B.3 More resources","text":"“Beyond Binary, Lesson 1 Google engineer’s drag queen persona named Anna Lytical. video gives good handle computer program .","code":""},{"path":"appendix-glossary.html","id":"appendix-glossary","chapter":"C Glossary","heading":"C Glossary","text":"work progress - ’ll add terms ’re needed","code":""},{"path":"appendix-glossary.html","id":"glossary","chapter":"C Glossary","heading":"C.1 Glossary","text":"attribute HTMLPart tag defines . common ones \nPart tag defines . common ones areclass: CSS definition provides formatting information whenever ’s mentioned inside tag. tag can many classes defined. web designer wants specific font type paragraph, along specific color pieces content, may use classes. look like tag: <p class=\"myfont mycolor\">, referenced using period CSS selectors :.myfont`.id: CSS definition locates specific item page. unique within page – two elements ID. ’s referenced hashtag CSS selectors #myidhref: URL link, used inside “” tag.CSSCascading Style Sheets. sub-language styles elements according pre-defined definition. can supplied HTML page separate file inline heading HTML.\nCascading Style Sheets. sub-language styles elements according pre-defined definition. can supplied HTML page separate file inline heading HTML.CSS selectorA method used find elements HTML page using CSS definitions.\nmethod used find elements HTML page using CSS definitions.csv; tsvtwo file extensions, suggesting contents comma-separated tab-separated plain text files. common open source method sharing tabular data.\ntwo file extensions, suggesting contents comma-separated tab-separated plain text files. common open source method sharing tabular data.HTMLHypertext markup language, code underneath web pages, gets rendered browser formatted page including text, images, videos, audio. ’s specific form generalized XML data format, ’re covering. may see references XML work scraping. (get “markdown” documents – get translated “markup” go engine like knitting function R. )\nHypertext markup language, code underneath web pages, gets rendered browser formatted page including text, images, videos, audio. ’s specific form generalized XML data format, ’re covering. may see references XML work scraping. (get “markdown” documents – get translated “markup” go engine like knitting function R. )JavascriptThe language used interactivity web pages. ’s hard learn useful thing learn chose delve another language. Like R, javascript many libraries frameworks extend usefulness. Two common libraries JQuery interactive tables, D3 interactive visualizations.\nlanguage used interactivity web pages. ’s hard learn useful thing learn chose delve another language. Like R, javascript many libraries frameworks extend usefulness. Two common libraries JQuery interactive tables, D3 interactive visualizations.jsonJavascript Object Notation, format used transfer datasets across web phone browser. international language web development data. text-based tabular – item table set tables presented list columns, can sub-lists. JSON can quite simple quite complex, ’s reliable way transfer complicated information whole documents computers operating systems.\nJavascript Object Notation, format used transfer datasets across web phone browser. international language web development data. text-based tabular – item table set tables presented list columns, can sub-lists. JSON can quite simple quite complex, ’s reliable way transfer complicated information whole documents computers operating systems.tag; element; nodeAn HTML tag word used define element HTML page. people use terms “element” “node” interchangeably.\nHTML tag word used define element HTML page. people use terms “element” “node” interchangeably.tag, element name, defines different types items page ’s rendered browser. tag begins <, ends >, tag opening closing item, closing item preceded /. Example: <p>paragraph<\/p>. Common elements :h1, h2, … : headline levels. usually one h1 tag page, headline. h5 lowest level heading allowed.p, div: Two ways create blocks text (“paragraph” “division”): link , contains URL href attribute text showimg: image, loaded another file. (HTML text. Images, sound video actually loaded links files.)table, tr, td : table rows (tr) rows cells (td)ul, ol: Unordered (bulleted) ordered (numbered) lists. Lists contain items using li tag.variableIn R, every object variable environment - can see part RStudio interface. variable can simple, word, can complex, data frame. words “variable” “object” often used interchangeably, ’s common refer objects complex, result parsing HTML page.\nR, every object variable environment - can see part RStudio interface. variable can simple, word, can complex, data frame. words “variable” “object” often used interchangeably, ’s common refer objects complex, result parsing HTML page.statistics, variable something “varies” case case. ’s thing column well-formed spreadsheet R data frame.can get confusing R. custom book reserve word “variable” object, use word “column” variable data frame.XPathA language used navigate pages position characteristics. ’s powerful CSS selectors, also difficult learn. works XML HTML pages.\n","code":""},{"path":"appendix-resources.html","id":"appendix-resources","chapter":"D Great R Resources","heading":"D Great R Resources","text":"","code":""},{"path":"appendix-resources.html","id":"key-takeaways","chapter":"D Great R Resources","heading":"D.1 Key takeaways","text":"set resources doesn’t fit learning style, lots others mightIn class, working almost entirely “tidyverse”, R Markdown documents. resources ’ll find elsewhere might .","code":""},{"path":"appendix-resources.html","id":"coursework-in-r","chapter":"D Great R Resources","heading":"D.2 Coursework in R","text":"professors universities also trying teach R journalism classes. particularly rich materials students:Jesse Lecy’s “Introduction data science social sector,” ASU course teaches R context non-profit management. site, https://ds4ps.org/cpp-526-fall-2019/ custom-made textbook covers much material us.Jesse Lecy’s “Introduction data science social sector,” ASU course teaches R context non-profit management. site, https://ds4ps.org/cpp-526-fall-2019/ custom-made textbook covers much material us.Matt Waite University Nebraska teach R context sports journalism class data journalism. textbooks freely available Github. One minor difference might trip : ’re using R Markdown, ’s using R Notebooks. ’re similar, “knit” option isn’t use Notebooks – “Preview”. ’ll know means get moving.Matt Waite University Nebraska teach R context sports journalism class data journalism. textbooks freely available Github. One minor difference might trip : ’re using R Markdown, ’s using R Notebooks. ’re similar, “knit” option isn’t use Notebooks – “Preview”. ’ll know means get moving.Christian McDonald University Texas also created textbook data reporting class, walks data set way .Christian McDonald University Texas also created textbook data reporting class, walks data set way .Peter Aldhous’s “R Data Journalism”. Peter uses R script instead markdown document. , create new R document instead markdown, run code pressing CTL-Enter next lines want run. won’t formatted, takes away one first sets confusion .Peter Aldhous’s “R Data Journalism”. Peter uses R script instead markdown document. , create new R document instead markdown, run code pressing CTL-Enter next lines want run. won’t formatted, takes away one first sets confusion .","code":""},{"path":"appendix-resources.html","id":"instructional-screencasts-and-videos","chapter":"D Great R Resources","heading":"D.3 Instructional screencasts and videos","text":"Mary Jo Webster’s R journalism videosMary Jo Webster’s R journalism videosDatacamp free introduction R class includes lot ’re , called “Transforming data dplyr”Datacamp free introduction R class includes lot ’re , called “Transforming data dplyr”Andrew Ba Tran’s R Journalists course, originall created MOOC offered Knight Center Americas. Previous Cronkite students say goes little fast someone experience lanugages, ’d need.Andrew Ba Tran’s R Journalists course, originall created MOOC offered Knight Center Americas. Previous Cronkite students say goes little fast someone experience lanugages, ’d need.Ben Stenhaug, Data Science Social Good fellow Stanford, put together screencasts exercises called teachR starting R tidyverse.Ben Stenhaug, Data Science Social Good fellow Stanford, put together screencasts exercises called teachR starting R tidyverse.“Tidy Tuesday” screencasts David Robinson, example using fivethirtyeight.com data education salaries. long – hour – walk ’s really like take dataset scratch try find something interesting. disagree one thing though – believe read documentation FIRST, ’ve done lot guessing columns mean.“Tidy Tuesday” screencasts David Robinson, example using fivethirtyeight.com data education salaries. long – hour – walk ’s really like take dataset scratch try find something interesting. disagree one thing though – believe read documentation FIRST, ’ve done lot guessing columns mean.Sharon Machliss’ “R” YouTube series. fairly advanced single-topic, short videos.Sharon Machliss’ “R” YouTube series. fairly advanced single-topic, short videos.","code":""},{"path":"appendix-ppp.html","id":"appendix-ppp","chapter":"E Documentation for PPP data chapters","heading":"E Documentation for PPP data chapters","text":"Paycheck Protection Program response severe business losses COVID-19. provided -interest, forgiveable loans cover 2 1/2 months’ payroll expenses national shutdown 2020, lost revenue second round early 2021. Restaurants similar businesses higher loan amounts industries. intended keep restaurants, offices small businesses afloat agreed keep people payrolls covid restrictions.program administered Small Business Administration, business owners went banks get loans. (cases, loans became grants – never paid back.) Banks got fee processing applications never hook anyone didn’t pay back.several lawsuits, federal government finally started releasing relatively complete data 111 million loans early 2021, expanded reporting later year.","code":""},{"path":"appendix-ppp.html","id":"sources","chapter":"E Documentation for PPP data chapters","heading":"E.1 Sources","text":"data used book downloaded January 2022 SBA data site https://data.sba.gov/dataset/ppp-foia .data dictionary distributed site https://data.sba.gov/dataset/ppp-foia/resource/aab8e9f9-36d1-42e1-b3ba-e59c79f1d7f0 Excel spreadsheet.background information program: https://www.sba.gov/funding-programs/loans/covid-19-relief-options/paycheck-protection-programThe data downloaded using program concatenate files one, large data frame. minimal standardization cleaning done:recipient names upper case, periods removed.city names proper case.PPP loans two geographic locations included: location borrower, city, county, state congressional district project funded. especially important construction similar trades work done sites.PPP loans given 24 months either repay debt request forgiveness. None yet met maturity date, none “charged ” written SBA.Arizona loans extracted either borrower project state. contains 169,268 loans.","code":""},{"path":"appendix-ppp.html","id":"data-used-in-the-tutorials","chapter":"E Documentation for PPP data chapters","heading":"E.2 Data used in the tutorials","text":"columns renamed selection columns used tutorials.files referenced tutorials selection columns used list:columns original data set, many almost never filled , shown inaccurate estimates.\nexample, nearly 170,000 loans, 120,000 information race ethnicity business owner. None marked veteran-owned owner’s gender filled . columns, current lender (opposed one made loan) added complexity without adding much purposes.","code":""}]
